!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSGameTools=e():t.JSGameTools=e()}(Object("undefined"!=typeof self?self:this),()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Arrow:()=>Ue,Box:()=>F,Button:()=>ft,ButtonImage:()=>Ct,Canvas:()=>Ne,Circle:()=>sn,Col:()=>xt,Component:()=>O,Constants:()=>n,Container:()=>tt,Cross:()=>Ut,EasingFunctions:()=>Fe,ErrorScreen:()=>Le,Event:()=>m,FPSMeter:()=>pe,ImageContainer:()=>pt,ImageLoader:()=>wt,Input:()=>te,Label:()=>oe,Link:()=>ae,Menu:()=>Gt,NotificationMessage:()=>Wt,ProgressBar:()=>Se,Reactor:()=>E,ReactorCanvas:()=>Te,Row:()=>lt,Scene:()=>ve,Scrollbar:()=>U,ScrollbarHorizontal:()=>P,ScrollbarVertical:()=>W,Select:()=>Ye,SelectOption:()=>Ve,SelectOptionsContainer:()=>en,Style:()=>y,Tooltip:()=>ue,Triangle:()=>We,Utils:()=>H});const n={Setting:{DISABLE_OPTIMIZATIONS:!1,DISABLE_EXPERIMENTAL_OPTIMIZATIONS:!1,DISABLE_IS_COMPONENT_VISIBLE_OPTIMIZATIONS:!0,DISABLE_CONTAINERS_CUTTING:!1,ENABLE_PIXEL_RATIO_RESIZING:!0,PIXEL_RATIO:1,RESOLUTION_SCALE:1,FONT_FAMILY:"sans-serif",FONT_SIZE:28,CANVAS_WIDTH:600,CANVAS_HEIGHT:400,DEFAULT_PADDING:6,DEFAULT_SPACING:6,BUTTON_DEFAULT_BACKGROUND:"rgba(0, 0, 0, 0)",BUTTON_DEFAULT_HOVER_BACKGROUND:"#95A5A6",BUTTON_DEFAULT_CLICK_BACKGROUND:"#727F80",BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND:"#ACBEBF",INPUT_DEFAULT_FONT_COLOR:"#000",INPUT_DEFAULT_BACKGROUND_COLOR:"#fff",INPUT_DEFAULT_BORDER_COLOR:"#000",INPUT_DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",INPUT_DEFAULT_SELECT_COLOR:"#2980b9",LABEL_DEFAULT_FONT_COLOR:"#000",LINK_DEFAULT_COLOR:"#0000EE",LINK_DEFAULT_HOVER_COLOR:"#4D4DFF",LINK_DEFAULT_CLICK_COLOR:"#EE7700",MENU_DEFAULT_BACKGROUND:"rgba(44, 62, 80, 0.75)",MENU_DEFAULT_BLUR_BACKGROUND:!1,NOTIFICATION_DEFAULT_BACKGROUND:"rgba(46, 204, 113, 0.5)",NOTIFICATION_DEFAULT_ANIMATION_DURATION:500,PROGRESS_DEFAULT_BACKGROUND:"#bdc3c7",PROGRESS_DEFAULT_FOREGROUND:"#27ae60",PROGRESS_DEFAULT_ANIMATION_DURATION:2e3,TOOLTIP_DEFAULT_BACKGROUND:"rgba(255, 255, 255, 0.25)",ARROW_DEFAULT_LINE_CAP:"round",ARROW_DEFAULT_COLOR:"#FF0000",ARROW_DEFAULT_LINE_SIZE:8,ARROW_DEFAULT_HEAD_SIZE:20,CROSS_DEFAULT_LINE_CAP:"round",CROSS_DEFAULT_COLOR:"#fff",CROSS_DEFAULT_LINE_SIZE:3,SCROLLBAR_DEFAULT_BACKGROUND:"rgba(149, 165, 166, 0.75)",SCROLLBAR_DEFAULT_HOVER_BACKGROUND:"rgba(149, 165, 166, 0.9)",SCROLLBAR_DEFAULT_CLICK_BACKGROUND:"rgba(149, 165, 166, 0.5)",SCROLLBAR_DEFAULT_SIZE:10,DEFAULT_BORDER_SIZE:3,DEFAULT_BORDER_COLOR_SELECTED:"#a2cdd8",DEFAULT_ANIMATION_DURATION:2e3,TRIANGLE_DEFAULT_LINE_CAP:"round",TRIANGLE_DEFAULT_COLOR:"#000",TRIANGLE_DEFAULT_FILL_COLOR:"#000",TRIANGLE_DEFAULT_LINE_SIZE:3,TRIANGLE_DEFAULT_FILL:!0,SELECT_DEFAULT_BACKGROUND:"#ecf0f1",SELECT_DEFAULT_HOVER_BACKGROUND:"#bdc3c7",SELECT_DEFAULT_CLICK_BACKGROUND:"#adb2b5",CIRCLE_DEFAULT_LINE_CAP:"round",CIRCLE_DEFAULT_COLOR:"#fff",CIRCLE_DEFAULT_FILL_COLOR:"#000",CIRCLE_DEFAULT_LINE_SIZE:3,CIRCLE_DEFAULT_FILL:!0,ERROR_MENU_BACKGROUND_COLOR:"#3498db"},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13,ECHAP:27,TAB:9},Alignement:{RIGHT:"right",LEFT:"left",CENTER:"center",DEFAULT:"default"},VerticalAlignement:{TOP:"top",CENTER:"center",BOTTOM:"bottom",DEFAULT:"default"},String:{ERROR_MESSAGE_CANVAS:"A fatal error has occurred at the JSGameTools level.",ERROR_MESSAGE_CANVAS_LABEL:":'(\nA fatal error has occurred at the JSGameTools level.",RETRY:"Retry",NOTICE_MESSAGE:"Notice:",WARNING_MESSAGE:"Warning:",ERROR_MESSAGE:"Error:",OPTIMIZATION_DISABLED:"Optimizations are disabled. You may notice low performance.",CONTAINER_CUTTING_DISABLED:"Containers cutting is disabled.",BUTTON_IMAGE_DEPRECATED:"JSGameTools.ButtonImage is deprecated. Please use a Button with an ImageContainer instead.",INPUT_FULLSCREEN:"The use of JSGameTools.Canvas is needed for Input components to properly work in fullscreen mode.",DETAILS:"Details"}};function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=c(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},u.apply(null,arguments)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function v(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var p=new WeakMap,y=function(){function t(e){var n,r,o;i(this,t),o={},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=p),r.set(n,o),v(this,"component",void 0),this.setAll(e)}return a(t,[{key:"fontColor",get:function(){return g(p,this).fontColor}},{key:"fontColorHover",get:function(){return g(p,this).fontColorHover}},{key:"fontColorDown",get:function(){return g(p,this).fontColorDown}},{key:"fontFamily",get:function(){return null!=g(p,this).fontFamily?g(p,this).fontFamily:n.Setting.FONT_FAMILY}},{key:"fontSize",get:function(){return null!=g(p,this).fontSize?g(p,this).fontSize:n.Setting.FONT_SIZE}},{key:"bold",get:function(){return g(p,this).bold}},{key:"underline",get:function(){return g(p,this).underline}},{key:"wrap",get:function(){return g(p,this).wrap}},{key:"backgroundColor",get:function(){return g(p,this).backgroundColor}},{key:"foregroundColor",get:function(){return g(p,this).foregroundColor}},{key:"backgroundColorHover",get:function(){return g(p,this).backgroundColorHover}},{key:"backgroundColorDown",get:function(){return g(p,this).backgroundColorDown}},{key:"borderColor",get:function(){return g(p,this).borderColor}},{key:"borderColorHover",get:function(){return g(p,this).borderColorHover}},{key:"borderColorDown",get:function(){return g(p,this).borderColorDown}},{key:"borderColorSelected",get:function(){return null!=g(p,this).borderColorSelected?g(p,this).borderColorSelected:n.Setting.DEFAULT_BORDER_COLOR_SELECTED}},{key:"borderSize",get:function(){return null!=g(p,this).borderSize?g(p,this).borderSize:n.Setting.DEFAULT_BORDER_SIZE}},{key:"selectColor",get:function(){return g(p,this).selectColor}},{key:"alignement",get:function(){return g(p,this).alignement}},{key:"verticalAlignement",get:function(){return g(p,this).verticalAlignement}},{key:"disableAnimation",get:function(){return g(p,this).disableAnimation}},{key:"scrollXDisabled",get:function(){return g(p,this).scrollXDisabled}},{key:"scrollYDisabled",get:function(){return g(p,this).scrollYDisabled}},{key:"padding",get:function(){return null!=g(p,this).padding?g(p,this).padding:n.Setting.DEFAULT_PADDING}},{key:"spaceBetweenComponents",get:function(){return null!=g(p,this).spaceBetweenComponents?g(p,this).spaceBetweenComponents:n.Setting.DEFAULT_SPACING}},{key:"hidden",get:function(){return g(p,this).hidden}},{key:"blurBackground",get:function(){return g(p,this).blurBackground}},{key:"lineWidth",get:function(){return g(p,this).lineWidth}},{key:"animationDuration",get:function(){return null!=g(p,this).animationDuration?g(p,this).animationDuration:n.Setting.DEFAULT_ANIMATION_DURATION}},{key:"foreground",get:function(){return g(p,this).foreground}},{key:"zIndex",get:function(){return null!=g(p,this).zIndex?g(p,this).zIndex:0}},{key:"lineCap",get:function(){return g(p,this).lineCap}},{key:"fill",get:function(){return g(p,this).fill}},{key:"fillColor",get:function(){return g(p,this).fillColor}},{key:"color",get:function(){return g(p,this).color}},{key:"movable",get:function(){return g(p,this).movable||!1}},{key:"set",value:function(t,e){g(p,this)[t]!=e&&(g(p,this)[t]=e,this.component&&this.component.reactor&&this.component.reactor.dispatchEvent("onChange",this))}},{key:"setAll",value:function(t){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.set(e,t[e])}},{key:"copy",value:function(){return new t(g(p,this))}},{key:"getStyles",value:function(){var t={};for(var e in g(p,this))Object.prototype.hasOwnProperty.call(g(p,this),e)&&(t[e]=g(p,this)[e]);return t}}])}(),m=function(){return a(function t(e){i(this,t),this.name=e,this.callbacks=[]},[{key:"registerCallback",value:function(t){this.callbacks.push(t)}},{key:"removeCallback",value:function(t){this.callbacks.filter(function(e){return e!=t})}},{key:"removeAllCallbacks",value:function(){this.callbacks=[]}}])}(),E=function(){return a(function t(){i(this,t),this.events={}},[{key:"registerEvent",value:function(t){this.events[t]=new m(t)}},{key:"dispatchEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.events[t]&&this.events[t].callbacks.forEach(function(t){return t&&t.apply(void 0,n)})}},{key:"addEventListener",value:function(t,e){this.events[t]&&this.events[t].registerCallback(e)}},{key:"removeEventListener",value:function(t,e){this.events[t]&&this.events[t].removeCallback(e)}},{key:"removeAllEventListener",value:function(t){this.events[t]&&this.events[t].removeAllCallbacks()}}])}();function C(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function w(t,e){return t.get(A(t,e))}function S(t,e,n){return t.set(A(t,e),n),n}function A(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var T=new WeakMap,k=new WeakMap,L=new WeakMap,_=new WeakMap,I=new WeakMap,b=new WeakMap,R=new WeakMap,O=function(){return a(function t(e,n,r,o,s){var a=this;i(this,t),v(this,"selectable",!0),C(this,T,0),C(this,k,0),C(this,L,0),C(this,_,0),C(this,I,!1),C(this,b,!1),C(this,R,void 0),S(L,this,e||0),S(_,this,n||0),this.deltaX=0,this.deltaY=0,S(T,this,r),S(k,this,o),this.canvas,this.parent,this.style=s,this.reactor=new E,this.reactor.registerEvent("onClick"),this.reactor.registerEvent("onHover"),this.reactor.registerEvent("onDown"),this.reactor.registerEvent("onScroll"),this.reactor.registerEvent("onMove"),this.reactor.registerEvent("onUp"),this.reactor.registerEvent("onChange"),this.init=!1,this.hasInitEvents=!1,S(b,this,!1),this.clicked=!1,this.hovered=!1,S(I,this,!1),this.movable=!1,this.moving=!1,this.offsetScrollX=0,this.offsetScrollY=0,this.offsetMoveX=0,this.offsetMoveY=0,this.moveEventStartX=0,this.moveEventStartY=0,this.touchEventStartX=0,this.touchEventStartY=0,this.touchEventStartTimestamp=0,this.tooltip,this.initEvents(),this.addMoveAction(function(t,e){a.movable&&!a.disabled&&a.clicked&&(a.deltaX-=t,a.deltaY-=e)})},[{key:"initEvents",value:function(){var t=this;if(!this.hasInitEvents&&null!=this.canvas){this.canvas.addEventListener("mousemove",this,function(e,n){if(t.disabled)t.hovered=!1,t.clicked=!1,t.tooltip&&t.tooltip.disable();else{var i=t.getMousePos(e);if(t.moving=!1,t.clicked){var r=t.moveEventStartX-i.x,o=t.moveEventStartY-i.y;t.offsetMoveX+=r,t.offsetMoveY+=o,t.reactor&&t.reactor.dispatchEvent("onMove",r,o,i),t.moveEventStartX=i.x,t.moveEventStartY=i.y,t.movable&&(t.moving=!0)}n?(t.reactor&&!t.disabled&&t.reactor.dispatchEvent("onHover",i),t.tooltip&&(t.tooltip.x=i.x+10,t.tooltip.y=i.y+10,t.tooltip.enable()),t.hovered=!0):(t.hovered=!1,t.tooltip&&t.tooltip.disable())}}),this.canvas.addEventListener("click",this,function(e,n){if(t.disabled)t.hovered=!1,t.clicked=!1;else{var i=t.getMousePos(e);n&&t.hovered?t.moving?t.moving=!1:(t.reactor&&t.reactor.dispatchEvent("onClick",i),t.selected=!0):(t.clicked=!1,t.selected=!1)}}),this.canvas.addEventListener("mousedown",this,function(e,n){if(t.disabled)t.hovered=!1,t.clicked=!1;else{var i=t.getMousePos(e);n&&!t.moving&&(t.reactor&&t.reactor.dispatchEvent("onDown",i),t.clicked=!0,t.moveEventStartX=i.x,t.moveEventStartY=i.y)}}),this.canvas.addEventListener("mouseup",this,function(e){if(!t.disabled){var n=t.getMousePos(e);t.reactor&&t.reactor.dispatchEvent("onUp",n),t.clicked=!1}}),this.canvas.addEventListener("wheel",this,function(e){!t.hovered||t.disabled||t.scrollDisabled||(t.offsetScrollX+=e.deltaX,t.offsetScrollY+=e.deltaY,t.reactor&&t.reactor.dispatchEvent("onScroll",e.deltaX,e.deltaY))});var e=function(e,n){var i=e.changedTouches[0],r=t.getMousePos(i);n?(t.hovered=!0,t.selected=!0):(t.hovered=!1,t.selected=!1),t.hovered&&!t.disabled&&(t.touchEventStartX=r.x,t.touchEventStartY=r.y,t.touchEventStartTimestamp=e.timestamp)};this.canvas.addEventListener("touchstart",this,e),this.canvas.addEventListener("touchend",this,e),this.canvas.addEventListener("touchmove",this,function(e){!function(e){var n=e.changedTouches[0],i=t.getMousePos(n);if(t.hovered&&!t.disabled&&!t.scrollDisabled){var r=t.touchEventStartX-i.x,o=t.touchEventStartY-i.y;t.offsetScrollX+=r,t.offsetScrollY+=o,t.reactor&&t.reactor.dispatchEvent("onScroll",r,o,i),t.touchEventStartX=i.x,t.touchEventStartY=i.y}}(e),e.preventDefault()}),this.hasInitEvents=!0}}},{key:"draw",value:function(t){this.hidden||(this.initEvents(),this.disabled?(this.selected=!1,this.clicked=!1,this.hovered=!1,this.tooltip&&(this.tooltip.disabled=!0)):this.movable&&this.hovered&&(this.canvas.cursor="grab"))}},{key:"getMousePos",value:function(t){return this.canvas.getMousePos(t)}},{key:"isInside",value:function(t){return t.x>this.x&&t.x<this.x+this.width&&t.y<this.y+this.height&&t.y>this.y}},{key:"disable",value:function(){return this.disabled=!0,!0}},{key:"enable",value:function(){return this.disabled=!1,!0}},{key:"disabled",get:function(){return w(I,this)||this.parent&&this.parent.disabled},set:function(t){t!=w(I,this)&&(S(I,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"setClickAction",value:function(t){this.removeAllClickActions(),this.addClickAction(t)}},{key:"addClickAction",value:function(t){this.reactor.addEventListener("onClick",t)}},{key:"removeClickAction",value:function(t){this.reactor.removeEventListener("onClick",t)}},{key:"removeAllClickActions",value:function(){this.reactor.removeAllEventListener("onClick")}},{key:"setHoverAction",value:function(t){this.removeAllHoverActions(),this.addHoverAction(t)}},{key:"addHoverAction",value:function(t){this.reactor.addEventListener("onHover",t)}},{key:"removeHoverAction",value:function(t){this.reactor.removeEventListener("onHover",t)}},{key:"removeAllHoverActions",value:function(){this.reactor.removeAllEventListener("onHover")}},{key:"setDownAction",value:function(t){this.removeAllDownActions(),this.addDownAction(t)}},{key:"addDownAction",value:function(t){this.reactor.addEventListener("onDown",t)}},{key:"removeDownAction",value:function(t){this.reactor.removeEventListener("onDown",t)}},{key:"removeAllDownActions",value:function(){this.reactor.removeAllEventListener("onDown")}},{key:"setScrollAction",value:function(t){this.removeAllScrollActions(),this.addScrollAction(t)}},{key:"addScrollAction",value:function(t){this.reactor.addEventListener("onScroll",t)}},{key:"removeScrollAction",value:function(t){this.reactor.removeEventListener("onScroll",t)}},{key:"removeAllScrollActions",value:function(){this.reactor.removeAllEventListener("onScroll")}},{key:"setMoveAction",value:function(t){this.removeAllMoveActions(),this.addMoveAction(t)}},{key:"addMoveAction",value:function(t){this.reactor.addEventListener("onMove",t)}},{key:"removeMoveAction",value:function(t){this.reactor.removeEventListener("onMove",t)}},{key:"removeAllMoveActions",value:function(){this.reactor.removeAllEventListener("onMove")}},{key:"setChangeAction",value:function(t){this.removeAllChangeActions(),this.addChangeAction(t)}},{key:"addChangeAction",value:function(t){this.reactor.addEventListener("onChange",t)}},{key:"removeChangeAction",value:function(t){this.reactor.removeEventListener("onChange",t)}},{key:"removeAllChangeActions",value:function(){this.reactor.removeAllEventListener("onChange")}},{key:"setUpAction",value:function(t){this.removeAllUpActions(),this.addUpAction(t)}},{key:"addUpAction",value:function(t){this.reactor.addEventListener("onUp",t)}},{key:"removeUpAction",value:function(t){this.reactor.removeEventListener("onUp",t)}},{key:"removeAllUpActions",value:function(){this.reactor.removeAllEventListener("onUp")}},{key:"height",get:function(){return w(k,this)},set:function(t){t!=w(k,this)&&(S(k,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"width",get:function(){return w(T,this)},set:function(t){t!=w(T,this)&&(S(T,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"innerWidth",get:function(){return this.width}},{key:"innerHeight",get:function(){return this.height}},{key:"minWidth",get:function(){return this.width}},{key:"minHeight",get:function(){return this.height}},{key:"x",get:function(){var t=this.parent||this.canvas;if(this.style.alignement&&t){var e=t.width,i=t.style&&t.style.padding||0;if(this.style.alignement==n.Alignement.CENTER)return t.x+e/2-this.width/2+this.deltaX;if(this.style.alignement==n.Alignement.RIGHT)return t.x+e-this.width-i+this.deltaX;if(this.style.alignement==n.Alignement.LEFT)return t.x+i+this.deltaX}else if(t)return t.x+w(L,this)+this.deltaX;return w(L,this)+this.deltaX},set:function(t){S(L,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"y",get:function(){var t=this.parent||this.canvas;if(this.style.verticalAlignement&&t){var e=t.height,i=t.style&&t.style.padding||0;if(this.style.verticalAlignement==n.VerticalAlignement.BOTTOM)return t.y+e-this.height-i+this.deltaY;if(this.style.verticalAlignement==n.VerticalAlignement.CENTER)return t.y+e/2-this.height/2+this.deltaY;if(this.style.verticalAlignement==n.VerticalAlignement.TOP)return t.y+i+this.deltaY}else if(t)return t.y+w(_,this)+this.deltaY;return w(_,this)+this.deltaY},set:function(t){S(_,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"defaultStyle",get:function(){return new y({padding:n.Setting.DEFAULT_PADDING,spaceBetweenComponents:n.Setting.DEFAULT_SPACING})}},{key:"style",get:function(){return w(R,this)||this.defaultStyle},set:function(t){S(R,this,new y),w(R,this).setAll(this.defaultStyle.getStyles()),t&&t instanceof y&&w(R,this).setAll(t.getStyles()),w(R,this).component=this,this.reactor&&this.reactor.dispatchEvent("onChange",this)}},{key:"hidden",get:function(){return this.style&&this.style.hidden},set:function(t){t==this.disabled&&t==this.style.hidden||(this.disabled=t,this.style&&this.style.set("hidden",t),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"selected",get:function(){return w(b,this)},set:function(t){t!=w(b,this)&&(S(b,this,t),this.reactor&&this.reactor.dispatchEvent("onChange",this))}},{key:"getAllParents",value:function(){for(var t=this.parent,e=[];t;)e.push(t),t=t.parent;return e}},{key:"compareTo",value:function(t){var e=this.style&&this.style.foreground,n=t.style&&t.style.foreground,i=this.style&&this.style.zIndex,r=t.style&&t.style.zIndex;return this.parent==t?1:t.parent==this?-1:e&&!n?1:!e&&n?-1:i>r?1:i<r?-1:t.compareToComponent(this)||-this.compareToComponent(t)}},{key:"compareToComponent",value:function(t){return 0}},{key:"compareToMenu",value:function(t){return-1}},{key:"compareToTooltip",value:function(t){return-1}},{key:"compareToNotification",value:function(t){return-1}},{key:"compareToScrollbar",value:function(t){return-1}}],[{key:"compareComponents",value:function(t,e){return t.compareTo(e)}}])}();function D(t,e,n,i){return D="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var r,o=c(t,e);if(o){if((r=Object.getOwnPropertyDescriptor(o,e)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,e)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,e,r)}else v(i,e,n);return!0},D(t,e,n,i)}function x(t,e,n,i,r){if(!D(t,e,n,i||t)&&r)throw new TypeError("failed to set property");return n}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(N=function(){return!!t})()}var F=function(t){function e(t,n,r,o,s){var a,c,u,f;return i(this,e),c=this,f=[t,n,r,o,s],u=l(u=e),v(a=h(c,N()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!1),a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){var n,i,r;(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]);var o=t.canvas.getContext("2d");o.save(),this.drawBackground(o),this.drawBorder(o),o.restore()}}},{key:"drawBackground",value:function(t){var e=this.backgroundColor;e&&(t.save(),t.fillStyle=e,t.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),t.restore())}},{key:"backgroundColor",get:function(){return this.hovered&&this.clicked&&null!=this.style.backgroundColorDown?this.style.backgroundColorDown:this.hovered&&null!=this.style.backgroundColorHover?this.style.backgroundColorHover:this.style.backgroundColor}},{key:"drawBorder",value:function(t){var e=this.borderColor;e&&this.style.borderSize>0&&(t.save(),t.strokeStyle=e,t.lineWidth=this.style.borderSize,t.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width-this.style.borderSize/2),Math.round(this.height-this.style.borderSize/2)),t.restore())}},{key:"borderColor",get:function(){return this.clicked&&this.hovered&&null!=this.style.borderColorDown?this.style.borderColorDown:!this.clicked&&this.hovered&&null!=this.style.borderColorHover?this.style.borderColorHover:this.selectable&&this.selected&&null!=this.style.borderColorSelected?this.style.borderColorSelected:this.style.borderColor}}])}(O);function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(B=function(){return!!t})()}var U=function(t){function e(t,r,o){var s,a,c,u;return i(this,e),a=this,u=[null,null,null,null,r],c=l(c=e),v(s=h(a,B()?Reflect.construct(c,u||[],l(a).constructor):c.apply(a,u)),"selectable",!0),s.parent=o,s.size=t||n.Setting.SCROLLBAR_DEFAULT_SIZE,s}return d(e,t),a(e,[{key:"draw",value:function(t){var n,i,r;this.hidden||(this.clicked&&(this.hovered=!0),(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]))}},{key:"maxWidthParent",get:function(){return this.parent?this.parent.maxWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"maxHeightParent",get:function(){return this.parent?this.parent.maxHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"innerWidthParent",get:function(){return this.parent?this.parent.innerWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"innerHeightParent",get:function(){return this.parent?this.parent.innerHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}},{key:"contentRatioX",get:function(){return this.parent?this.maxWidthParent/this.innerWidthParent:0}},{key:"contentRatioY",get:function(){return this.parent?this.maxHeightParent/this.innerHeightParent:0}},{key:"width",get:function(){return this.maxWidthParent*this.contentRatioX}},{key:"height",get:function(){return this.maxHeightParent*this.contentRatioY}},{key:"windowScrollSizeX",get:function(){return this.innerWidthParent-this.maxWidthParent}},{key:"windowScrollSizeY",get:function(){return this.innerHeightParent-this.maxHeightParent}},{key:"percentScrollbarX",get:function(){return this.parent?this.parent.offsetScrollX/this.windowScrollSizeX:0}},{key:"percentScrollbarY",get:function(){return this.parent?this.parent.offsetScrollY/this.windowScrollSizeY:0}},{key:"scrollAreaSizeX",get:function(){return this.maxWidthParent-this.width}},{key:"scrollAreaSizeY",get:function(){return this.maxHeightParent-this.height}},{key:"x",get:function(){return this.parent?Math.abs(this.parent.x)+this.scrollAreaSizeX*this.percentScrollbarX:0}},{key:"y",get:function(){return this.parent?Math.abs(this.parent.y)+this.scrollAreaSizeY*this.percentScrollbarY:0}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.SCROLLBAR_DEFAULT_BACKGROUND,backgroundColorHover:n.Setting.SCROLLBAR_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:n.Setting.SCROLLBAR_DEFAULT_CLICK_BACKGROUND,borderSize:0})}},{key:"compareToComponent",value:function(t){return t.compareToScrollbar(this)}},{key:"compareToScrollbar",value:function(t){return 0}}])}(F);function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(M=function(){return!!t})()}var P=function(t){function e(t,n,r){var o,s,a,c;return i(this,e),s=this,c=[t,n,r],a=l(a=e),v(o=h(s,M()?Reflect.construct(a,c||[],l(s).constructor):a.apply(s,c)),"selectable",!0),o.addMoveAction(function(t){if(o.parent){var e=Math.abs((o.parent.x-Math.max(o.parent.x,o.x+-t))/(o.parent.width-o.width)),n=o.windowScrollSizeX*e-o.parent.offsetScrollX;o.parent.offsetScrollX+=n,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",n,0)}}),o}return d(e,t),a(e,[{key:"draw",value:function(t){var n,i,r;this.scrollAreaSizeX>0&&(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t])}},{key:"height",get:function(){return this.size}},{key:"y",get:function(){return this.parent?this.parent.y+this.parent.height-this.size:null}}])}(U);function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(z=function(){return!!t})()}var W=function(t){function e(t,n,r){var o,s,a,c;return i(this,e),s=this,c=[t,n,r],a=l(a=e),v(o=h(s,z()?Reflect.construct(a,c||[],l(s).constructor):a.apply(s,c)),"selectable",!0),o.addMoveAction(function(t,e){if(o.parent){var n=Math.abs((o.parent.y-Math.max(o.parent.y,o.y+-e))/(o.parent.height-o.height)),i=o.windowScrollSizeY*n-o.parent.offsetScrollY;o.parent.offsetScrollY+=i,o.parent.reactor&&o.parent.reactor.dispatchEvent("onScroll",0,i)}}),o}return d(e,t),a(e,[{key:"draw",value:function(t){var n,i,r;this.scrollAreaSizeY>0&&(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t])}},{key:"width",get:function(){return this.size}},{key:"x",get:function(){return this.parent?this.parent.x+this.parent.width-this.size:0}}])}(U);const H={preRenderedFont:{},lastKey:-1,preRenderFont:function(t,e,n,i){t.push("?"),t.push(" "),t.push("A");for(var r=0;r<t.length;r++){var o=document.createElement("canvas"),s=o.getContext("2d");s.font=e+"px "+i;var a=s.measureText(t[r]).width;o.width=a,o.height=e+e/6,s.font=e+"px "+i,s.fillStyle=n,s.textBaseline="top",s.fillText(t[r],0,0),this.preRenderedFont[t[r]]=o}},drawImage:function(t,e,n,i,r,o,s,a,h,l,c,u){this.drawImageWrapper(t,e,n,i,r,o,s,a,h,l,c,u)},drawImageData:function(t,e,n,i,r,o,s,a,h,l,c,u){this.drawImageWrapper(t,e,n,i,r,o,s,a,h,l,c,u)},drawImageWrapper:function(t,e,n,i,r,o,s,a,h,l,c,u){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),s=null==s||isNaN(s)?null:Math.round(s),a=null==a||isNaN(a)?null:Math.round(a),h=null==h||isNaN(h)?null:Math.round(h),l=null==l||isNaN(l)?null:Math.round(l),c=null!=c&&c,null!=(u=null==u||isNaN(u)?null:u)&&(t.save(),t.translate(n+r/2,i+o/2),t.rotate(u*Math.PI/180),n=-r/2,i=-o/2),c&&t.clearRect(n,i,r,o),null!=t&&null!=e&&e.width>0&&e.height>0&&(null!=s&&null!=a&&null!=h&&null!=l?t.drawImage(e,s,a,h,l,n,i,r,o):t.drawImage(e,n,i,r,o)),null!=u&&t.restore()},drawText:function(t,e,i,r,o,s,a,h,l,c,u,f,d,v){if(t){t.save(),Array.isArray(i)||(t.fillStyle=i,t.strokeStyle=i),t.font=(u?"bold ":"")+r+"px "+o,t.textBaseline=d||"bottom",t.filter="none",c&&(e=this.wrapTextLines(t,e).text);var g=e.split("\n"),p=0,y=Math.round(h),m=Math.round(l)+r,E=0;l||(a==n.VerticalAlignement.CENTER?m+=Math.round((v&&v.height?v.height:this.getCanvasHeight(t.canvas))/2-r*g.length/2):a==n.VerticalAlignement.BOTTOM&&(m+=Math.round((v&&v.height?v.height:this.getCanvasHeight(t.canvas))-r*g.length/2-r/5)));for(var C=0;C<g.length;C++){var w=g[C],S=t.measureText(w).width;if(Array.isArray(i)){var A=C;A>i.length-1&&(A=i.length-1),t.fillStyle=i[A],t.strokeStyle=i[A]}s==n.Alignement.CENTER?y=Math.round(v&&v.x?v.x:0)+Math.round((v&&v.width?v.width:this.getCanvasWidth(t.canvas))/2-t.measureText(w).width/2):s==n.Alignement.RIGHT&&(y=Math.round(v&&v.x?v.x:0)+Math.round((v&&v.width?v.width:this.getCanvasWidth(t.canvas))-t.measureText(w).width-(v&&v.spaceBetweenComponents?v.spaceBetweenComponents:n.Setting.DEFAULT_SPACING))),t.fillText(w,y,m),f&&(t.lineWidth=1,t.beginPath(),t.moveTo(y,m-2),t.lineTo(Math.round(y+S),m-2),t.stroke()),S>p&&(p=S),0==C&&(E=m),m+=r}return t.restore(),{x:y,y:E,height:r*g.length,width:p}}},wrapText:function(t,e){if(t.length>e){for(var n=e;n>0&&" "!=t[n];n--);if(n>0){var i=t.substring(0,n),r=t.substring(n+1);return i+"\n"+this.wrapText(r,e)}}return t},wrapTextLines:function(t,e,n,i,r,o){if(t&&e){t.save(),t.font=Math.round(i)+"px "+r,t.imageSmoothingEnabled=!1;for(var s=e.split("\n"),a="",h=n||t.measureText("A").width,l=Math.round(this.getCanvasWidth(t.canvas)/h),c=0,u=0,f=0;f<s.length;f++){var d=o?s[f]:this.wrapText(s[f],l);a+=d,f<s.length-1&&(a+="\n");for(var v=0;v<d.split("\n").length;v++){var g=t.measureText(d.split("\n")[v]).width;c+=i,g>u&&(u=g)}}return t.restore(),{text:a,height:c,width:u,carWidth:h}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(t,e,i,r,o,s,a,h,l){t.save(),t.lineCap=l||n.Setting.ARROW_DEFAULT_LINE_CAP,t.lineWidth=s||n.Setting.ARROW_DEFAULT_LINE_SIZE,t.strokeStyle=h||n.Setting.ARROW_DEFAULT_COLOR,t.filter="",t.beginPath();var c=a||n.Setting.ARROW_DEFAULT_HEAD_SIZE,u=r-e,f=o-i,d=Math.atan2(f,u);t.moveTo(e,i),t.lineTo(r,o),t.moveTo(r,o),t.lineTo(r-c*Math.cos(d-Math.PI/6),o-c*Math.sin(d-Math.PI/6)),t.moveTo(r,o),t.lineTo(r-c*Math.cos(d+Math.PI/6),o-c*Math.sin(d+Math.PI/6)),t.stroke(),t.restore()},drawCross:function(t,e,i,r,o,s,a,h){t.save(),t.lineCap=h||n.Setting.CROSS_DEFAULT_LINE_CAP,t.lineWidth=s||n.Setting.CROSS_DEFAULT_LINE_SIZE,t.strokeStyle=a||n.Setting.CROSS_DEFAULT_COLOR,t.filter="",t.beginPath(),t.moveTo(e,i),t.lineTo(e+r,i+o),t.moveTo(e+r,i),t.lineTo(e,i+o),t.stroke(),t.restore()},drawTriangle:function(t,e,i,r,o,s,a,h){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.Setting.TRIANGLE_DEFAULT_FILL,c=arguments.length>9?arguments[9]:void 0;t.save(),t.lineCap=h||n.Setting.TRIANGLE_DEFAULT_LINE_CAP,t.lineWidth=s||n.Setting.TRIANGLE_DEFAULT_LINE_SIZE,t.filter="",l?(t.fillStyle=c||n.Setting.TRIANGLE_DEFAULT_FILL_COLOR,t.strokeStyle=a||n.Setting.TRIANGLE_DEFAULT_COLOR):t.strokeStyle=a||n.Setting.TRIANGLE_DEFAULT_COLOR,t.beginPath(),t.moveTo(e,i),t.lineTo(e+r,i),t.lineTo(e+r/2,i+o),t.lineTo(e,i),l?(t.fill(),t.stroke()):t.stroke(),t.restore()},drawCircle:function(t,e,i,r,o,s,a){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:n.Setting.CIRCLE_DEFAULT_FILL,l=arguments.length>8?arguments[8]:void 0;t.save(),t.lineCap=a||n.Setting.CIRCLE_DEFAULT_LINE_CAP,t.lineWidth=o||n.Setting.CIRCLE_DEFAULT_LINE_SIZE,t.filter="",h?(t.fillStyle=l||n.Setting.CIRCLE_DEFAULT_FILL_COLOR,t.strokeStyle=s||n.Setting.CIRCLE_DEFAULT_COLOR):t.strokeStyle=s||n.Setting.CIRCLE_DEFAULT_COLOR,t.beginPath(),t.arc(e+r/2,i+r/2,r/2,0,2*Math.PI,!1),h?(t.fill(),t.stroke()):t.stroke(),t.restore()},clear:function(t){t.clearRect(0,0,this.getCanvasWidth(t.canvas),this.getCanvasHeight(t.canvas))},isFilterHueAvailable:function(){var t=document.createElement("canvas");t.width=5,t.height=5;var e=t.getContext("2d");e.save(),e.fillStyle="#FF0000",e.filter="hue-rotate(90deg)",e.fillRect(0,0,5,5);var n=e.getImageData(0,0,1,1).data;return e.restore(),255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(t,e){t.save(),t.filter="blur("+e+"px)",this.drawImageData(t,t.canvas,0,0,this.getCanvasWidth(t.canvas),this.getCanvasHeight(t.canvas)),t.restore()},parseNumber:function(t){return t?parseInt(t.match(/\d+/),10):0},getFontSize:function(t){return Math.floor(this.parseNumber(t.font)/1.25)},getCanvasWidth:function(t){return this.parseNumber(t.style.width)||t.width},getCanvasHeight:function(t){return this.parseNumber(t.style.height)||t.height},autoDPI:function(t){var e=t.getBoundingClientRect();t.width=e.width*n.Setting.PIXEL_RATIO,t.height=e.height*n.Setting.PIXEL_RATIO,t.style.width=e.width+"px",t.style.height=e.height+"px"},autoResizeCanvas:function(t,e,n,i){if(document.fullscreenElement)document.fullscreenElement==t||document.fullscreenElement==e?(t.width=window.innerWidth,t.height=window.innerHeight,t.style&&(t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px"),e&&(e.width=window.innerWidth,e.height=window.innerHeight)):(t.width=n,t.height=i,t.style&&(t.style.width=n+"px",t.style.height=i+"px"));else if(n>=.85*document.documentElement.clientWidth){var r=n/i;t.width=.85*document.documentElement.clientWidth,t.height=t.width/r,t.style&&(t.style.width=t.width+"px",t.style.height=t.height+"px")}else t.width=n,t.height=i,t.style&&(t.style.width=n+"px",t.style.height=i+"px")},enableAutoResizeCanvas:function(t,e,n,i){var r=this;t&&"true"!=t.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(t,e,n,i),window.addEventListener("resize",function(){t.setAttribute("autoresize-canvas-event","true"),r.autoResizeCanvas(t,e,n,i)}))},autoResizeCanvasFullscreen:function(t,e){document.fullscreenElement!=t&&document.fullscreenElement!=e||(t.width=window.innerWidth,t.height=window.innerHeight,t.style&&(t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px"),e&&(e.width=window.innerWidth,e.height=window.innerHeight))},enableAutoResizeCanvasFullscreen:function(t,e){var n=this;t&&"true"!=t.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(t,e),window.addEventListener("resize",function(){t.setAttribute("autoresizefullscreen-canvas-event","true"),n.autoResizeCanvasFullscreen(t,e)}))},autoResizeCanvasFullpage:function(t,e){t&&"true"==t.getAttribute("fullpage-canvas-enable")&&(t.width=window.innerWidth,t.height=window.innerHeight,t.style&&(t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px"),e&&(e.width=window.innerWidth,e.height=window.innerHeight,e.style.margin=0,e.style.padding=0),document.body.style.margin=0,document.body.style.padding=0)},enableAutoResizeCanvasFullpage:function(t,e){var n=this;t&&"true"!=t.getAttribute("autoresizefullpage-canvas-event")&&(this.autoResizeCanvasFullpage(t,e),window.addEventListener("resize",function(){t.setAttribute("autoresizefullpage-canvas-event","true"),n.autoResizeCanvasFullpage(t,e)}))},toggleFullscreen:function(t,e){if(t){var n=t.width,i=t.height;if(e&&(e.width=n,e.height=i),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(e||t).requestFullscreen?(e||t).requestFullscreen():(e||t).mozRequestFullScreen?(e||t).mozRequestFullScreen():(e||t).webkitRequestFullscreen?(e||t).webkitRequestFullscreen():(e||t).msRequestFullscreen?(e||t).msRequestFullscreen():(e||t).oRequestFullscreen&&(e||t).oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(t,e),"true"!=t.getAttribute("fullscreenchange-canvas-event")){t.setAttribute("fullscreenchange-canvas-event","true");var r=function(){document.fullscreenElement!=(e||t)&&(t.width=n,t.height=i,e&&(e.width=n,e.height=i))};void 0!==document.onfullscreenchange?document.onfullscreenchange=r:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=r:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=r:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=r:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=r)}}},toggleFullpage:function(t,e){if(t){var n=t.width,i=t.height;e&&(e.width=n,e.height=i),t.getAttribute("fullpage-canvas-enable")&&"false"!=t.getAttribute("fullpage-canvas-enable")?t.setAttribute("fullpage-canvas-enable","false"):t.setAttribute("fullpage-canvas-enable","true"),this.enableAutoResizeCanvasFullpage(t,e)}},getMousePos:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}};function X(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(X=function(){return!!t})()}function G(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function K(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Y(t,e){return t.get(V(t,e))}function j(t,e,n){return t.set(V(t,e),n),n}function V(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Z=new WeakMap,q=new WeakMap,J=new WeakMap,Q=new WeakMap,$=new WeakMap,tt=function(t){function e(t,r,o,s,a){var c,u,f,d,g;i(this,e),f=this,g=[t,r,null,null,a],d=l(d=e),v(u=h(f,X()?Reflect.construct(d,g||[],l(f).constructor):d.apply(f,g)),"selectable",!1),K(u,Z,[]),K(u,q,0),K(u,J,0),K(u,Q,0),K(u,$,0),v(u,"eventChangeCallback",function(){return u.reactor.dispatchEvent("onChange",u)});for(var p=arguments.length,y=new Array(p>5?p-5:0),m=5;m<p;m++)y[m-5]=arguments[m];return(c=u).addAll.apply(c,y),u.canvasTmp=document.createElement("canvas"),j(q,u,o),j(J,u,s),u.scrollbarHorizontal=new P(null,null,u),u.scrollbarVertical=new W(null,null,u),u.addScrollAction(function(t,e){return u.controlScrolling(t,e)}),n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||u.addChangeAction(function(t){t==u.parent&&u.components.forEach(function(t){return t&&t.reactor.dispatchEvent("onChange",u)})}),u}return d(e,t),a(e,[{key:"draw",value:function(t){var i=this;if(!this.hidden){var r=t.canvas,o=r.getContext("2d");if(o.save(),this.isCutting){var s=this.canvasTmp.getContext("2d");this.canvasTmp.width=H.getCanvasWidth(r)*n.Setting.PIXEL_RATIO,this.canvasTmp.height=H.getCanvasHeight(r)*n.Setting.PIXEL_RATIO,this.canvasTmp.style.width=H.getCanvasWidth(r),this.canvasTmp.style.height=H.getCanvasHeight(r),H.clear(s)}this.components.forEach(function(t){i.canvas&&(t.canvas=i.canvas)}),this.controlScrolling(0,0),G(e,"draw",this,3)([t]),o.restore()}}},{key:"drawVerticalScrollBar",value:function(t){this.scrollbarVertical&&(this.scrollbarVertical.canvas=this.canvas,this.scrollbarVertical.draw(t))}},{key:"drawHorizontalScrollBar",value:function(t){this.scrollbarHorizontal&&(this.scrollbarHorizontal.canvas=this.canvas,this.scrollbarHorizontal.draw(t))}},{key:"drawScrollbars",value:function(t){this.style.scrollXDisabled||this.drawHorizontalScrollBar(t),this.style.scrollYDisabled||this.drawVerticalScrollBar(t)}},{key:"set",value:function(){for(var t=this,e=!1,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.length==this.components.length?i.forEach(function(n,i){t.components[i]!=n&&(e=!0)}):e=!0,e&&(this.clear(),this.addAll.apply(this,i))}},{key:"add",value:function(t){Y(Z,this).push(t),t.parent=this,this.canvas&&(t.canvas=this.canvas),t.addChangeAction(this.eventChangeCallback),this.reactor.dispatchEvent("onChange",this)}},{key:"addAll",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(e){return t.add(e)})}},{key:"remove",value:function(t){-1!=Y(Z,this).indexOf(t)&&(t.removeChangeAction(this.eventChangeCallback),j(Z,this,Y(Z,this).filter(function(e){return t!=e})),this.reactor.dispatchEvent("onChange",this))}},{key:"clear",value:function(){var t=this;Y(Z,this).forEach(function(e){return t.remove(e)}),this.reactor.dispatchEvent("onChange",this)}},{key:"components",get:function(){var t=[];return Y(Z,this).forEach(function(e){return t.push(e)}),t}},{key:"allComponents",get:function(){var t=this.components;return t.push(this.scrollbarHorizontal),t.push(this.scrollbarVertical),t}},{key:"getComponentsTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n={component:e,childs:[]};return e.allComponents&&e.allComponents.forEach(function(e){return n.childs.push(t.getComponentsTree(e))}),n}},{key:"disable",value:function(){var t=G(e,"disable",this,3)([]);Y(Z,this).forEach(function(e){e&&e.disable&&e.disable()&&(t=!0)}),t&&this.reactor.dispatchEvent("onChange",this)}},{key:"enable",value:function(){var t=G(e,"enable",this,3)([]);Y(Z,this).forEach(function(e){e&&e.enable&&e.enable()&&(t=!0)}),t&&this.reactor.dispatchEvent("onChange",this)}},{key:"width",get:function(){var t=this.parent&&this.parent.width,e=null!=this.maxWidth?Math.min(this.maxWidth,t):null;return null!=this.minWidth?Math.max(this.minWidth,null!=e?e:t):t}},{key:"height",get:function(){var t=this.parent&&this.parent.height,e=null!=this.maxWidth?Math.min(this.maxHeight,t):null;return null!=this.minHeight?Math.max(this.minHeight,null!=e?e:t):t}},{key:"maxWidth",get:function(){return Y(q,this)},set:function(t){t!=Y(q,this)&&(j(q,this,t),this.reactor.dispatchEvent("onChange",this))}},{key:"maxHeight",get:function(){return Y(J,this)},set:function(t){t!=Y(J,this)&&(j(J,this,t),this.reactor.dispatchEvent("onChange",this))}},{key:"minWidth",get:function(){return Y(Q,this)},set:function(t){t!=Y(Q,this)&&(j(Q,this,t),this.reactor.dispatchEvent("onChange",this))}},{key:"minHeight",get:function(){return Y($,this)},set:function(t){t!=Y($,this)&&(j($,this,t),this.reactor.dispatchEvent("onChange",this))}},{key:"updateInnerHeight",value:function(){}},{key:"updateInnerWidth",value:function(){}},{key:"canvas",get:function(){return G(e,"canvas",this,1)},set:function(t){var n,i=this;t!=this.canvas&&(n=t,x(l(e.prototype),"canvas",n,this,1),Y(Z,this).forEach(function(e){e.canvas=t,e.reactor&&e.reactor.dispatchEvent("onChange",i)}),this.reactor.dispatchEvent("onChange",this))}},{key:"getComponentId",value:function(t){var e=null;return Y(Z,this).forEach(function(n,i){n==t&&(e=i)}),e}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.width}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.height}},{key:"controlScrolling",value:function(t,e){if(this.style.scrollYDisabled)this.offsetScrollY-=e;else if(this.scrollAreaSizeY<=0)this.offsetScrollY=0;else{var n=this.offsetScrollY/this.scrollAreaSizeY;n<=0&&e<=0?this.offsetScrollY=Math.min(0,this.y):n>1&&e>=0&&(this.offsetScrollY=this.scrollAreaSizeY)}if(this.style.scrollXDisabled)this.offsetScrollX-=t;else if(this.scrollAreaSizeX<=0)this.offsetScrollX=0;else{var i=this.offsetScrollX/this.scrollAreaSizeX;i<=0&&t<=0?this.offsetScrollX=Math.min(0,this.x):i>1&&t>=0&&(this.offsetScrollX=this.scrollAreaSizeX)}}},{key:"isComponentVisible",value:function(t){if(n.Setting.DISABLE_OPTIMIZATIONS)return!0;if(t instanceof O&&!t.hidden){if(!n.Setting.DISABLE_IS_COMPONENT_VISIBLE_OPTIMIZATIONS&&this.parent&&this.parent.isComponentVisible&&!this.parent.isComponentVisible(t))return!1;var e=this.width,i=this.height,r=t.width,o=t.height,s=this.canvas&&this.canvas.width||e,a=this.canvas&&this.canvas.height||i;if(t.x+r>=this.x&&t.x<=this.x+e&&t.y+o>=this.y&&t.y<=this.y+i&&t.x+r>=0&&t.x<=s&&t.y+o>=0&&t.y<=a)return!0}return!1}},{key:"isCutting",get:function(){return!n.Setting.DISABLE_CONTAINERS_CUTTING&&(this.maxWidth&&this.innerWidth>this.maxWidth||this.maxHeight&&this.innerHeight>this.maxHeight)&&null!=this.canvasTmp}},{key:"defaultStyle",get:function(){return new y({padding:0,spaceBetweenComponents:n.Setting.DEFAULT_SPACING})}}],[{key:"sortComponentsTree",value:function(t,e){return t.component.compareTo(e.component)}}])}(F);function et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(et=function(){return!!t})()}function nt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function it(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function rt(t,e){return t.get(st(t,e))}function ot(t,e,n){return t.set(st(t,e),n),n}function st(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var at=new WeakMap,ht=new WeakMap,lt=function(t){function e(t,r,o,s,a){var c,u,f,d;i(this,e);for(var g=arguments.length,p=new Array(g>5?g-5:0),y=5;y<g;y++)p[y-5]=arguments[y];return u=this,f=e,d=[t,r,o,s,a].concat(p),f=l(f),v(c=h(u,et()?Reflect.construct(f,d||[],l(u).constructor):f.apply(u,d)),"selectable",!1),it(c,at,0),it(c,ht,0),n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(c.updateInnerWidth(),c.updateInnerHeight(),c.addChangeAction(function(){c.updateInnerWidth(),c.updateInnerHeight()})),c}return d(e,t),a(e,[{key:"draw",value:function(t){var i=this;if(!this.hidden){nt(e,"draw",this,3)([t]);var r=t.canvas.getContext("2d");r.save();var o=r;if(this.isCutting&&(o=this.canvasTmp.getContext("2d")).scale(n.Setting.PIXEL_RATIO,n.Setting.PIXEL_RATIO),null!=nt(e,"components",this,1)){var s=this.style.padding;nt(e,"components",this,1).forEach(function(t){s=i.drawComponent(t,s,o)})}this.isCutting&&H.drawImageData(r,this.canvasTmp,this.x,this.y,this.width,this.height,this.x*n.Setting.PIXEL_RATIO,this.y*n.Setting.PIXEL_RATIO,this.width*n.Setting.PIXEL_RATIO,this.height*n.Setting.PIXEL_RATIO),nt(e,"drawScrollbars",this,3)([r]),r.restore()}}},{key:"drawComponent",value:function(t,e,n){return t instanceof O&&(t.x=e-this.offsetScrollX,t.y=this.style.padding-this.offsetScrollY,t.hidden||(this.isComponentVisible(t)&&t.draw(n),e+=t.width+this.style.spaceBetweenComponents)),e}},{key:"updateInnerHeight",value:function(){var t=0;nt(e,"components",this,1).forEach(function(e){e.height>t&&!e.hidden&&(t=e.height)}),ot(at,this,t+this.style.padding)}},{key:"updateInnerWidth",value:function(){var t=0;nt(e,"components",this,1).forEach(function(e){e.hidden||(t+=e.width)}),ot(ht,this,t+this.style.spaceBetweenComponents*(nt(e,"components",this,1).length-1)+this.style.padding)}},{key:"innerHeight",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),rt(at,this)}},{key:"innerWidth",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),rt(ht,this)}},{key:"width",get:function(){var t=this.innerWidth||this.parent&&this.parent.width,e=null!=this.maxWidth?Math.min(this.maxWidth,t):null;return null!=this.minWidth?Math.max(this.minWidth,null!=e?e:t):null!=e?e:t}},{key:"height",get:function(){var t=this.innerHeight||this.parent&&this.parent.height,e=null!=this.maxHeight?Math.min(this.maxHeight,t):null;return null!=this.minHeight?Math.max(this.minHeight,null!=e?e:t):null!=e?e:t}},{key:"defaultStyle",get:function(){return nt(e,"defaultStyle",this,1)}}])}(tt);function ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ct=function(){return!!t})()}function ut(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var ft=function(t){function e(t,n,r,o,s){var a,c,u,f;i(this,e);for(var d=arguments.length,g=new Array(d>5?d-5:0),p=5;p<d;p++)g[p-5]=arguments[p];return c=this,u=e,f=[t,n,r,o,s].concat(g),u=l(u),v(a=h(c,ct()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!0),a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){ut(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");n.save(),this.drawComponents(n),n.restore()}}},{key:"drawComponents",value:function(t){ut(e,"draw",this,3)([t])}},{key:"height",get:function(){return(this.maxHeight||ut(e,"height",this,1))+this.style.padding}},{key:"width",get:function(){return(this.maxWidth||ut(e,"width",this,1))+this.style.padding}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:n.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:n.Setting.BUTTON_DEFAULT_CLICK_BACKGROUND,scrollXDisabled:!0,scrollYDisabled:!0})}}])}(lt);function dt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(dt=function(){return!!t})()}function vt(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}function gt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var pt=function(t){function e(t,n,r,o,s,a,c){var u,f,d,g;return i(this,e),f=this,g=[n,r,o,s,a],d=l(d=e),v(u=h(f,dt()?Reflect.construct(d,g||[],l(f).constructor):d.apply(f,g)),"selectable",!1),u.image,u.imgSrc,u.imageLoader=c,t instanceof Image?(u.image=t,u.imgSrc=t.src):u.imgSrc=t,u}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){gt(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");n.save(),null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image&&this.drawImage(n),n.restore()}}},{key:"drawImage",value:function(t){H.drawImage(t,this.image,Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"sizes",get:function(){var t=gt(e,"width",this,1),n=gt(e,"height",this,1);if(this.imageLoader&&this.loadImage(this.imageLoader),this.image&&(this.image.width>gt(e,"width",this,1)||this.image.height>gt(e,"height",this,1))){var i=this.image.width/this.image.height;t=Math.floor(gt(e,"width",this,1)/1.25),n=Math.floor(t/i)}return{width:t,height:n}}},{key:"height",get:function(){return this.sizes.height},set:function(t){vt(e,"height",t,this,1,1)}},{key:"width",get:function(){return this.sizes.width},set:function(t){vt(e,"width",t,this,1,1)}},{key:"loadImage",value:function(t){this.image=t.get(this.imgSrc)}}])}(O);function yt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yt=function(){return!!t})()}function mt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function Et(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}var Ct=function(t){function e(t,r,o,s,a,c,u,f,d,v){var g,p,m,E;return i(this,e),p=this,E=[r,o,c,u,new y({alignement:s,verticalAlignement:a,backgroundColor:f||n.Setting.BUTTON_DEFAULT_BACKGROUND,backgroundColorHover:d||n.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND})],m=l(m=e),(g=h(p,yt()?Reflect.construct(m,E||[],l(p).constructor):m.apply(p,E))).image=new pt(t,r,o,c,u,new y({alignement:"center",verticalAlignement:"center"}),v),g.add(g.image),console&&console.warn&&console.warn(n.String.NOTICE_MESSAGE+" "+n.String.BUTTON_IMAGE_DEPRECATED),g}return d(e,t),a(e,[{key:"loadImage",value:function(t){this.components[0]instanceof pt&&this.components[0].loadImage(t)}},{key:"minWidth",get:function(){return mt(e,"minWidth",this,1)},set:function(t){this.image.width=t,Et(e,"minWidth",t,this,1,1)}},{key:"minHeight",get:function(){return mt(e,"minHeight",this,1)},set:function(t){this.image.height=t,Et(e,"minHeight",t,this,1,1)}},{key:"maxWidth",get:function(){return mt(e,"maxWidth",this,1)},set:function(t){this.image.width=t,Et(e,"maxWidth",t,this,1,1)}},{key:"maxHeight",get:function(){return mt(e,"maxHeight",this,1)},set:function(t){this.image.height=t,Et(e,"maxHeight",t,this,1,1)}},{key:"width",get:function(){return mt(e,"width",this,1)},set:function(t){this.minWidth=t,this.maxWidth=t}},{key:"height",get:function(){return mt(e,"height",this,1)},set:function(t){this.minHeight=t,this.maxHeight=t}}])}(ft),wt=function(){return a(function t(){i(this,t),this.images={},this.imagesResized={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0},[{key:"load",value:function(t,e){var n=this;if(this.firstImage&&(this.nbImagesToLoad=t.length,this.firstImage=!1),!(t.length>0))return e();this.loadImage(t[0],function(i){if(1!=i)return n.hasError=!0,e();t.shift(),n.load(t,e)})}},{key:"loadImage",value:function(t,e){var n=this;this.triedLoading++;var i=new Image;i.src=t,i.onload=function(){return null==n.images?e(!1):(n.images[t]=i,n.triedLoading=0,e(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[t]=i),n.triedLoading=0,e(!1);setTimeout(function(){n.loadImage(t,e)},250)}}},{key:"get",value:function(t,e,n){if(null!=this.images&&Object.prototype.hasOwnProperty.call(this.images,t)){var i=this.images[t];if(!e&&!n||i.width==e&&i.height==n)return i;var r=Math.round(e),o=Math.round(n),s=t+"@"+r+"-"+o;if(!Object.prototype.hasOwnProperty.call(this.imagesResized,s)){var a=document.createElement("canvas"),h=a.getContext("2d");a.width=r,a.height=o,H.drawImage(h,i,0,0,r,o,0,0,i.width,i.height),this.imagesResized[s]=a}return this.imagesResized[s]}return null}},{key:"clear",value:function(){this.images=null}}])}();function St(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(St=function(){return!!t})()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Tt(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return At(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(kt=function(){return!!t})()}function Lt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function _t(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function It(t,e){return t.get(Rt(t,e))}function bt(t,e,n){return t.set(Rt(t,e),n),n}function Rt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ot=new WeakMap,Dt=new WeakMap,xt=function(t){function e(t,r,o,s,a){var c,u,f,d;i(this,e);for(var g=arguments.length,p=new Array(g>5?g-5:0),y=5;y<g;y++)p[y-5]=arguments[y];return u=this,f=e,d=[t,r,o,s,a].concat(p),f=l(f),v(c=h(u,kt()?Reflect.construct(f,d||[],l(u).constructor):f.apply(u,d)),"selectable",!1),_t(c,Ot,0),_t(c,Dt,0),n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(c.updateInnerWidth(),c.updateInnerHeight(),c.addChangeAction(function(){c.updateInnerWidth(),c.updateInnerHeight()})),c}return d(e,t),a(e,[{key:"draw",value:function(t){var i=this;if(!this.hidden){Lt(e,"draw",this,3)([t]);var r=t.canvas.getContext("2d");r.save();var o=r;if(this.isCutting&&(o=this.canvasTmp.getContext("2d")).scale(n.Setting.PIXEL_RATIO,n.Setting.PIXEL_RATIO),null!=Lt(e,"components",this,1)){var s=this.style.padding;Lt(e,"components",this,1).forEach(function(t){s=i.drawComponent(t,s,o)})}this.isCutting&&H.drawImageData(r,this.canvasTmp,this.x,this.y,this.width,this.height,this.x*n.Setting.PIXEL_RATIO,this.y*n.Setting.PIXEL_RATIO,this.width*n.Setting.PIXEL_RATIO,this.height*n.Setting.PIXEL_RATIO),Lt(e,"drawScrollbars",this,3)([r]),r.restore()}}},{key:"drawComponent",value:function(t,e,n){return t instanceof O&&(t.x=this.style.padding-this.offsetScrollX,t.y=e-this.offsetScrollY,t.hidden||(this.isComponentVisible(t)&&t.draw(n),e+=t.height+this.style.spaceBetweenComponents)),e}},{key:"updateInnerHeight",value:function(){var t=0;Lt(e,"components",this,1).forEach(function(e){e.hidden||(t+=e.height)}),bt(Ot,this,t+this.style.spaceBetweenComponents*(Lt(e,"components",this,1).length-1)+this.style.padding)}},{key:"updateInnerWidth",value:function(){var t=0;Lt(e,"components",this,1).forEach(function(e){e.width>t&&!e.hidden&&(t=e.width)}),bt(Dt,this,t+this.style.padding)}},{key:"innerHeight",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerHeight(),It(Ot,this)}},{key:"innerWidth",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateInnerWidth(),It(Dt,this)}},{key:"width",get:function(){var t=this.innerWidth||this.parent&&this.parent.width,e=null!=this.maxWidth?Math.min(this.maxWidth,t):null;return null!=this.minWidth?Math.max(this.minWidth,null!=e?e:t):null!=e?e:t}},{key:"height",get:function(){var t=this.innerHeight||this.parent&&this.parent.height,e=null!=this.maxHeight?Math.min(this.maxHeight,t):null;return null!=this.minHeight?Math.max(this.minHeight,null!=e?e:t):null!=e?e:t}},{key:"defaultStyle",get:function(){return Lt(e,"defaultStyle",this,1)}}])}(tt);function Nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Nt=function(){return!!t})()}function Ft(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}function Bt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var Ut=function(t){function e(t,n,r,o,s){var a,c,u,f;return i(this,e),c=this,f=[t,n,r,o,s],u=l(u=e),v(a=h(c,Nt()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!1),a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){Bt(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");H.drawCross(n,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return Bt(e,"width",this,1)+this.style.lineWidth},set:function(t){Ft(e,"width",t,this,1,1)}},{key:"height",get:function(){return Bt(e,"height",this,1)+this.style.lineWidth},set:function(t){Ft(e,"height",t,this,1,1)}},{key:"defaultStyle",get:function(){return new y({lineWidth:n.Setting.CROSS_DEFAULT_LINE_SIZE,color:n.Setting.CROSS_DEFAULT_COLOR,lineCap:n.Setting.CROSS_DEFAULT_LINE_CAP})}}])}(O);function Mt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Mt=function(){return!!t})()}function Pt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function zt(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}var Wt=function(t){function e(t,r,o){var s,a,c,u;i(this,e);for(var f=arguments.length,d=new Array(f>3?f-3:0),g=3;g<f;g++)d[g-3]=arguments[g];return a=this,c=e,u=[0,0,null,null,t].concat(d),c=l(c),v(s=h(a,Mt()?Reflect.construct(c,u||[],l(a).constructor):c.apply(a,u)),"selectable",!1),s.delayBeforeClosing=null==r?5:r,s.timeLastFrame=0,s.animationTime=0,s.closed=!0,s.closing=!1,s.easingFunction=o,s.closeButton=new ft(null,null,null,null,new y({alignement:n.Alignement.RIGHT,verticalAlignement:n.VerticalAlignement.TOP,padding:10}),new Ut(null,null,10,10)),s.add(s.closeButton),s}return d(e,t),a(e,[{key:"draw",value:function(t){var e=this;if(!this.hidden){this.closeButton.canvas=this.canvas;var n=t.canvas.getContext("2d");n.save(),this.init||(this.timeLastFrame=performance.now()),null!=this.closeButton&&this.closeButton.setClickAction(function(){e.close()});var i=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.closing?this.style.disableAnimation?this.animationTime=-1:this.animationTime-=i:this.animationTime+=i,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed?this.disableCloseButton():(this.drawComponents(n),null!=this.closeButton&&(this.closeButton.y=this.y+this.style.padding/2,this.closeButton.draw(n)),this.enableCloseButton()),n.restore(),this.init=!0}}},{key:"offsetY",get:function(){var t=1;return this.style.disableAnimation||(t=this.animationTime/this.style.animationDuration,this.easingFunction&&(t=this.easingFunction(t))),t}},{key:"y",get:function(){var t=this.offsetY;return this.style.verticalAlignement==n.VerticalAlignement.TOP?this.height*(t<=1?t:1)-this.height:this.canvas.scene.height-this.height*(t<=1?t:1)},set:function(t){zt(e,"y",t,this,1,1)}},{key:"drawComponents",value:function(t){Pt(e,"draw",this,3)([t])}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.style.animationDuration)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof ft&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof ft&&this.closeButton.enable()}},{key:"copy",value:function(){return function(t,e,n){if(St())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&f(r,n.prototype),r}(e,[this.style.copy(),this.delayBeforeClosing,this.easingFunction].concat(Tt(this.components)))}},{key:"width",get:function(){return this.canvas&&this.canvas.scene?this.canvas.scene.width:null}},{key:"height",get:function(){return Pt(e,"height",this,1)-(this.closeButton?this.closeButton.height:0)}},{key:"defaultStyle",get:function(){return new y({alignement:n.Alignement.CENTER,backgroundColor:n.Setting.NOTIFICATION_DEFAULT_BACKGROUND,animationDuration:n.Setting.NOTIFICATION_DEFAULT_ANIMATION_DURATION})}},{key:"hidden",get:function(){return Pt(e,"hidden",this,1)||this.closed},set:function(t){zt(e,"hidden",t,this,1,1),t?this.forceClose():this.open()}},{key:"compareToComponent",value:function(t){return t.compareToNotification(this)}},{key:"compareToTooltip",value:function(t){return-1}},{key:"compareToNotification",value:function(t){return 0}},{key:"compareToMenu",value:function(t){return-1}}])}(xt);function Ht(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ht=function(){return!!t})()}function Xt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var Gt=function(t){function e(t){var n,r,o,s;i(this,e);for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return r=this,o=e,s=[0,0,null,null,t].concat(c),o=l(o),v(n=h(r,Ht()?Reflect.construct(o,s||[],l(r).constructor):o.apply(r,s)),"selectable",!1),n.lastKey=null==n.lastKey?-1:n.lastKey,n.selectedComponent=null==n.selectedComponent?0:n.selectedComponent,n.disable(),n}return d(e,t),a(e,[{key:"draw",value:function(t){var e=this;if(!this.hidden){var i=t.canvas.getContext("2d");this.style.blurBackground&&this.drawBlur(i),i.save(),this.drawComponents(i),this.init||(document.addEventListener("keydown",function(t){e.disabled||(e.lastKey=t.keyCode,e.lastKey!=n.Key.UP&&e.lastKey!=n.Key.BOTTOM||t.preventDefault())}),this.init=!0);var r=!1;null!=this.components&&(this.lastKey==n.Key.UP?(this.select(this.selectedComponent-1),r=!0):this.lastKey==n.Key.BOTTOM?(this.select(this.selectedComponent+1),r=!0):this.lastKey==n.Key.ECHAP?(this.disable(),r=!0):this.components.forEach(function(t,n){t.selected&&e.select(n)}),this.components.forEach(function(t,i){if(t instanceof O){if(r)if(e.selectedComponent==i){if(t.selectable&&(t.selected=!0),!e.isComponentVisible(t)){var o=t.height,s=e.maxHeight-e.offsetScrollY-(t.y+o);e.offsetScrollY=-s,e.controlScrolling(null,-s)}}else t.selected=!1;if(e.selectedComponent==i&&e.lastKey==n.Key.ENTER&&t.reactor&&!t.disabled)return e.lastKey=-1,e.selectedComponent=0,void t.reactor.dispatchEvent("onClick")}})),i.restore(),this.lastKey=-1}}},{key:"drawComponents",value:function(t){Xt(e,"draw",this,3)([t])}},{key:"drawBlur",value:function(t){H.blurCanvas(t,5)}},{key:"drawBackground",value:function(t){t.fillStyle=this.style.backgroundColor,t.fillRect(this.parent?this.parent.x:0,this.parent?this.parent.y:0,this.maxWidth,this.maxHeight)}},{key:"disable",value:function(){Xt(e,"disable",this,3)([]),this.components.forEach(function(t){return t&&t.disable&&t.disable()})}},{key:"enable",value:function(){Xt(e,"enable",this,3)([]),this.components.forEach(function(t){return t&&t.enable&&t.enable()})}},{key:"select",value:function(t){if(this.selectedComponent=t,!(this.components.filter(function(t){return t.selectable}).length<=0)&&(this.selectedComponent>=this.components.length?this.selectedComponent=0:this.selectedComponent<0&&(this.selectedComponent=this.components.length-1),this.components[this.selectedComponent]&&!this.components[this.selectedComponent].selectable)){if(this.lastKey==n.Key.UP)return this.select(this.selectedComponent-1);if(this.lastKey==n.Key.BOTTOM)return this.select(this.selectedComponent+1)}}},{key:"scrollAreaSizeX",get:function(){return this.innerWidth-this.maxWidth}},{key:"scrollAreaSizeY",get:function(){return this.innerHeight-this.maxHeight}},{key:"maxHeight",get:function(){return Xt(e,"maxHeight",this,1)||this.canvas&&this.canvas.scene&&this.canvas.scene.height}},{key:"maxWidth",get:function(){return this.canvas&&this.canvas.scene&&this.canvas.scene.width}},{key:"minWidth",get:function(){return this.parent?this.parent.width:0}},{key:"defaultStyle",get:function(){return new y({blurBackground:n.Setting.MENU_DEFAULT_BLUR_BACKGROUND,backgroundColor:n.Setting.MENU_DEFAULT_BACKGROUND,verticalAlignement:n.VerticalAlignement.CENTER,scrollXDisabled:!0})}},{key:"compareToComponent",value:function(t){return t.compareToMenu(this)}},{key:"compareToMenu",value:function(t){return 0}},{key:"compareToTooltip",value:function(t){return-1}},{key:"compareToNotification",value:function(t){return 1}},{key:"hidden",get:function(){return Xt(e,"hidden",this,1)||this.disabled},set:function(t){var n;n=t,x(l(e.prototype),"hidden",n,this,1),this.disabled=t}},{key:"isInside",value:function(t){return!this.hidden}}])}(xt);function Kt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Kt=function(){return!!t})()}function Yt(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function jt(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Vt(t,e){return t.get(qt(t,e))}function Zt(t,e,n){return t.set(qt(t,e),n),n}function qt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Jt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,te=function(t){function e(t,n,r,o,s,a){var c,u,f,d;i(this,e),u=this,d=[t,n,r,o,s],f=l(f=e),v(c=h(u,Kt()?Reflect.construct(f,d||[],l(u).constructor):f.apply(u,d)),"selectable",!0),jt(c,Jt,0),jt(c,Qt,0),jt(c,$t,0),c.text=a||"",Zt(Jt,c,0),Zt($t,c,0),Zt(Qt,c,0),c.lastInputText=!1,c.offsetX=0,c.lastTime=0,c.totalTime=0,c.clickCurrentPosition=null,c.textCache=null,c.input=document.createElement("input"),c.input.setAttribute("type","text"),c.input.style.position="absolute",c.input.style.left="-9999px",c.input.tabIndex=-1,c.input.value=c.text,c.input.addEventListener("blur",function(){return c.selected=!1}),c.input.addEventListener("focus",function(){return c.selected=!0}),c.input.addEventListener("input",function(){c.totalTime=0,c.lastInputText=!0,c.positionStart=c.input.selectionStart,c.positionEnd=c.input.selectionEnd}),document.body.appendChild(c.input),c.appendToCanvas=!1,c.noticeLogged=!1,c.canvasTmp=document.createElement("canvas");var g=function(t,e,n){if(n){var i=c.getLetterClicked(n);null!=i&&(i>c.positionStartClick?c.setSelectionRange(c.positionStartClick,i,"forward"):i<c.positionStartClick&&c.setSelectionRange(i,c.positionStartClick,"backward"))}};return c.addDownAction(function(t){var e=c.getLetterClicked(t);null!=e&&(c.positionStartClick=e,c.setSelectionRange(e,e,"forward")),c.totalTime=0}),c.addClickAction(function(){return c.click()}),c.addMoveAction(g),c.addScrollAction(g),c}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){Yt(e,"draw",this,3)([t]);var i=t.canvas,r=i.getContext("2d");r.save(),this.input.selectionEnd!=this.positionEnd&&(this.totalTime=0),this.canvas&&this.canvas.container&&!this.appendToCanvas?(document.body.removeChild(this.input),this.canvas.container.appendChild(this.input),this.appendToCanvas=!0):this.canvas||this.noticeLogged||(console&&console.warn&&console.warn(n.String.WARNING_MESSAGE+" "+n.String.INPUT_FULLSCREEN),this.noticeLogged=!0),this.selected&&!this.disabled?this.click():this.blur(),this.text=this.input.value,this.positionStart=this.input.selectionStart,this.positionEnd=this.input.selectionEnd;var o=performance.now(),s=0;this.lastTime>0&&(s=o-this.lastTime),this.lastTime=o,this.totalTime+=s,this.drawBackground(r),this.drawBorder(r),this.canvasTmp.width=H.getCanvasWidth(i)*n.Setting.PIXEL_RATIO,this.canvasTmp.height=H.getCanvasHeight(i)*n.Setting.PIXEL_RATIO,this.canvasTmp.style.width=H.getCanvasWidth(i),this.canvasTmp.style.height=H.getCanvasHeight(i);var a=this.canvasTmp.getContext("2d");H.clear(a),a.scale(n.Setting.PIXEL_RATIO,n.Setting.PIXEL_RATIO),this.updateTextCache(this.x+5),this.autoScroll(),this.drawText(a,this.x+5),H.drawImageData(r,this.canvasTmp,this.x+this.style.borderSize,this.y+this.style.borderSize,this.width-2*this.style.borderSize,this.height-2*this.style.borderSize,(this.x+this.style.borderSize)*n.Setting.PIXEL_RATIO,(this.y+this.style.borderSize)*n.Setting.PIXEL_RATIO,(this.width-2*this.style.borderSize)*n.Setting.PIXEL_RATIO,(this.height-2*this.style.borderSize)*n.Setting.PIXEL_RATIO),(this.hovered||this.clicked)&&this.canvas&&(this.canvas.cursor="text"),this.selected||(this.totalTime=0),r.restore()}}},{key:"drawText",value:function(t,e){for(var n=-1;n<this.text.length;n++){if(n>-1){var i=this.textCache.letters[n].sizes,r=e-this.offsetX,o=this.y+this.style.borderSize;this.isLetterVisible(n)&&(this.positionStart!=this.positionEnd&&n>=this.positionStart&&n<this.positionEnd&&this.drawHighlight(t,e,i),H.drawText(t,this.text[n],this.style.fontColor,this.style.fontSize,this.style.fontFamily,"default","default",r,o,!1)),e+=i.width+this.style.spaceBetweenComponents}this.positionEnd==n+1&&this.selected&&(this.totalTime<=500?this.drawCursor(t,e):this.totalTime>1e3&&(this.totalTime=0))}return e}},{key:"drawCursor",value:function(t,e){t.strokeStyle=this.style.borderColor,t.lineWidth=1,t.beginPath(),t.moveTo(e-this.offsetX,this.y+3),t.lineTo(e-this.offsetX,this.y+this.style.fontSize),t.stroke()}},{key:"drawHighlight",value:function(t,e,n){t.fillStyle=this.style.selectColor,t.fillRect(e-this.offsetX,this.y+this.style.borderSize,n.width+2,this.height-2*this.style.borderSize-1)}},{key:"updateTextCache",value:function(t){var e=this.canvas?this.canvas.getContext("2d"):null,i=this.canvas&&this.canvas.scene||this.canvas||e&&e.canvas;if(e&&(n.Setting.DISABLE_OPTIMIZATIONS||!this.textCache||this.textCache.fontSize!=this.style.fontSize||this.textCache.fontFamily!=this.style.fontFamily||this.text!=this.textCache.text||i&&i.width!=this.textCache.parentWidth)){this.textCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,text:this.text,parentWidth:i.width,letters:[]};for(var r=0;r<this.text.length;r++){var o=H.wrapTextLines(e,this.text[r],this.width,this.style.fontSize,this.style.fontFamily,!0);this.textCache.letters[r]={text:this.text[r],currentX:t,sizes:o},t+=o.width+this.style.spaceBetweenComponents}}}},{key:"isClickCurrentPosition",value:function(t,e,n){return t.x+this.offsetX<=e+n.width+this.style.spaceBetweenComponents&&t.x+this.offsetX>=e}},{key:"isClickAfterPosition",value:function(t,e,n){return t.x+this.offsetX>=e+n.width+this.style.spaceBetweenComponents}},{key:"getLetterClicked",value:function(t){if(this.textCache)for(var e=0;e<this.text.length;e++){var n=this.textCache.letters[e];if(this.isClickCurrentPosition(t,Math.round(n.currentX),n.sizes))return e;if(e>=this.text.length-1&&this.isClickAfterPosition(t,Math.round(n.currentX),n.sizes))return e+1}}},{key:"cursorPosition",get:function(){if(this.textCache){var t=this.positionEnd-1;if(this.positionEnd!=this.positionStart&&this.positionEnd==this.positionStartClick&&this.positionStart<this.positionStartClick&&(t=this.positionStart-1),t<0)return{currentLetter:this.textCache.letters[0],x:this.x+this.style.borderSize};var e=this.textCache.letters[t];if(e)return{currentLetter:e,x:e.currentX}}return null}},{key:"isLetterVisible",value:function(t){if(this.textCache){var e=this.textCache.letters[t];if(e){var n=e.currentX-this.offsetX;if(n>=this.x-e.sizes.width&&n<=this.x+this.width)return!0}}return!1}},{key:"autoScroll",value:function(){if(this.textCache){var t=this.cursorPosition,e=t.currentLetter?t.currentLetter.sizes.width:0,n=t.x+e+this.style.spaceBetweenComponents,i=t.x-e-this.style.spaceBetweenComponents,r=Math.max(0,Math.round(n-this.x-this.width+this.style.borderSize+2*this.style.spaceBetweenComponents)),o=Math.max(0,Math.round(i-this.x-this.style.borderSize-2*this.style.spaceBetweenComponents));if(this.offsetX<0&&(this.offsetX=0),n-this.offsetX>=this.x+this.width-this.style.borderSize)return this.offsetX=r,r;if(i-this.offsetX<=this.x+this.style.borderSize)return this.offsetX=o,o}return!1}},{key:"click",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"positionStart",get:function(){return Vt(Jt,this)},set:function(t){this.input.selectionStart=t,Zt(Jt,this,t)}},{key:"positionStartClick",get:function(){return Vt(Qt,this)},set:function(t){Zt(Qt,this,t)}},{key:"positionEnd",get:function(){return Vt($t,this)},set:function(t){this.input.selectionEnd=t,Zt($t,this,t)}},{key:"setSelectionRange",value:function(t,e,n){this.input.setSelectionRange(t,e,n),this.positionStart=t,this.positionEnd=e}},{key:"height",get:function(){var t=this.style&&this.style.borderSize?this.style.borderSize:0;return Yt(e,"height",this,1)?Yt(e,"height",this,1):this.style.fontSize+2*t}},{key:"defaultStyle",get:function(){return new y({fontSize:Math.floor(n.Setting.FONT_SIZE/1.25),fontFamily:n.Setting.FONT_FAMILY,fontColor:n.Setting.INPUT_DEFAULT_FONT_COLOR,backgroundColor:n.Setting.INPUT_DEFAULT_BACKGROUND_COLOR,borderColor:n.Setting.INPUT_DEFAULT_BORDER_COLOR,borderColorSelected:n.Setting.INPUT_DEFAULT_BORDER_COLOR_SELECTED,selectColor:n.Setting.INPUT_DEFAULT_SELECT_COLOR,spaceBetweenComponents:1})}}])}(F);function ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ee=function(){return!!t})()}function ne(t,e){return t.get(ie(t,e))}function ie(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var re=new WeakMap,oe=function(t){function e(t,r,o,s){var a,c,u,f;return i(this,e),c=this,f=[r,o,null,null,s],u=l(u=e),v(a=h(c,ee()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!1),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(a,re,""),a.text=t,a.sizesCache=null,n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(a.updateSizes(),a.addChangeAction(function(t){a.updateSizes(),t!=a.parent&&a.parent&&a.parent.reactor&&a.parent.reactor.dispatchEvent("onChange",a)})),a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){var n,i,r;(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]);var o=t.canvas.getContext("2d");o.save(),H.drawText(o,this.text,this.style.fontColor,this.style.fontSize,this.style.fontFamily,this.style.alignement,this.style.verticalAlignement,this.x,this.y,this.style.wrap,this.style.bold,this.style.underline,null,this.parent),o.restore()}}},{key:"text",get:function(){return ne(re,this)},set:function(t){var e,n;t!=ne(re,this)&&(n=t,(e=re).set(ie(e,this),n),this.reactor.dispatchEvent("onChange",this))}},{key:"updateSizes",value:function(){var t=this.canvas?this.canvas.getContext("2d"):null,e=this.canvas&&this.canvas.scene||this.canvas||t&&t.canvas||this.parent;if(t&&(n.Setting.DISABLE_OPTIMIZATIONS||!this.sizesCache||this.sizesCache.fontSize!=this.style.fontSize||this.sizesCache.fontFamily!=this.style.fontFamily||this.sizesCache.wrap!=this.style.wrap||this.text!=this.sizesCache.text||e&&e.width!=this.sizesCache.parentWidth||null==this.sizesCache.value)){var i=H.wrapTextLines(t,this.text,null,this.style.fontSize,this.style.fontFamily,!this.style.wrap);e&&(this.sizesCache={fontSize:this.style.fontSize,fontFamily:this.style.fontFamily,wrap:this.style.wrap,text:this.text,parentWidth:e.width,value:i},e.reactor.dispatchEvent("onChange",this))}return this.sizesCache&&this.sizesCache.value}},{key:"sizes",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateSizes(),this.sizesCache?this.sizesCache.value:null}},{key:"height",get:function(){var t=this.sizes;return t&&t.height}},{key:"width",get:function(){var t=this.sizes;return t&&t.width}},{key:"defaultStyle",get:function(){return new y({fontColor:n.Setting.LABEL_DEFAULT_FONT_COLOR,wrap:!0,bold:!1,underline:!1})}}])}(O);function se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(se=function(){return!!t})()}var ae=function(t){function e(t,n,r,o){var s,a,c,u;return i(this,e),a=this,u=[t,n,r,o],c=l(c=e),v(s=h(a,se()?Reflect.construct(c,u||[],l(a).constructor):c.apply(a,u)),"selectable",!0),s.initialColor=s.style.fontColor,s.initialUnderline=s.style.underline,s}return d(e,t),a(e,[{key:"draw",value:function(t){var n,i,r;this.hidden||((n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]),this.clicked?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorDown),this.movable||(this.canvas.cursor="pointer")):this.hovered||this.selected?(this.style.set("underline",!1),this.style.set("fontColor",this.style.fontColorHover),this.hovered&&!this.movable&&(this.canvas.cursor="pointer")):(this.style.set("underline",this.initialUnderline),this.style.set("fontColor",this.initialColor)),this.init=!0)}},{key:"defaultStyle",get:function(){return new y({fontColor:n.Setting.LINK_DEFAULT_COLOR,fontColorHover:n.Setting.LINK_DEFAULT_HOVER_COLOR,fontColorDown:n.Setting.LINK_DEFAULT_CLICK_COLOR,wrap:!0,bold:!1,underline:!0})}}])}(oe);function he(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(he=function(){return!!t})()}function le(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}function ce(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var ue=function(t){function e(t){var n,r,o,s;i(this,e);for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return r=this,o=e,s=[null,null,null,null,t].concat(c),o=l(o),v(n=h(r,he()?Reflect.construct(o,s||[],l(r).constructor):o.apply(r,s)),"selectable",!1),n.disabled=!0,n}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){var n=t.canvas.getContext("2d");n.save(),this.x+this.width+this.style.padding>this.parent.width&&(this.x-=this.width+this.style.padding),this.y+this.height+this.style.padding>this.parent.height&&(this.y-=this.height+this.style.padding),ce(e,"draw",this,3)([n]),n.restore()}}},{key:"width",get:function(){return ce(e,"width",this,1)+this.style.padding},set:function(t){le(e,"width",t,this,1,1)}},{key:"height",get:function(){return ce(e,"height",this,1)+this.style.padding},set:function(t){le(e,"height",t,this,1,1)}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.TOOLTIP_DEFAULT_BACKGROUND})}},{key:"compareToComponent",value:function(t){return t.compareToTooltip(this)}},{key:"compareToMenu",value:function(t){return 1}},{key:"compareToTooltip",value:function(t){return 0}},{key:"compareToNotification",value:function(t){return 1}},{key:"hidden",get:function(){return ce(e,"hidden",this,1)||this.disabled},set:function(t){le(e,"hidden",t,this,1,1),this.disabled=t}}])}(xt);function fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fe=function(){return!!t})()}function de(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var ve=function(t){function e(){var t,n,r,o,s;return i(this,e),r=this,o=l(o=e),v(n=h(r,fe()?Reflect.construct(o,[],l(r).constructor):o.apply(r,s)),"selectable",!1),v(n,"enableEvents",!1),(t=n).addAll.apply(t,arguments),n}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){de(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");n.save(),this.canvas.cursor="default";var i=n;(this.maxWidth||this.maxHeight)&&(i=this.canvasTmp.getContext("2d")),this.drawComponents(i),(this.maxWidth||this.maxHeight)&&H.drawImageData(n,this.canvasTmp,this.x,this.y,this.width,this.height,this.x,this.y,this.width,this.height),de(e,"drawScrollbars",this,3)([n]),n.restore()}}},{key:"drawComponents",value:function(t){this.components.sort(e.compareComponents).forEach(function(e){return e.draw(t)})}},{key:"defaultStyle",get:function(){return new y({padding:n.Setting.DEFAULT_PADDING})}}])}(tt);function ge(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ge=function(){return!!t})()}var pe=function(t){function e(t,n,r,o){var s,a,c,u;return i(this,e),a=this,u=[null,n,r,o],c=l(c=e),v(s=h(a,ge()?Reflect.construct(c,u||[],l(a).constructor):c.apply(a,u)),"selectable",!1),s.displayFrames=t||!1,s.frames=0,s.lastFrame=0,s.currentFPS=0,s.intervalCountFPS=setInterval(function(){return s.countFPS()},1e3),s}return d(e,t),a(e,[{key:"draw",value:function(t){var n,i,r;this.hidden||(this.text="FPS: "+this.currentFPS+(this.displayFrames?" / Frames: "+this.frames:""),(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]),this.frames++)}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frames-this.lastFrame),this.lastFrame=this.frames}}])}(oe);function ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ye=function(){return!!t})()}function me(t,e){return t.get(Ce(t,e))}function Ee(t,e,n){return t.set(Ce(t,e),n),n}function Ce(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var we=new WeakMap,Se=function(t){function e(t,n,r,o,s,a,c){var u,f,d,g;return i(this,e),f=this,g=[t,n,r,o,s],d=l(d=e),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(u=h(f,ye()?Reflect.construct(d,g||[],l(f).constructor):d.apply(f,g)),we,0),v(u,"selectable",!1),u.percent=null==a?0:a,Ee(we,u,u.percent),u.easingFunction=c,u.lastTime=0,u.totalTime=0,u}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){var n,i,r;(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]);var o=t.canvas.getContext("2d");o.save();var s=performance.now(),a=0;me(we,this)==this.percent||this.style.disableAnimation?(this.totalTime=0,this.lastTime=0):(this.lastTime>0&&(a=s-this.lastTime),this.totalTime+=a,this.totalTime>=this.style.animationDuration?(Ee(we,this,this.percent),this.totalTime=0,this.lastTime=0):this.lastTime=s),this.drawBackground(o),this.drawForeground(o,this.widthForeground),o.restore()}}},{key:"animationPercent",get:function(){var t=me(we,this)==this.percent||this.style.disableAnimation?1:this.totalTime/this.style.animationDuration;return this.easingFunction&&(t=this.easingFunction(t)),t}},{key:"widthForeground",get:function(){return Math.max(0,Math.min(this.width,this.width*(me(we,this)+(this.percent-me(we,this))*this.animationPercent)))}},{key:"drawForeground",value:function(t,e){t.save(),t.fillStyle=this.style.foregroundColor,t.fillRect(this.x,this.y,e,this.height),t.restore()}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.PROGRESS_DEFAULT_BACKGROUND,foregroundColor:n.Setting.PROGRESS_DEFAULT_FOREGROUND,animationDuration:n.Setting.PROGRESS_DEFAULT_ANIMATION_DURATION})}}])}(F);function Ae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ae=function(){return!!t})()}var Te=function(t){function e(){return i(this,e),t=this,r=arguments,n=l(n=e),h(t,Ae()?Reflect.construct(n,r||[],l(t).constructor):n.apply(t,r));var t,n,r}return d(e,t),a(e,[{key:"registerEvent",value:function(t){this.events[t]||(this.events[t]=[])}},{key:"dispatchEvent",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.events[t]&&this.events[t].forEach(function(t){return t&&t.callback&&t.callback.apply(t,n)})}},{key:"dispatchEventComponent",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this.events[t]&&this.events[t].forEach(function(t){return t&&t.callback&&t.component==e&&t.callback.apply(t,i)})}},{key:"addEventListener",value:function(t,e,n){this.events[t]&&this.events[t].push({component:e,callback:n})}},{key:"removeEventListener",value:function(t,e){this.events[t]&&this.events[t].filter(function(t){return t&&t.callback!=e})}},{key:"removeEventListenerComponent",value:function(t,e){this.events[t]&&this.events[t].filter(function(t){return t&&t.component!=e})}},{key:"removeAllEventListener",value:function(){this.events=[]}}])}(E);function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ke=function(){return!!t})()}var Le=function(t){function e(t){var r,o,s,a;i(this,e),o=this,s=l(s=e),(r=h(o,ke()?Reflect.construct(s,[],l(o).constructor):s.apply(o,a))).canvas=t,r.labelDetailsSceneError=new oe("",null,null,new y({fontColor:"white",alignement:"center",fontSize:n.Setting.FONT_SIZE/1.75})),r.labelDetailsSceneError.hidden=!0;var c=new ft(null,null,null,null,new y({backgroundColor:n.Setting.BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND}),new oe(n.String.RETRY,null,null,new y({fontColor:"white",alignement:"center"}))),u=new ft(null,null,null,null,new y({backgroundColor:n.Setting.BUTTON_DEFAULT_ALTERNATIVE_BACKGROUND}),new oe(n.String.DETAILS,null,null,new y({fontColor:"white",alignement:"center"}))),f=new lt(null,null,null,0,new y({alignement:"center"}),r.labelDetailsSceneError),d=new Gt(new y({spaceBetweenComponents:15,backgroundColor:n.Setting.ERROR_MENU_BACKGROUND_COLOR}),new oe(n.String.ERROR_MESSAGE_CANVAS_LABEL,null,null,new y({fontColor:"white",alignement:"center"})),f,new lt(null,null,null,null,new y({alignement:"center"}),c,u));return d.enable(),c.addClickAction(function(){r.canvas.hasError=!1,r.canvas.scene=r.canvas.scenePrevious,r.labelDetailsSceneError.hidden=!0,f.maxHeight=0}),u.addClickAction(function(){r.labelDetailsSceneError.hidden=!r.labelDetailsSceneError.hidden,f.maxHeight=r.labelDetailsSceneError.hidden?0:100}),r.add(d),r}return d(e,t),a(e,[{key:"errorText",get:function(){return this.labelDetailsSceneError.text},set:function(t){this.labelDetailsSceneError.text=t}}])}(ve);function _e(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Ie(t,e){return t.get(Re(t,e))}function be(t,e,n){return t.set(Re(t,e),n),n}function Re(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Oe=new WeakMap,De=new WeakMap,xe=new WeakMap,Ne=function(){return a(function t(e,r,o,s,a,h){i(this,t),_e(this,Oe,void 0),_e(this,De,void 0),_e(this,xe,void 0),this.canvas=r||document.createElement("canvas"),this.container=document.createElement("div"),this.width=o||n.Setting.CANVAS_WIDTH,this.height=s||n.Setting.CANVAS_HEIGHT,this.scene=e,this.container.appendChild(this.canvas),this.started=!1,this.init=!1,this.maxFPS=h||-1,be(Oe,this,0),this.hasError=!1,this.fullscreen=!1,this.fullpage=!1,this.sceneError=new Le(this),this.scenePrevious=this.scene,this.reactor=new Te,this.reactor.registerEvent("mousemove"),this.reactor.registerEvent("click"),this.reactor.registerEvent("mousedown"),this.reactor.registerEvent("mouseup"),this.reactor.registerEvent("wheel"),this.reactor.registerEvent("touchstart"),this.reactor.registerEvent("touchend"),this.reactor.registerEvent("touchmove"),a&&this.autoResize(),this.createEvents(),n.Setting.DISABLE_OPTIMIZATIONS&&console&&console.info(n.String.NOTICE_MESSAGE+" "+n.String.OPTIMIZATION_DISABLED),n.Setting.DISABLE_CONTAINERS_CUTTING&&console&&console.info(n.String.NOTICE_MESSAGE+" "+n.String.CONTAINER_CUTTING_DISABLED)},[{key:"draw",value:function(){var t=this.canvas.getContext("2d");this.drawClear(t),this.drawScene(t)}},{key:"drawScene",value:function(t){if(this.scene){this.scene.parent=this,this.scene.canvas=this;try{t.scale(n.Setting.PIXEL_RATIO,n.Setting.PIXEL_RATIO),this.scene.draw(t)}catch(t){this.hasError=!0,this.scene=this.sceneError,this.sceneError.errorText=""+t.stack,console.error(n.String.ERROR_MESSAGE+" "+n.String.ERROR_MESSAGE_CANVAS+"\n",t)}}}},{key:"drawClear",value:function(t){H.clear(t)}},{key:"startDraw",value:function(t){var e=this;this.started=!0,requestAnimationFrame(function(i){if(e.started){var r=i-Ie(Oe,e);e.fullscreen=document.fullscreenElement==e.canvas||document.fullscreenElement==e.container,n.Setting.ENABLE_PIXEL_RATIO_RESIZING?n.Setting.PIXEL_RATIO=window.devicePixelRatio*n.Setting.RESOLUTION_SCALE:n.Setting.PIXEL_RATIO=1*n.Setting.RESOLUTION_SCALE,(e.maxFPS<1||r>1e3/e.maxFPS)&&(H.autoDPI(e.canvas),be(Oe,e,i),e.draw()),e.startDraw(t),t&&t()}})}},{key:"stopDraw",value:function(){this.started=!1}},{key:"appendTo",value:function(t){t.appendChild(this.container)}},{key:"remove",value:function(t){t.removeChild(this.container),this.container.removeChild(this.canvas)}},{key:"toggleFullscreen",value:function(){H.toggleFullscreen(this.canvas,this.container)}},{key:"toggleFullpage",value:function(){H.toggleFullpage(this.canvas,this.container),this.fullpage=!this.fullpage}},{key:"autoResize",value:function(){H.enableAutoResizeCanvas(this.canvas,this.container,this.width,this.height)}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return 0}},{key:"width",get:function(){return this.canvas?H.getCanvasWidth(this.canvas):Ie(De,this)},set:function(t){t!=Ie(De,this)&&(be(De,this,t),this.canvas.width=t,this.scene&&this.scene.reactor.dispatchEvent("onChange",this))}},{key:"height",get:function(){return this.canvas?H.getCanvasHeight(this.canvas):Ie(xe,this)},set:function(t){t!=Ie(xe,this)&&(be(xe,this,t),this.canvas.height=t,this.scene&&this.scene.reactor.dispatchEvent("onChange",this))}},{key:"style",get:function(){return this.canvas?this.canvas.style:null}},{key:"cursor",get:function(){return this.canvas?this.canvas.style.cursor:""},set:function(t){this.canvas&&(this.canvas.style.cursor=t)}},{key:"getContext",value:function(t){return this.canvas?this.canvas.getContext(t||"2d"):null}},{key:"createEvents",value:function(){var t=this;!this.init&&this.canvas&&(["mousemove","click","mousedown","mouseup","wheel"].forEach(function(e){t.canvas.addEventListener(e,function(n){var i=t.getMousePos(n);t.doEvents(n,e,i),n.preventDefault()},!1)}),["touchstart","touchmove","touchend"].forEach(function(e){t.canvas.addEventListener(e,function(n){var i=n.changedTouches[0],r=t.getMousePos(i);t.doEvents(n,e,r)})}),this.init=!0)}},{key:"doEvents",value:function(t,e,n){var i=this,r=this.getComponentsAtPosition(n);this.reactor.dispatchEvent(e,t,!1),Tt(r).reverse().forEach(function(n){return i.reactor.dispatchEventComponent(e,n,t,!0)})}},{key:"addEventListener",value:function(t,e,n){this.reactor.addEventListener(t,e,n)}},{key:"getMousePos",value:function(t){return H.getMousePos(this.canvas,t)}},{key:"getAllComponents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;return this.scene.getAllComponents(t)}},{key:"getComponentsAtPosition",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scene,i=this.scene.getComponentsTree(n),r=[n];return i.childs&&i.childs.sort(ve.sortComponentsTree).reverse().some(function(n){if(n.component.isInside(t)&&!n.component.hidden&&!n.component.disabled)return r.push.apply(r,Tt(e.getComponentsAtPosition(t,n.component))),!0}),r}}])}();const Fe={easeInCubic:function(t){return t*t*t},easeOutBounce:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2},easeInOutSine:function(t){return-(Math.cos(Math.PI*t)-1)/2},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2},easeInOutCirc:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2},easeInOutQuad:function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2},easeInOutBack:function(t){var e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}};function Be(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Be=function(){return!!t})()}var Ue=function(t){function e(t,n,r,o,s){var a,c,u,f;return i(this,e),c=this,f=[t,n,null,null,s],u=l(u=e),v(a=h(c,Be()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!1),a.toX=r,a.toY=o,a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){var n,i,r;(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"draw",i))?function(t){return r.apply(i,t)}:r)([t]);var o=t.canvas.getContext("2d");H.drawArrow(o,this.x,this.y,this.toX,this.toY,this.style.lineWidth,this.style.headSize,this.style.color,this.style.lineCap),this.init=!0}}},{key:"width",get:function(){return Math.abs(this.x-this.toX)}},{key:"height",get:function(){return Math.abs(this.y-this.toY)}},{key:"defaultStyle",get:function(){return new y({lineWidth:n.Setting.ARROW_DEFAULT_LINE_SIZE,headSize:n.Setting.ARROW_DEFAULT_HEAD_SIZE,color:n.Setting.ARROW_DEFAULT_COLOR,lineCap:n.Setting.ARROW_DEFAULT_LINE_CAP})}}])}(O);function Me(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Me=function(){return!!t})()}function Pe(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}function ze(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var We=function(t){function e(t,n,r,o,s){var a,c,u,f;return i(this,e),c=this,f=[t,n,r,o,s],u=l(u=e),v(a=h(c,Me()?Reflect.construct(u,f||[],l(c).constructor):u.apply(c,f)),"selectable",!1),a}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){ze(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");H.drawTriangle(n,this.x,this.y,this.width,this.height,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return ze(e,"width",this,1)+this.style.lineWidth},set:function(t){Pe(e,"width",t,this,1,1)}},{key:"height",get:function(){return ze(e,"height",this,1)+this.style.lineWidth},set:function(t){Pe(e,"height",t,this,1,1)}},{key:"defaultStyle",get:function(){return new y({lineWidth:n.Setting.TRIANGLE_DEFAULT_LINE_SIZE,color:n.Setting.TRIANGLE_DEFAULT_COLOR,fill:n.Setting.TRIANGLE_DEFAULT_FILL,lineCap:n.Setting.TRIANGLE_DEFAULT_LINE_CAP,fillColor:n.Setting.TRIANGLE_DEFAULT_FILL_COLOR})}}])}(O);function He(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(He=function(){return!!t})()}function Xe(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function Ge(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ke=new WeakMap,Ye=function(t){function e(t,r,o,s,a,c,u){var f,d,v,g;return i(this,e),d=this,g=[t,r,o,s,a],v=l(v=e),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(f=h(d,He()?Reflect.construct(v,g||[],l(d).constructor):v.apply(d,g)),Ke,0),f.optionContainer=c,u&&(f.selectedOption=u),f.label=new oe("",t,r,a),f.label.style.setAll({alignement:n.Alignement.LEFT,verticalAlignement:n.VerticalAlignement.CENTER}),f.triangle=new We(null,null,8,8,a),f.triangle.style.setAll({alignement:n.Alignement.RIGHT,verticalAlignement:n.VerticalAlignement.CENTER}),f.addAll(f.label,f.triangle),f.addClickAction(function(){f.optionContainer&&(f.optionContainer.hidden=!1)}),n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS||(f.updateWidth(),f.addChangeAction(function(){return f.updateWidth()})),f}return d(e,t),a(e,[{key:"draw",value:function(t){this.hidden||(this.selectedOption&&this.selectedOption.label&&(this.label.text=this.selectedOption.label.text),Xe(e,"draw",this,3)([t]),this.optionContainer&&(this.optionContainer.select=this))}},{key:"selectedOption",get:function(){return this.optionContainer?this.optionContainer.components[this.optionContainer.selectedOption]:null},set:function(t){t!=this.optionContainer.selectedOption&&(this.optionContainer.selectedOption=t,this.reactor.dispatchEvent("onChange",this))}},{key:"text",get:function(){return this.selectedOption&&this.selectedOption.label?this.selectedOption.label.text:null}},{key:"updateWidth",value:function(){var t,e,n=this.label.width;this.optionContainer&&this.optionContainer.components.forEach(function(t){var e=t.label;e&&(e.updateSizes&&e.updateSizes(),e.width>n&&(n=e.width))}),t=Ke,e=n+this.style.padding+this.triangle.width+15,t.set(Ge(t,this),e)}},{key:"width",get:function(){return n.Setting.DISABLE_EXPERIMENTAL_OPTIMIZATIONS&&this.updateWidth(),(t=Ke).get(Ge(t,this));var t}},{key:"allComponents",get:function(){var t=[];return t.push.apply(t,Tt(Xe(e,"allComponents",this,1))),t}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:n.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:n.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:n.Setting.DEFAULT_PADDING})}},{key:"selected",get:function(){return Xe(e,"selected",this,1)||this.optionContainer.selected},set:function(t){var n;n=t,x(l(e.prototype),"selected",n,this,1)}}])}(ft);function je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(je=function(){return!!t})()}var Ve=function(t){function e(t,n){var r;i(this,e);var o,s,a,c=new oe("Option");return o=this,a=[null,null,null,null,n,t||c],s=l(s=e),(r=h(o,je()?Reflect.construct(s,a||[],l(o).constructor):s.apply(o,a))).label=t||c,r}return d(e,t),a(e,[{key:"add",value:function(t){var n,i,r;t instanceof oe&&(this.clear(),(n=e,i=this,"function"==typeof(r=u(l(1&3?n.prototype:n),"add",i))?function(t){return r.apply(i,t)}:r)([t]))}},{key:"width",get:function(){return this.parent&&this.parent.width}},{key:"defaultStyle",get:function(){return new y({backgroundColor:n.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:n.Setting.SELECT_DEFAULT_HOVER_BACKGROUND,backgroundColorDown:n.Setting.SELECT_DEFAULT_CLICK_BACKGROUND,padding:n.Setting.DEFAULT_PADDING})}}])}(ft);function Ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ze=function(){return!!t})()}function qe(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}function Je(t,e){return t.get($e(t,e))}function Qe(t,e,n){return t.set($e(t,e),n),n}function $e(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var tn=new WeakMap,en=function(t){function e(t,n){var r,o,s,a;i(this,e);for(var c=arguments.length,u=new Array(c>2?c-2:0),f=2;f<c;f++)u[f-2]=arguments[f];return o=this,s=e,a=[null,null,null,t,n].concat(u),s=l(s),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(r=h(o,Ze()?Reflect.construct(s,a||[],l(o).constructor):s.apply(o,a)),tn,void 0),v(r,"selectable",!1),Qe(tn,r,0),r.select=null,r}return d(e,t),a(e,[{key:"draw",value:function(t){qe(e,"draw",this,3)([t])}},{key:"x",get:function(){return this.select&&this.select.x}},{key:"y",get:function(){var t=this.select&&this.select.height,e=this.height,n=this.select&&this.select.y;return this.canvas&&this.canvas.scene&&n+t+e>=this.canvas.scene.height?n-e:n+t}},{key:"width",get:function(){return this.select&&this.select.width}},{key:"selectedOption",get:function(){return Math.max(0,Math.min(this.components.length-1,Je(tn,this)))},set:function(t){t!=Je(tn,this)&&(Qe(tn,this,t),this.reactor.dispatchEvent("onChange",this))}},{key:"add",value:function(t){var n=this;qe(e,"add",this,3)([t]),t.addClickAction(function(){Qe(tn,n,n.getComponentId(t)),n.selected=!1,n.hidden=!0,n.select&&(n.select.selected=!1)})}},{key:"defaultStyle",get:function(){return new y({padding:0,spaceBetweenComponents:0,backgroundColor:n.Setting.SELECT_DEFAULT_BACKGROUND,backgroundColorHover:null,backgroundColorDown:null,scrollXDisabled:!1,scrollYDisabled:!1})}},{key:"hidden",get:function(){return qe(e,"hidden",this,1)||this.select&&!this.select.selected||!this.select},set:function(t){var n;n=t,x(l(e.prototype),"hidden",n,this,1)}}])}(xt);function nn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nn=function(){return!!t})()}function rn(t,e,n,i,r,o){return x(l(o?t.prototype:t),e,n,i,r)}function on(t,e,n,i){var r=u(l(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof r?function(t){return r.apply(n,t)}:r}var sn=function(t){function e(t,n,r,o){var s,a,c,u;return i(this,e),a=this,u=[t,n,r,r,o],c=l(c=e),v(s=h(a,nn()?Reflect.construct(c,u||[],l(a).constructor):c.apply(a,u)),"selectable",!1),s}return d(e,t),a(e,[{key:"draw",value:function(t){if(!this.hidden){on(e,"draw",this,3)([t]);var n=t.canvas.getContext("2d");H.drawCircle(n,this.x,this.y,this.width,this.style.lineWidth,this.style.color,this.style.lineCap,this.style.fill,this.style.fillColor),this.init=!0}}},{key:"width",get:function(){return on(e,"width",this,1)+this.style.lineWidth},set:function(t){rn(e,"width",t,this,1,1)}},{key:"height",get:function(){return on(e,"height",this,1)+this.style.lineWidth},set:function(t){rn(e,"height",t,this,1,1)}},{key:"defaultStyle",get:function(){return new y({lineWidth:n.Setting.CIRCLE_DEFAULT_LINE_SIZE,color:n.Setting.CIRCLE_DEFAULT_COLOR,fill:n.Setting.CIRCLE_DEFAULT_FILL,lineCap:n.Setting.CIRCLE_DEFAULT_LINE_CAP,fillColor:n.Setting.CIRCLE_DEFAULT_FILL_COLOR})}}])}(O);return e})());