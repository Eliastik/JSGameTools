!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSGameTools=e():t.JSGameTools=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){var n=i(10);function r(e,i,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,i){var r=n(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(i):o.value}},r(e,i,o||e)}t.exports=r},function(t,e){t.exports=function(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}},function(t,e,i){var n=i(12);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,i){var n=i(13),r=i(7);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e,i){var n=e.get(t);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(t,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}},function(t,e,i){var n=i(10),r=i(11);function o(t,e,i,s){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,o){var s,a=n(t,e);if(a){if((s=Object.getOwnPropertyDescriptor(a,e)).set)return s.set.call(o,i),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,e)){if(!s.writable)return!1;s.value=i,Object.defineProperty(o,e,s)}else r(o,e,i);return!0})(t,e,i,s)}t.exports=function(t,e,i,n,r){if(!o(t,e,i,n||t)&&r)throw new Error("failed to set property");return i}},function(t,e,i){var n=i(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},function(t,e){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(t){return typeof t}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}t.exports=i},function(t,e,i){"use strict";i.r(e),i.d(e,"Constants",(function(){return n})),i.d(e,"Button",(function(){return x})),i.d(e,"ButtonImage",(function(){return S})),i.d(e,"ImageLoader",(function(){return k})),i.d(e,"NotificationMessage",(function(){return T})),i.d(e,"Utils",(function(){return m})),i.d(e,"Menu",(function(){return B})),i.d(e,"Input",(function(){return N})),i.d(e,"Label",(function(){return Y})),i.d(e,"Link",(function(){return K})),i.d(e,"Tooltip",(function(){return j})),i.d(e,"Scene",(function(){return X})),i.d(e,"FPSMeter",(function(){return q})),i.d(e,"ProgressBar",(function(){return G})),i.d(e,"Canvas",(function(){return $})),i.d(e,"Component",(function(){return w}));var n={Setting:{FONT_FAMILY:"sans-serif",FONT_SIZE:32,CLOSE_ICON:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAqFBMVEUAAAD5+fn////////////09PT////+/v78/Pz7+/vu7u7////////////////4+Pj////+/v7////8/Pz////9/f3////////+/v79/f3+/v79/f339/f+/v7+/v78/Pz////+/v78/Pz7+/v+/v7+/v7+/v76+vr////+/v78/Pz5+fn////9/f3+/v79/f39/f3+/v7+/v7+/v79/f3+/v79/f3////yrZrxAAAAN3RSTlMAAvz05wntcyYZBb3h1McP3JTMLMJa+LSqMaVEDKCPItiuOh6CfngTuWQ1FtFUmWBPi4ZpSm1AuDPJ8gAAEYVJREFUeNrs1d1uEkEYBuDdthbLjwJakBaKtrQpNgqoZO7/zpxdMHJAw5L0ZIfnCQnZgYN53/1mNwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3kCeZxv/vxNWpp3ezme9n6vZevn9KvnEFYzv578m34at4ZfJ049plrjRrHUR/hm0n1f3zZOdgbzoo/H5MuwYdO5um2kWEjN9XPRD4Wz7KXVn79MMXMH186CoY1e87jfG6TUS8zTX7TJs2FFenvce0gtcoZBFpzwMu7YLF0/vEiskprlu74u7WRs8phb4cB+fWjH3WdijOBSdZUpnIiaZDstg+8X1/km9B2LS9eYl+HojNy9ZnkgjRdzBNu7rkeenMwF5lt8c7CN0R8k0Mj4Ut/x5lkzeg/f/4UOIDjaySOIZkGejbqhkchoTkGcvX8NZpQlo1L+RuP/lZcxSSS87AXl21alWSPzTXf0nIPtdJKloVv+4FU5EK1S3qvcExL0/hmP8qXXcanrhGL06T0Dc+Soc5fwve+eiljYQROFzFqRWLkVFwGotQkVFLGit8/5v1jb9/Eo/bySZJLOb/d+AzOywlzNnQr8LJ27lN/WoAQTOJCXn3v7arSAum5IKv/cBZ5KaW39/7VbciZNUeHs+Zqb4S28PIbPbkPTc+5kByf9/LAGbMOM3mfuXAcwafxl591tTsNORjBngH/eSjcYuwuVWMnINryDwTbLyA+GyLy5rBnhWGOeSESefESynPcnMLbyBwAfJzsElQuXpDBD87vin5KAV7m3gVPJw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"},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13}},r=i(1),o=i.n(r),s=i(2),a=i.n(s),l=i(9),u=i.n(l),h=i(3),c=i.n(h),f=i(5),d=i.n(f),v=i(6),g=i.n(v),p=i(0),y=i.n(p),m={preRenderedFont:{},lastKey:-1,preRenderFont:function(t,e,i,n){t.push("?"),t.push(" "),t.push("A");for(var r=0;r<t.length;r++){var o=document.createElement("canvas"),s=o.getContext("2d");s.font=e+"px "+n;var a=s.measureText(t[r]).width;o.width=a,o.height=e+e/6,s.font=e+"px "+n,s.fillStyle=i,s.textBaseline="top",s.fillText(t[r],0,0),this.preRenderedFont[t[r]]=o}},drawImage:function(t,e,i,n,r,o,s,a,l,u,h,c){this.drawImageWrapper(t,e,i,n,r,o,s,a,l,u,h,c)},drawImageData:function(t,e,i,n,r,o,s,a,l,u,h,c){this.drawImageWrapper(t,e,i,n,r,o,s,a,l,u,h,c)},drawImageWrapper:function(t,e,i,n,r,o,s,a,l,u,h,c){i=null==i||isNaN(i)?null:Math.round(i),n=null==n||isNaN(n)?null:Math.round(n),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),s=null==s||isNaN(s)?null:Math.round(s),a=null==a||isNaN(a)?null:Math.round(a),l=null==l||isNaN(l)?null:Math.round(l),u=null==u||isNaN(u)?null:Math.round(u),h=null!=h&&h,null!=(c=null==c||isNaN(c)?null:c)&&(t.save(),t.translate(i+r/2,n+o/2),t.rotate(c*Math.PI/180),i=-r/2,n=-o/2),h&&t.clearRect(i,n,r,o),null!=t&&null!=e&&(null!=s&&null!=a&&null!=l&&null!=u?t.drawImage(e,s,a,l,u,i,n,r,o):t.drawImage(e,i,n,r,o)),null!=c&&t.restore()},drawText:function(t,e,i,n,r,o,s,a,l,u,h,c){if(t){t.save(),Array.isArray(i)||(t.fillStyle=i,t.strokeStyle=i),t.font=(h?"bold ":"")+n+"px "+r,t.filter="none",u&&(e=this.wrapTextLines(t,e).text);var f=e.split("\n"),d=0,v=0,g=0;"center"==s?l=Math.round(t.canvas.height/2-n*f.length/2):"top"==s?l=5:"bottom"==s&&(l=Math.round(t.canvas.height-n*f.length/2-n/5));for(var p=0;p<f.length;p++){var y=f[p],m=t.measureText(y).width,w=0;if(Array.isArray(i)){var A=p;A>i.length-1&&(A=i.length-1),t.fillStyle=i[A],t.strokeStyle=i[A]}"center"==o?(v=Math.round(t.canvas.width/2-t.measureText(y).width/2),w=Math.round(l+n*p)):"right"==o?(v=Math.round(t.canvas.width-t.measureText(y).width-15),w=Math.round(l+n*p)):"left"==o?(v=5,w=Math.round(l+n*p)):(v=Math.round(a),w=Math.round(l+n*p)),t.fillText(y,v,w),c&&(t.lineWidth=1,t.beginPath(),t.moveTo(v,w+3),t.lineTo(Math.round(v+m),w+3),t.stroke()),m>d&&(d=m),0==p&&(g=w)}return t.restore(),{x:v,y:g,height:n*f.length,width:d}}},wrapText:function(t,e){if(t.length>e){for(var i=e;i>0&&" "!=t[i];i--);if(i>0){var n=t.substring(0,i),r=t.substring(i+1);return n+"\n"+this.wrapText(r,e)}}return t},wrapTextLines:function(t,e,i,n,r,o){if(t&&e){t.save(),t.font=n+"px "+r;for(var s=e.split("\n"),a="",l=i||t.measureText("A").width,u=Math.round(t.canvas.width/l),h=0,c=0,f=0;f<s.length;f++){var d=this.wrapText(s[f],u);a+=d,f<s.length-1&&(a+="\n");for(var v=0;v<d.split("\n").length;v++){var g=t.measureText(d.split("\n")[v]).width;h+=n,g>c&&(c=g)}}return t.restore(),{text:a,height:h,width:c,carWidth:l}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(t,e,i,n,r){t.save(),t.lineCap="round",t.lineWidth=8,t.strokeStyle="#FF0000",t.filter="",t.beginPath();var o=n-e,s=r-i,a=Math.atan2(s,o);t.moveTo(e,i),t.lineTo(n,r),t.moveTo(n,r),t.lineTo(n-20*Math.cos(a-Math.PI/6),r-20*Math.sin(a-Math.PI/6)),t.moveTo(n,r),t.lineTo(n-20*Math.cos(a+Math.PI/6),r-20*Math.sin(a+Math.PI/6)),t.stroke(),t.restore()},clear:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},isFilterHueAvailable:function(){var t=document.createElement("canvas");t.width=5,t.height=5;var e=t.getContext("2d");e.fillStyle="#FF0000",e.filter="hue-rotate(90deg)",e.fillRect(0,0,5,5);var i=e.getImageData(0,0,1,1).data;return 255!=i[0]||0!=i[1]||0!=i[2]},blurCanvas:function(t,e){t.save(),t.filter="blur("+e+"px)",this.drawImageData(t,t.canvas,0,0,t.canvas.width,t.canvas.height),t.restore()},getFontSize:function(t){return Math.floor(parseInt(t.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(t,e,i){if(document.fullscreenElement)document.fullscreenElement==t?(t.width=window.innerWidth,t.height=window.innerHeight):(t.width=e,t.height=i);else if(e>=.85*document.documentElement.clientWidth){var n=e/i;t.width=.85*document.documentElement.clientWidth,t.height=t.width/n}else t.width=e,t.height=i},enableAutoResizeCanvas:function(t,e,i){var n=this;t&&"true"!=t.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(t,e,i),window.addEventListener("resize",(function(){t.setAttribute("autoresize-canvas-event","true"),n.autoResizeCanvas(t,e,i)})))},autoResizeCanvasFullscreen:function(t,e){document.fullscreenElement==(e||t)&&(t.width=window.innerWidth,t.height=window.innerHeight,e&&(e.width=window.innerWidth,e.height=window.innerHeight))},enableAutoResizeCanvasFullscreen:function(t,e){var i=this;t&&"true"!=t.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(t,e),window.addEventListener("resize",(function(){t.setAttribute("autoresizefullscreen-canvas-event","true"),i.autoResizeCanvasFullscreen(t,e)})))},toggleFullscreen:function(t,e){if(t){var i=t.width,n=t.height;if(e&&(e.width=i,e.height=n),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(e||t).requestFullscreen?(e||t).requestFullscreen():(e||t).mozRequestFullScreen?(e||t).mozRequestFullScreen():(e||t).webkitRequestFullscreen?(e||t).webkitRequestFullscreen():(e||t).msRequestFullscreen?(e||t).msRequestFullscreen():(e||t).oRequestFullscreen&&(e||t).oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(t,e),"true"!=t.getAttribute("fullscreenchange-canvas-event")){t.setAttribute("fullscreenchange-canvas-event","true");var r=function(){document.fullscreenElement!=(e||t)&&(t.width=i,t.height=n,e&&(e.width=i,e.height=n))};void 0!==document.onfullscreenchange?document.onfullscreenchange=r:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=r:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=r:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=r:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=r)}}}},w=function(){function t(e,i,n,r,s,a,l,u){o()(this,t),this.x=e||0,this.y=i||0,this.initialX=e,this.initialY=i,this._width=n,this._height=r,this.alignement=s||"default",this.verticalAlignement=a||"default",this.canvasContext2d,this.triggersClick=[],this.triggersHover=[],this.triggersDown=[],this.triggersScroll=[],this.init=!1,this.initEvents=!1,this.selected=!1,this.clicked=!1,this.hovered=!1,this.disabled=!1,this.disableAnimation=l||!1,this.scrollDisabled=u||!1,this.offsetScrollX=0,this.offsetScrollY=0,this.touchEventStartX=0,this.touchEventStartY=0,this.touchEventStartTimestamp=0,this.tooltip}return a()(t,[{key:"draw",value:function(t){var e=this,i=t.canvas,n=i.getContext("2d");if(this.canvasContext2d=n,!this.initEvent&&null!=n){i.addEventListener("mousemove",(function(t){if(e.disabled)e.hovered=!1,e.clicked=!1,e.tooltip&&(e.tooltip.disabled=!0);else if(e.isInside(e.getMousePos(i,t))){if(null==e.triggersHover||e.disabled||e.triggersHover.forEach((function(t){return t()})),e.tooltip){var n=e.getMousePos(i,t);e.tooltip.x=n.x+10,e.tooltip.y=n.y+10,e.tooltip.disabled=!1}e.hovered=!0}else e.hovered=!1,e.tooltip&&(e.tooltip.disabled=!0)}),!1),i.addEventListener("click",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(i,t))?(null!=e.triggersClick&&e.triggersClick.forEach((function(t){return t()})),e.selected=!0):(e.clicked=!1,e.selected=!1)}),!1),i.addEventListener("mousedown",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(i,t))?(null!=e.triggersDown&&e.triggersDown.forEach((function(t){return t()})),e.clicked=!0):e.clicked=!1}),!1),i.addEventListener("mouseup",(function(){e.clicked=!1}),!1),i.addEventListener("wheel",(function(t){!e.hovered||e.disabled||e.scrollDisabled||(e.offsetScrollX+=t.deltaX,e.offsetScrollY+=t.deltaY,null!=e.triggersScroll&&e.triggersScroll.forEach((function(e){return e(t.deltaX,t.deltaY)})))})),i.addEventListener("touchstart",(function(t){var n=t.changedTouches[0],r=e.getMousePos(i,n);e.isInside(r)?(e.hovered=!0,e.selected=!0):(e.hovered=!1,e.selected=!1),e.hovered&&!e.disabled&&(e.touchEventStartX=r.x,e.touchEventStartY=r.y,e.touchEventStartTimestamp=t.timestamp)}));var r=function(t){var n=t.changedTouches[0],r=e.getMousePos(i,n);!e.hovered||e.disabled||e.scrollDisabled||(e.offsetScrollX+=e.touchEventStartX-r.x,e.offsetScrollY+=e.touchEventStartY-r.y,null!=e.triggersScroll&&e.triggersScroll.forEach((function(t){return t(e.touchEventStartX-r.x,e.touchEventStartY-r.y)})),e.touchEventStartX=r.x,e.touchEventStartY=r.y)};i.addEventListener("touchend",r),i.addEventListener("touchmove",(function(t){r(t),t.preventDefault()}))}this.disabled&&(this.selected=!1,this.clicked=!1,this.hovered=!1,this.tooltip&&(this.tooltip.disabled=!0)),this.initEvent=!0}},{key:"getMousePos",value:function(t,e){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}},{key:"isInside",value:function(t){return t.x>this.x&&t.x<this.x+this.width&&t.y<this.y+this.height&&t.y>this.y}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"setClickAction",value:function(t){this.triggersClick=[t]}},{key:"addClickAction",value:function(t){this.triggersClick.push(t)}},{key:"removeClickAction",value:function(t){this.triggersClick=this.triggersClick.filter((function(e){return e!=t}))}},{key:"removeAllClickActions",value:function(){this.triggersClick=[]}},{key:"setHoverAction",value:function(t){this.triggersHover=[t]}},{key:"addHoverAction",value:function(t){this.triggersHover.push(t)}},{key:"removeHoverAction",value:function(t){this.triggersHover=this.triggersHover.filter((function(e){return e!=t}))}},{key:"removeAllHoverActions",value:function(){this.triggersHover=[]}},{key:"setDownAction",value:function(t){this.triggersDown=[t]}},{key:"addDownAction",value:function(t){this.triggersDown.push(t)}},{key:"removeDownAction",value:function(t){this.triggersDown=this.triggersDown.filter((function(e){return e!=t}))}},{key:"removeAllDownActions",value:function(){this.triggersDown=[]}},{key:"setScrollAction",value:function(t){this.triggersScroll=[t]}},{key:"addScrollAction",value:function(t){this.triggersScroll.push(t)}},{key:"removeScrollAction",value:function(t){this.triggersScroll=this.triggersScroll.filter((function(e){return e!=t}))}},{key:"removeAllScrollActions",value:function(){this.triggersScroll=[]}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}}]),t}();function A(t){return function(){var e,i=y()(t);if(b()){var n=y()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return g()(this,e)}}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var x=function(t){d()(i,t);var e=A(i);function i(t,r,s,a,l,u,h,c,f,d,v,g,p,y,m){var w;return o()(this,i),(w=e.call(this,r,s,c,f,a,m)).autoWidth=null==w.width,w.autoHeight=null==w.height,w.text=t,w.fontSizeInitial=d,w.fontSize=w.fontSizeInitial||Math.floor(n.Setting.FONT_SIZE/1.25),w.fontFamily=v||n.Setting.FONT_FAMILY,w.fontColor=g||"white",w.color=l||"rgba(0, 0, 0, 0)",w.colorHover=u||"#95a5a6",w.colorDown=h||"#727F80",w.image,w.imgSrc=p,w.imageLoader=y,w}return a()(i,[{key:"draw",value:function(t){c()(y()(i.prototype),"draw",this).call(this,t);var e=t.canvas,r=e.getContext("2d");r.save(),this.fontSize=this.fontSizeInitial||Math.floor(n.Setting.FONT_SIZE/1.25),r.font=this.fontSize+"px "+this.fontFamily;var o=this.textWrapped,s=o.text.split("\n").length,a=o.width;if(null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),"center"==this.alignement?this.x=e.width/2-this.width/2-this.initialX:"right"==this.alignement?this.x=e.width-this.width-5-this.initialX:"left"==this.alignement&&(this.x=5),"bottom"==this.verticalAlignement?this.y=e.height-this.height-5-this.initialY:"center"==this.verticalAlignement?this.y=e.height/2-this.height/2-this.initialY:"top"==this.verticalAlignement&&(this.y=15),this.hovered&&this.clicked?r.fillStyle=this.colorDown:this.hovered?r.fillStyle=this.colorHover:r.fillStyle=this.color,r.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.selected){var l=r.strokeStyle,u=r.lineWidth;r.strokeStyle="#a2cdd8",r.lineWidth=3,r.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),r.strokeStyle=l,r.lineWidth=u}if(null!=this.image){var h,f;if(this.image.width>this.width||this.image.height>this.height){var d=this.image.width/this.image.height;h=Math.floor(this.width/1.25),f=Math.floor(h/d)}var v=this.x+this.width/2-h/2,g=this.y+this.height/2-f/2;m.drawImage(r,this.image,Math.round(v),Math.round(g),Math.round(h),Math.round(f))}else if(null!=this.text){r.textBaseline="middle",r.fillStyle=this.fontColor;var p=this.x+this.width/2-a/2,w=this.y+this.height/2-(s-1)*(this.fontSize/2);m.drawText(r,this.text,this.fontColor,this.fontSize,this.fontFamily,"center"==this.alignement?"center":"default","default",Math.round(p),Math.round(w),!0)}r.restore()}},{key:"loadImage",value:function(t){this.image=t.get(this.imgSrc)}},{key:"textWrapped",get:function(){return m.wrapTextLines(this.canvasContext2d,this.text,null,this.fontSize,this.fontFamily)}},{key:"height",get:function(){if(this.image){var t=this.image.height;if(this.autoHeight)return 1.5*t}else if(this.text){var e=this.textWrapped.height;if(this.autoHeight)return e+this.fontSize/1.5}return c()(y()(i.prototype),"height",this)},set:function(t){u()(y()(i.prototype),"height",t,this,!0),this.autoHeight=!1}},{key:"width",get:function(){if(this.image){var t=this.image.width;if(this.autoWidth)return 1.25*t}else if(this.text){var e=this.textWrapped,n=e.width;if(this.autoWidth)return n+2*e.carWidth}return c()(y()(i.prototype),"width",this)},set:function(t){u()(y()(i.prototype),"width",t,this,!0),this.autoWidth=!1}}]),i}(w),S=function(t){d()(i,t);var e=A(i);function i(t,n,r,s,a,l,u,h,c,f){return o()(this,i),e.call(this,null,n,r,s,h,c,null,l,u,null,null,null,t,f,a)}return i}(x),k=function(){function t(){o()(this,t),this.images={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}return a()(t,[{key:"load",value:function(t,e){var i=this;if(this.firstImage&&(this.nbImagesToLoad=t.length,this.firstImage=!1),!(t.length>0))return e();this.loadImage(t[0],(function(n){if(1!=n)return i.hasError=!0,e();t.shift(),i.load(t,e)}))}},{key:"loadImage",value:function(t,e){var i=this;this.triedLoading++;var n=new Image;n.src=t,n.onload=function(){return null==i.images?e(!1):(i.images[t]=n,i.triedLoading=0,e(!0))},n.onerror=function(){if(i.triedLoading>=5)return null!=i.images&&(i.images[t]=n),i.triedLoading=0,e(!1);setTimeout((function(){i.loadImage(t,e)}),250)}}},{key:"get",value:function(t){return null!=this.images?this.images[t]:null}},{key:"clear",value:function(){this.images=null}}]),t}();function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var T=function(t){d()(r,t);var e,i=(e=r,function(){var t,i=y()(e);if(C()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function r(t,e,s,a,l,u,h,c,f){var d;return o()(this,r),(d=i.call(this,0,0,0,0,null,null,f)).text=t,d.textColor=null==e?"rgba(255, 255, 255, 0.75)":e,d.backgroundColor=null==s?"rgba(46, 204, 113, 0.5)":s,d.delayBeforeClosing=null==a?5:a,d.fontSizeInitial=u,d.fontSize=d.fontSizeInitial||Math.floor(n.Setting.FONT_SIZE/1.25),d.fontFamily=null==h?n.Setting.FONT_FAMILY:h,d.animationDelay=null==l?500:l,d.foreGround=null!=c&&c,d.timeLastFrame=0,d.animationTime=0,d.closed=!0,d.closing=!1,d.closeButton=new S(null,null,5,"right",null,32,32),d.closeButton.image=new Image,d.closeButton.image.src=n.Setting.CLOSE_ICON,d}return a()(r,[{key:"draw",value:function(t){var e=this;if(null!=this.text){c()(y()(r.prototype),"draw",this).call(this,t);var i=t.canvas,o=i.getContext("2d");o.save(),this.init||(this.timeLastFrame=Date.now()),null!=this.closeButton&&this.closeButton.setClickAction((function(){e.close()}));var s=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.fontSize=this.fontSizeInitial||n.Setting.FONT_SIZE;var a=m.wrapTextLines(o,this.text,null,this.fontSize,this.fontFamily).height+this.fontSize/2,l=i.width,u=1;if(this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=s:this.animationTime+=s,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed)this.disableCloseButton();else{this.disableAnimation||(u=this.animationTime/this.animationDelay);var h=i.height-a*(u<=1?u:1);o.fillStyle=this.backgroundColor,o.fillRect(0,h,l,a),m.drawText(o,this.text,this.textColor,this.fontSize,this.fontFamily,"center","default",null,h+this.fontSize,!0),null!=this.closeButton&&(this.closeButton.y=h+5,this.closeButton.draw(o)),this.enableCloseButton()}o.restore(),this.init=!0}}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof x&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof x&&this.closeButton.enable()}},{key:"copy",value:function(){return new r(this.text,this.textColor,this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.fontSize,this.fontFamily,this.foreGround)}}]),r}(w),E=i(7),R=i.n(E),F=i(8),M=i.n(F),z=i(4),I=i.n(z);function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){d()(r,t);var e,i=(e=r,function(){var t,i=y()(e);if(D()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function r(t,e){var n,s;o()(this,r),s=i.call(this,0,0,0,0),L.set(R()(s),{writable:!0,value:[]});for(var a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];return(n=s).addAll.apply(n,l),s.backgroundColor=t||"rgba(44, 62, 80, 0.75)",s.blurCanvas=e||!1,s.lastKey=null==s.lastKey?-1:s.lastKey,s.selectedComponent=null==s.selectedComponent?0:s.selectedComponent,s.disable(),s}return a()(r,[{key:"draw",value:function(t){var e=this;c()(y()(r.prototype),"draw",this).call(this,t);var i=t.canvas.getContext("2d");if(!this.disabled){this.init||(document.addEventListener("keydown",(function(t){e.disabled||(e.lastKey=t.keyCode)})),this.init=!0),this.blurCanvas&&m.blurCanvas(i,5),i.save(),i.font=this.fontSize+"px "+this.fontFamily,i.fillStyle=this.backgroundColor,i.fillRect(0,0,i.canvas.width,i.canvas.height);var o=0;if(null!=I()(this,L)){this.lastKey==n.Key.UP?this.selectedComponent--:this.lastKey==n.Key.BOTTOM&&this.selectedComponent++,this.selectedComponent>=I()(this,L).length?this.selectedComponent=0:this.selectedComponent<0&&(this.selectedComponent=I()(this,L).length-1),I()(this,L).forEach((function(t){return o+=t.height}));var s=(i.canvas.height-(o||0))/2||0;I()(this,L).forEach((function(t,r){if(t instanceof w){if(t.y=s,t.initialY=s,e.selectedComponent==r?t.selected=!0:t.selected=!1,t.enable(),t.draw(i),e.selectedComponent==r&&e.lastKey==n.Key.ENTER&&null!=t.triggersClick&&t.triggersClick.length>0&&!t.disabled)return e.lastKey=-1,e.selectedComponent=0,void t.triggersClick.forEach((function(t){return t()}));s+=t.height+8}}))}i.restore()}this.lastKey=-1}},{key:"set",value:function(){this.clear(),this.addAll.apply(this,arguments),this.enable()}},{key:"add",value:function(t){this.addAll(t)}},{key:"addAll",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){return I()(t,L).push(e)}))}},{key:"remove",value:function(t){M()(this,L,I()(this,L).filter((function(e){return t!=e})))}},{key:"removeAll",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){return t.remove(e)}))}},{key:"clear",value:function(){M()(this,L,[])}},{key:"disable",value:function(){c()(y()(r.prototype),"disable",this).call(this),I()(this,L).forEach((function(t){return t&&t.disable&&t.disable()}))}},{key:"enable",value:function(){c()(y()(r.prototype),"enable",this).call(this),I()(this,L).forEach((function(t){return t&&t.enable&&t.enable()}))}}]),r}(w),L=new WeakMap;function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var N=function(t){d()(r,t);var e,i=(e=r,function(){var t,i=y()(e);if(P()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function r(t,e,s,a,l,u,h,f,d,v,g,p){var m;return o()(this,r),(m=i.call(this,t,e,s,a)).text=p||"",m.fontSizeInitial=l,m.fontSize=m.fontSizeInitial||Math.floor(n.Setting.FONT_SIZE/1.25),m.fontFamily=u||n.Setting.FONT_FAMILY,m.fontColor=g||"#000000",m.backgroundColor=h||"#ffffff",m.borderColor=f||"#000000",m.borderColorHover=d||"#a2cdd8",m.borderSize=v||3,m.height=null==m.height?m.fontSize+2*m.borderSize:m.height,m.positionStart=0,m.positionEnd=0,m.offsetX=0,m.lastTime=0,m.totalTime=0,m.input=document.createElement("input"),m.input.setAttribute("type","text"),m.input.style.position="absolute",m.input.style.left="-9999px",m.input.addEventListener("input",(function(){return m.totalTime=0})),m.input.addEventListener("blur",(function(){return m.selected=!1})),m.input.addEventListener("focus",(function(){return m.selected=!0})),document.body.appendChild(m.input),m.canvas,m.appendToCanvas=!1,m.noticeLogged=!1,m.canvasTmp=document.createElement("canvas"),c()(y()(r.prototype),"addClickAction",R()(m)).call(R()(m),(function(){return m.click()})),m}return a()(r,[{key:"draw",value:function(t){c()(y()(r.prototype),"draw",this).call(this,t);var e=t.canvas,i=e.getContext("2d");i.save(),this.input.selectionEnd!=this.positionEnd&&(this.totalTime=0),this.canvas&&!this.appendToCanvas?(document.body.removeChild(this.input),this.canvas.container.appendChild(this.input),this.appendToCanvas=!0):this.canvas||this.noticeLogged||(console&&console.warn&&console.warn("Notice: the use of JSGameTools.Canvas is needed for Input components to properly work in fullscreen mode."),this.noticeLogged=!0),this.text=this.input.value,this.positionStart=this.input.selectionStart,this.positionEnd=this.input.selectionEnd;var n=Date.now(),o=0;this.lastTime>0&&(o=n-this.lastTime),this.lastTime=n,this.totalTime+=o,i.fillStyle=this.backgroundColor,i.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),i.strokeStyle=this.selected?this.borderColorHover:this.borderColor,i.lineWidth=this.borderSize,i.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.canvasTmp.width=e.width,this.canvasTmp.height=e.height;for(var s=this.canvasTmp.getContext("2d"),a=this.x+5,l=-1;l<this.text.length;l++){if(l>-1)a+=m.drawText(s,this.text[l],this.fontColor,this.fontSize,this.fontFamily,"default","default",a-this.offsetX,this.y+this.fontSize,!1).width+1;this.positionEnd==l+1&&this.selected&&(this.totalTime<=500?(s.strokeStyle=this.borderColor,s.lineWidth=1,s.beginPath(),s.moveTo(a-this.offsetX,this.y+3),s.lineTo(a-this.offsetX,this.y+this.fontSize),s.stroke()):this.totalTime>1e3&&(this.totalTime=0),this.offsetX=Math.max(0,Math.round(a-this.x-this.width+8)))}m.drawImageData(i,this.canvasTmp,this.x+this.borderSize,this.y+this.borderSize,this.width-2*this.borderSize,this.height-2*this.borderSize,this.x+this.borderSize,this.y+this.borderSize,this.width-2*this.borderSize,this.height-2*this.borderSize),(this.hovered||this.clicked)&&(e.style.cursor="text"),this.selected||(this.totalTime=0),i.restore()}},{key:"click",value:function(){this.input.focus()}}]),r}(w);function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Y=function(t){d()(r,t);var e,i=(e=r,function(){var t,i=y()(e);if(W()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function r(t,e,s,a,l,u,h,c,f,d,v){var g;return o()(this,r),(g=i.call(this,e,s)).text=t,g.color=u||"#000000",g.fontSize=a||n.Setting.FONT_SIZE,g.fontFamily=l||n.Setting.FONT_FAMILY,g.alignement=h||"default",g.verticalAlignement=c||"default",g.wrap=f||!0,g.bold=d||!1,g.underline=v||!1,g}return a()(r,[{key:"draw",value:function(t){c()(y()(r.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save();var i=m.drawText(e,this.text,this.color,this.fontSize,this.fontFamily,this.alignement,this.verticalAlignement,this.initialX,this.initialY,this.wrap,this.bold,this.underline);this.x=i.x,this.y=i.y-this.fontSize,e.restore()}},{key:"height",get:function(){return m.wrapTextLines(this.canvasContext2d,this.text,null,this.fontSize,this.fontFamily).height},set:function(t){u()(y()(r.prototype),"height",t,this,!0)}},{key:"width",get:function(){return m.wrapTextLines(this.canvasContext2d,this.text,null,this.fontSize,this.fontFamily).width},set:function(t){u()(y()(r.prototype),"width",t,this,!0)}}]),r}(w);function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var K=function(t){d()(n,t);var e,i=(e=n,function(){var t,i=y()(e);if(V()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function n(t,e,r,s,a,l,u,h,c,f,d,v,g){var p;return o()(this,n),(p=i.call(this,t,e,r,s,a,l||"#0000EE",c,f,d,v,g||!0)).colorHover=u||"#4D4DFF",p.colorDown=h||"#EE7700",p.initialColor=p.color,p.initialUnderline=p.underline,p}return a()(n,[{key:"draw",value:function(t){c()(y()(n.prototype),"draw",this).call(this,t);var e=t.canvas;this.clicked?(this.underline=!1,this.color=this.colorDown,e.style.cursor="pointer"):this.hovered?(this.underline=!1,this.color=this.colorHover,e.style.cursor="pointer"):(this.underline=this.initialUnderline,this.color=this.initialColor),this.init=!0}}]),n}(Y);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){d()(r,t);var e,i=(e=r,function(){var t,i=y()(e);if(O()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function r(t,e,s,a,l,u,h,c){var f;return o()(this,r),(f=i.call(this,0,0,0,0)).text=t,f.backgroundColor=a||"rgba(255, 255, 255, 0.25)",f.fontColor=l||"#FFFFFF",f.fontSize=e||n.Setting.FONT_SIZE,f.fontFamily=s||n.Setting.FONT_FAMILY,f.wrap=u||!0,f.bold=h||!1,f.underline=c||!1,f.disabled=!0,f}return a()(r,[{key:"draw",value:function(t){if(c()(y()(r.prototype),"draw",this).call(this,t),!this.disabled){var e=t.canvas,i=e.getContext("2d");i.save(),this.x+this.width+10>e.width&&(this.x-=this.width+10),this.y+this.height+10>e.height&&(this.y-=this.height+10),i.fillStyle=this.backgroundColor,i.fillRect(this.x,this.y,this.width+10,this.height+10);var n=m.drawText(i,this.text,this.fontColor,this.fontSize,this.fontFamily,null,null,this.x+5,this.y+this.fontSize,this.wrap,this.bold,this.underline);this.width=n.width,this.height=n.height,i.restore()}}}]),r}(w);function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var X=function(t){d()(n,t);var e,i=(e=n,function(){var t,i=y()(e);if(Z()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function n(){var t,e;return o()(this,n),e=i.call(this,0,0,0,0),H.set(R()(e),{writable:!0,value:[]}),(t=e).addAll.apply(t,arguments),e.canvas,e}return a()(n,[{key:"draw",value:function(t){var e=this;c()(y()(n.prototype),"draw",this).call(this,t);var i=t.canvas,r=i.getContext("2d");r.save(),i.style.cursor="default";var o=I()(this,H).filter((function(t){return t&&t instanceof w&&!(t instanceof B)&&!(t instanceof j)&&!(t instanceof T)})),s=I()(this,H).filter((function(t){return t&&t instanceof B})).filter((function(t){return!t.disabled}))[0],a=I()(this,H).filter((function(t){return t&&t instanceof j})),l=I()(this,H).filter((function(t){return t&&t instanceof N})),u=I()(this,H).filter((function(t){return t&&t instanceof T&&!t.foreGround})),h=I()(this,H).filter((function(t){return t&&t instanceof T&&t.foreGround}));l&&l.forEach((function(t){return t.canvas=e.canvas})),s?o&&o.forEach((function(t){return t.disable()})):o&&o.forEach((function(t){return t.enable()})),o&&o.forEach((function(t){return t.draw(r)})),u&&u.forEach((function(t){return t.draw(r)})),a&&a.forEach((function(t){return t.draw(r)})),s&&s.draw(r),h&&h.forEach((function(t){return t.draw(r)})),r.restore()}},{key:"add",value:function(t){this.addAll(t)}},{key:"addAll",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){return I()(t,H).push(e)}))}},{key:"remove",value:function(t){M()(this,H,I()(this,H).filter((function(e){return t!=e})))}},{key:"removeAll",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){return t.remove(e)}))}},{key:"clear",value:function(){M()(this,H,[])}}]),n}(w),H=new WeakMap;function J(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var q=function(t){d()(n,t);var e,i=(e=n,function(){var t,i=y()(e);if(J()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function n(t,e,r,s,a,l,u,h,c,f,d){var v;return o()(this,n),(v=i.call(this,null,e,r,s,a,l,u,h,c,f,d)).displayFrames=t||!1,v.frames=0,v.lastFrame=0,v.currentFPS=0,v.intervalCountFPS=setInterval((function(){return v.countFPS()}),1e3),v}return a()(n,[{key:"draw",value:function(t){this.text="FPS: "+this.currentFPS+(this.displayFrames?" / Frames: "+this.frames:""),c()(y()(n.prototype),"draw",this).call(this,t),this.frames++}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frames-this.lastFrame),this.lastFrame=this.frames}}]),n}(Y);function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var G=function(t){d()(n,t);var e,i=(e=n,function(){var t,i=y()(e);if(Q()){var n=y()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return g()(this,t)});function n(t,e,r,s,a,l,u,h,c,f,d){var v;return o()(this,n),v=i.call(this,t,e,r,s,f,d,c),U.set(R()(v),{writable:!0,value:0}),_.set(R()(v),{writable:!0,value:0}),v.backgroundColor=a||"#bdc3c7",v.foregroundColor=l||"#27ae60",v.percent=null==u?0:u,M()(R()(v),U,v.percent),v.animationDuration=h||2,v.lastTime=0,v.totalTime=0,v}return a()(n,[{key:"draw",value:function(t){c()(y()(n.prototype),"draw",this).call(this,t);var e=t.canvas,i=e.getContext("2d");i.save();var r=Date.now(),o=0,s=I()(this,U)==this.percent||this.disableAnimation?1:this.totalTime/(1e3*this.animationDuration),a=Math.round(Math.min(this.width,this.width*(I()(this,U)+(this.percent-I()(this,U))*s)));I()(this,U)==this.percent||this.disableAnimation?(this.totalTime=0,this.lastTime=0):(this.lastTime>0&&(o=r-this.lastTime),this.totalTime+=o,this.totalTime>=1e3*this.animationDuration?(M()(this,U,this.percent),this.totalTime=0,this.lastTime=0):this.lastTime=r);var l=this.x,u=this.y;"center"==this.alignement?l=Math.round(e.width/2-this.width/2):"right"==this.alignement?l=Math.round(e.width-(this.width-15)):"left"==this.alignement&&(l=5),"center"==this.verticalAlignement?u=Math.round(e.height/2-this.height/2):"top"==this.verticalAlignement?u=5:"bottom"==this.verticalAlignement&&(u=Math.round(e.height-this.height-5)),i.fillStyle=this.backgroundColor,i.fillRect(l,u,this.width,this.height),i.fillStyle=this.foregroundColor,i.fillRect(l,u,a,this.height),i.restore()}}]),n}(w),U=new WeakMap,_=new WeakMap,$=function(){function t(e,i,n,r,s){o()(this,t),this.width=n||600,this.height=r||400,this.scene=e,this.scene.canvas=this,this.container=document.createElement("div"),this.canvas=i||document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.container.appendChild(this.canvas),this.started=!1,s&&this.autoResize()}return a()(t,[{key:"draw",value:function(){var t=this.canvas.getContext("2d");m.clear(t),scene.draw(t)}},{key:"startDraw",value:function(){var t=this;this.started=!0,requestAnimationFrame((function(){t.started&&(t.draw(),t.startDraw())}))}},{key:"stopDraw",value:function(){this.started=!1}},{key:"appendTo",value:function(t){t.appendChild(this.container)}},{key:"toggleFullscreen",value:function(){m.toggleFullscreen(this.canvas,this.container)}},{key:"autoResize",value:function(){m.enableAutoResizeCanvas(this.canvas,this.width,this.height)}}]),t}()}])}));