!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSGameTools=e():t.JSGameTools=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Constants",(function(){return i})),n.d(e,"Button",(function(){return v})),n.d(e,"ButtonImage",(function(){return m})),n.d(e,"ImageLoader",(function(){return w})),n.d(e,"NotificationMessage",(function(){return M})),n.d(e,"Utils",(function(){return o})),n.d(e,"Menu",(function(){return A})),n.d(e,"Input",(function(){return G}));var i={Setting:{FONT_FAMILY:"sans-serif",FONT_SIZE:32,CARS_TO_PRERENDER:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","Ã—"]},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13}},o={preRenderedFont:{},lastKey:-1,preRenderFont:function(t,e,n,i){t.push("?"),t.push(" "),t.push("A");for(var o=0;o<t.length;o++){var r=document.createElement("canvas"),l=r.getContext("2d");l.font=e+"px "+i;var s=l.measureText(t[o]).width;r.width=s,r.height=e+e/6,l.font=e+"px "+i,l.fillStyle=n,l.textBaseline="top",l.fillText(t[o],0,0),this.preRenderedFont[t[o]]=r}},drawImage:function(t,e,n,i,o,r,l,s,a,u,c,h){this.drawImageWrapper(t,e,n,i,o,r,l,s,a,u,c,h)},drawImageData:function(t,e,n,i,o,r,l,s,a,u,c,h){this.drawImageWrapper(t,e,n,i,o,r,l,s,a,u,c,h)},drawImageWrapper:function(t,e,n,i,o,r,l,s,a,u,c,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),o=null==o||isNaN(o)?null:Math.round(o),r=null==r||isNaN(r)?null:Math.round(r),l=null==l||isNaN(l)?null:Math.round(l),s=null==s||isNaN(s)?null:Math.round(s),a=null==a||isNaN(a)?null:Math.round(a),u=null==u||isNaN(u)?null:Math.round(u),c=null!=c&&c,null!=(h=null==h||isNaN(h)?null:h)&&(t.save(),t.translate(n+o/2,i+r/2),t.rotate(h*Math.PI/180),n=-o/2,i=-r/2),c&&t.clearRect(n,i,o,r),null!=t&&null!=e&&(null!=l&&null!=s&&null!=a&&null!=u?t.drawImage(e,l,s,a,u,n,i,o,r):t.drawImage(e,n,i,o,r)),null!=h&&t.restore()},drawText:function(t,e,n,i,o,r,l,s,a,u,c){t.save(),Array.isArray(n)||(t.fillStyle=n),t.font=(c?"bold ":"")+i+"px "+o,t.filter="none",u&&(e=this.wrapTextLines(t,e).text);var h=e.split("\n");"center"==l?a=t.canvas.height/2-i*h.length/2:"top"==l?a=5:"bottom"==l&&(a=t.canvas.height-i*h.length/2-i/5);for(var f=0;f<h.length;f++){var d=h[f];if(Array.isArray(n)){var g=f;g>n.length-1&&(g=n.length-1),t.fillStyle=n[g]}"center"==r?t.fillText(d,Math.round(t.canvas.width/2-t.measureText(d).width/2),Math.round(a+i*f)):"right"==r?t.fillText(d,Math.round(t.canvas.width-t.measureText(d).width-15),Math.round(a+i*f)):"left"==r?t.fillText(d,5,Math.round(a+i*f)):t.fillText(d,Math.round(s),Math.round(a+i*f))}return t.restore(),{x:s,y:a,height:i*h.length}},drawTextBitmap:function(t,e,n,o,r,l,s){if(null!=e&&null!=e||(this.preRenderedFont={},this.preRenderFont(i.Setting.CARS_TO_PRERENDER,2*i.Setting.FONT_SIZE,"white",i.Setting.FONT_FAMILY),e=this.preRenderedFont),s){var a=e.A;n=this.wrapTextLines(t,n,a.width*(o/a.height),o).text}for(var u=n.split("\n"),c=l,h=0;h<u.length;h++){for(var f=u[h],d=r,g=0;g<f.length;g++){var y=f.charAt(g),p=void 0,v=(p=null==e[y]||null==e[y]?e["?"]:e[y]).width*(o/p.height);this.drawImageData(t,p,d,c,v,o,0,0,p.width,p.height),d+=v}f.length>0&&(c+=o)}},wrapText:function(t,e){if(t.length>e){for(var n=e;n>0&&" "!=t[n];n--);if(n>0){var i=t.substring(0,n),o=t.substring(n+1);return i+"\n"+this.wrapText(o,e)}}return t},wrapTextLines:function(t,e,n,i,o){if(t&&e){t.save(),t.font=i+"px "+o;for(var r=e.split("\n"),l="",s=n||t.measureText("A").width,a=Math.round(t.canvas.width/s),u=0,c=0,h=0;h<r.length;h++){var f=this.wrapText(r[h],a);l+=f,h<r.length-1&&(l+="\n");for(var d=0;d<f.split("\n").length;d++){var g=t.measureText(f.split("\n")[d]).width;u+=parseFloat(i),g>c&&(c=g)}}return t.restore(),{text:l,height:u,width:c,carWidth:s}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(t,e,n,i,o){t.save(),t.lineCap="round",t.lineWidth=8,t.strokeStyle="#FF0000",t.filter="",t.beginPath();var r=i-e,l=o-n,s=Math.atan2(l,r);t.moveTo(e,n),t.lineTo(i,o),t.moveTo(i,o),t.lineTo(i-20*Math.cos(s-Math.PI/6),o-20*Math.sin(s-Math.PI/6)),t.moveTo(i,o),t.lineTo(i-20*Math.cos(s+Math.PI/6),o-20*Math.sin(s+Math.PI/6)),t.stroke(),t.restore()},clear:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},isFilterHueAvailable:function(){var t=document.createElement("canvas");t.width=5,t.height=5;var e=t.getContext("2d");e.fillStyle="#FF0000",e.filter="hue-rotate(90deg)",e.fillRect(0,0,5,5);var n=e.getImageData(0,0,1,1).data;return 255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(t,e){t.save(),t.filter="blur("+e+"px)",this.drawImageData(t,t.canvas,0,0,t.canvas.width,t.canvas.height),t.restore()},getFontSize:function(t){return Math.floor(parseInt(t.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(t,e,n){if(document.fullscreenElement)document.fullscreenElement==t?(t.width=window.innerWidth,t.height=window.innerHeight):(t.width=e,t.height=n);else if(e>=.85*document.documentElement.clientWidth){var i=e/n;t.width=.85*document.documentElement.clientWidth,t.height=t.width/i}else t.width=e,t.height=n},enableAutoResizeCanvas:function(t,e,n){var i=this;t&&"true"!=t.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(t,e,n),window.addEventListener("resize",(function(){t.setAttribute("autoresize-canvas-event","true"),i.autoResizeCanvas(t,e,n)})))},autoResizeCanvasFullscreen:function(t){document.fullscreenElement==t&&(t.width=window.innerWidth,t.height=window.innerHeight)},enableAutoResizeCanvasFullscreen:function(t){var e=this;t&&"true"!=t.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(t),window.addEventListener("resize",(function(){t.setAttribute("autoresizefullscreen-canvas-event","true"),e.autoResizeCanvasFullscreen(t)})))},toggleFullscreen:function(t){if(t){var e=t.width,n=t.height;if(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.oRequestFullscreen&&t.oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(t),"true"!=t.getAttribute("fullscreenchange-canvas-event")){t.setAttribute("fullscreenchange-canvas-event","true");var i=function(){document.fullscreenElement!=t&&(t.width=e,t.height=n)};void 0!==document.onfullscreenchange?document.onfullscreenchange=i:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=i:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=i:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=i:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=i)}}}};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e||0,this.y=n||0,this.initialX=e,this.initialY=n,this.width=i,this.height=o,this.triggersClick=[],this.triggersHover=[],this.triggersDown=[],this.initEvents=!1,this.selected=!1,this.clicked=!1,this.hovered=!1,this.init=!1}var e,n,i;return e=t,(n=[{key:"draw",value:function(t){var e=this,n=t.canvas,i=n.getContext("2d");this.initEvent||null==i||(i.canvas.addEventListener("mousemove",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(i.canvas,t))?(null==e.triggersHover||e.disabled||e.triggersHover.forEach((function(t){return t()})),e.hovered=!0):e.hovered=!1}),!1),i.canvas.addEventListener("click",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(n,t))?null!=e.triggersClick&&e.triggersClick.forEach((function(t){return t()})):e.clicked=!1}),!1),i.canvas.addEventListener("mousedown",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(n,t))?(null!=e.triggersDown&&e.triggersDown.forEach((function(t){return t()})),e.clicked=!0):e.clicked=!1}),!1),i.canvas.addEventListener("mouseup",(function(){e.clicked=!1}),!1)),this.initEvent=!0}},{key:"getMousePos",value:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}},{key:"isInside",value:function(t){return t.x>this.x&&t.x<this.x+this.width&&t.y<this.y+this.height&&t.y>this.y}},{key:"addClickAction",value:function(t){this.triggersClick.push(t)}},{key:"removeClickAction",value:function(t){this.triggersClick=this.triggersClick.filter((function(e){return e!=t}))}},{key:"removeAllClickActions",value:function(){this.triggersClick=[]}},{key:"addMouseOverAction",value:function(t){this.triggersHover.push(t)}},{key:"removeHoverAction",value:function(t){this.triggersHover=this.triggersHover.filter((function(e){return e!=t}))}},{key:"removeAllHoverActions",value:function(){this.triggersHover=[]}},{key:"addMouseDownAction",value:function(t){this.triggersDown.push(t)}},{key:"removeDownAction",value:function(t){this.triggersDown=this.triggersDown.filter((function(e){return e!=t}))}},{key:"removeAllDownActions",value:function(){this.triggersDown=[]}}])&&r(e.prototype,n),i&&r(e,i),t}();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function h(t){return function(){var e,n=g(t);if(d()){var i=g(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){y(s,t);var e,n,r,l=h(s);function s(t,e,n,o,r,u,c,h,f,d,g,y,p,v,m){var b;return a(this,s),(b=l.call(this,e,n,h,f)).autoWidth=null==b.width,b.autoHeight=null==b.height,b.text=t,b.fontSizeInitial=d,b.fontSize=b.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),b.fontFamily=g||i.Setting.FONT_FAMILY,b.fontColor=y||"white",b.color=r||"rgba(0, 0, 0, 0)",b.colorHover=u||"#95a5a6",b.colorDown=c||"#727F80",b.disabled=!1,b.alignement=o||"default",b.image,b.imgSrc=p,b.verticalAlignement=m||"default",b.imageLoader=v,b}return e=s,(n=[{key:"draw",value:function(t){c(g(s.prototype),"draw",this).call(this,t);var e=t.canvas,n=e.getContext("2d");n.save(),this.fontSize=this.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),n.font=this.fontSize+"px "+this.fontFamily;var r=o.wrapTextLines(n,this.text,null,this.fontSize,this.fontFamily),l=r.height,a=r.width;if(null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image){var u=this.image.width,h=this.image.height;this.autoWidth&&(this.width=1.25*u),this.autoHeight&&(this.height=1.5*h)}else null!=this.text&&(this.autoWidth&&(this.width=a+2*r.carWidth),this.autoHeight&&(this.height=l+this.fontSize/1.5));if("center"==this.alignement?this.x=e.width/2-this.width/2-this.initialX:"right"==this.alignement?this.x=e.width-this.width-5-this.initialX:"left"==this.alignement&&(this.x=5),"bottom"==this.verticalAlignement?this.y=e.height-this.height-5-this.initialY:"center"==this.verticalAlignement?this.y=e.height/2-this.height/2-this.initialY:"top"==this.verticalAlignement&&(this.y=15),this.hovered&&this.clicked?n.fillStyle=this.colorDown:this.hovered?n.fillStyle=this.colorHover:n.fillStyle=this.color,n.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.selected){var f=n.strokeStyle,d=n.lineWidth;n.strokeStyle="#a2cdd8",n.lineWidth=3,n.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),n.strokeStyle=f,n.lineWidth=d}if(null!=this.image){var y,p;if(this.image.width>this.width||this.image.height>this.height){var v=this.image.width/this.image.height;y=Math.floor(this.width/1.25),p=Math.floor(y/v)}var m=this.x+this.width/2-y/2,b=this.y+this.height/2-p/2;n.drawImage(this.image,Math.round(m),Math.round(b),Math.round(y),Math.round(p))}else if(null!=this.text){n.fillStyle=this.fontColor;var w=this.x+this.width/2-a/2,S=this.y+this.fontSize+this.fontSize/5;o.drawText(n,this.text,this.fontColor,this.fontSize,this.fontFamily,"center"==this.alignement?"center":"default","default",Math.round(w),Math.round(S),!0)}n.restore()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"loadImage",value:function(t){this.image=t.get(this.imgSrc)}}])&&u(e.prototype,n),r&&u(e,r),s}(l),m=function(t){y(n,t);var e=h(n);function n(t,i,o,r,l,s,u,c,h,f){return a(this,n),e.call(this,null,i,o,r,c,h,null,s,u,null,null,null,t,f,l)}return n}(v);function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.images={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}var e,n,i;return e=t,(n=[{key:"load",value:function(t,e){var n=this;if(this.firstImage&&(this.nbImagesToLoad=t.length,this.firstImage=!1),!(t.length>0))return e();this.loadImage(t[0],(function(i){if(1!=i)return n.hasError=!0,e();t.shift(),n.load(t,e)}))}},{key:"loadImage",value:function(t,e){var n=this;this.triedLoading++;var i=new Image;i.src=t,i.onload=function(){return null==n.images?e(!1):(n.images[t]=i,n.triedLoading=0,e(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[t]=i),n.triedLoading=0,e(!1);setTimeout((function(){n.loadImage(t,e)}),250)}}},{key:"get",value:function(t){return null!=this.images?this.images[t]:null}},{key:"clear",value:function(){this.images=null}}])&&b(e.prototype,n),i&&b(e,i),t}();function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function k(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,n,r,l,s=(e=a,function(){var t,n=T(e);if(R()){var i=T(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k(this,t)});function a(t,e,n,o,r,l,u,c,h,f){var d;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(d=s.call(this,0,0,0,0)).text=t,d.textColor=null==e?"rgba(255, 255, 255, 0.75)":e,d.backgroundColor=null==n?"rgba(46, 204, 113, 0.5)":n,d.delayBeforeClosing=null==o?5:o,d.fontSizeInitial=l,d.fontSize=d.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),d.fontFamily=null==u?i.Setting.FONT_FAMILY:u,d.animationDelay=null==r?500:r,d.foreGround=null!=c&&c,d.timeLastFrame=0,d.animationTime=0,d.closed=!0,d.closing=!1,d.disableAnimation=null!=h&&h,d.closeButton=f,d}return n=a,(r=[{key:"draw",value:function(t,e){var n=this;if(null!=this.text){O(T(a.prototype),"draw",this).call(this,t);var r=t.canvas,l=r.getContext("2d");l.save(),this.init||(this.timeLastFrame=Date.now()),this.closeButton=null!=e?e:this.closeButton,null!=this.closeButton&&this.closeButton.addClickAction((function(){n.close()}));var s=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.fontSize=this.fontSizeInitial||i.Setting.FONT_SIZE;var u=o.wrapTextLines(l,this.text,null,this.fontSize,this.fontFamily).height+this.fontSize/2,c=r.width,h=1;if(this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=s:this.animationTime+=s,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed)this.disableCloseButton();else{this.disableAnimation||(h=this.animationTime/this.animationDelay);var f=r.height-u*(h<=1?h:1);l.fillStyle=this.backgroundColor,l.fillRect(0,f,c,u),o.drawText(l,this.text,this.textColor,this.fontSize,this.fontFamily,"center","default",null,f+this.fontSize,!0),null!=this.close&&null!=this.closeButton&&(this.closeButton.y=f+5),null!=this.closeButton&&this.closeButton.draw(l),this.disableCloseButton()}l.restore(),this.init=!0}}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof v&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof v&&this.closeButton.enable()}},{key:"copy",value:function(){return new a(this.text,this.textColor,this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.fontSize,this.fontFamily,this.foreGround)}}])&&x(n.prototype,r),l&&x(n,l),a}(l);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function P(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(a,t);var e,n,r,l,s=(e=a,function(){var t,n=_(e);if(z()){var i=_(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return P(this,t)});function a(t,e,n,o,r,l,u,c,h){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(f=s.call(this,0,0,0,0)).buttons=t,f.text=e,f.colors=n||"#FFFFFF",f.fontSizeInitial=o,f.fontSize=f.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),f.fontFamily=r||i.Setting.FONT_FAMILY,f.alignement=l||"center",f.x=u||0,f.backgroundColor=null==c?"rgba(44, 62, 80, 0.75)":c,f.blurCanvas=null!=h&&h,f.disabled=!0,f.lastKey=null==f.lastKey?-1:f.lastKey,f.selectedButton=null==f.selectedButton?0:f.selectedButton,f}return n=a,(r=[{key:"draw",value:function(t){var e=this;I(_(a.prototype),"draw",this).call(this,t);var n=t.canvas.getContext("2d");if(!this.disabled){this.init||(document.addEventListener("keydown",(function(t){e.disabled||(e.lastKey=t.keyCode)})),this.init=!0),this.blurCanvas&&o.blurCanvas(n,5),n.save(),n.font=this.fontSize+"px "+this.fontFamily,n.fillStyle=this.backgroundColor,n.fillRect(0,0,n.canvas.width,n.canvas.height);var r=o.wrapTextLines(n,this.text,null,this.fontSize,this.fontFamily).height,l=0;if(null!=this.buttons){this.lastKey==i.Key.UP?this.selectedButton--:this.lastKey==i.Key.BOTTOM&&this.selectedButton++,this.selectedButton>=this.buttons.length?this.selectedButton=0:this.selectedButton<0&&(this.selectedButton=this.buttons.length-1);for(var s=0;s<this.buttons.length;s++)this.buttons[s].autoHeight?l+=o.wrapTextLines(n,this.buttons[s].text,null,this.fontSize,this.fontFamily).height+16:l+=this.buttons[s].height+5}var u=r+l,c=(n.canvas.height-u)/2+8,h=c+r;if(o.drawText(n,this.text,this.colors,this.fontSize,this.fontFamily,this.alignement,"default",this.x,c,!0),null!=this.buttons)for(var f=0;f<this.buttons.length;f++){if(this.buttons[f].y=h,this.selectedButton==f?this.buttons[f].selected=!0:this.buttons[f].selected=!1,this.buttons[f].enable(),this.buttons[f].draw(n),this.selectedButton==f&&this.lastKey==i.Key.ENTER&&null!=this.buttons[f].triggersClick&&this.buttons[f].triggersClick.length>0&&!this.buttons[f].disabled){this.lastKey=-1,this.selectedButton=0,this.buttons[f].triggersClick.forEach((function(t){return t()}));break}h+=this.buttons[f].height+8}n.restore()}this.lastKey=-1}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"set",value:function(t,e,n,i,o){this.buttons=t,this.text=e,this.colors=n,this.alignement=i||"center",this.x=o||0,this.enable()}}])&&E(n.prototype,r),l&&E(n,l),a}(l);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function L(t,e,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=Y(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function N(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?H(t):e}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t,e,n,i){return(q="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var o,r=Y(t,e);if(r){if((o=Object.getOwnPropertyDescriptor(r,e)).set)return o.set.call(i,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(i,e)){if(!o.writable)return!1;o.value=n,Object.defineProperty(i,e,o)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(i,e,n);return!0})(t,e,n,i)}function Y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z(t)););return t}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(a,t);var e,n,r,l,s=(e=a,function(){var t,n=Z(e);if(W()){var i=Z(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return N(this,t)});function a(t,e,n,o,r,l,u,c,h,f){var d;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(d=s.call(this,t,e,n,o)).text=f||"",d.fontSizeInitial=r,d.fontSize=d.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),d.height=null==d.height?d.fontSize+d.fontSize/2:d.height,d.fontFamily=l||i.Setting.FONT_FAMILY,d.fontColor=h||"#000000",d.backgroundColor=u||"#ffffff",d.borderColor=c||"#000000",d.disabled=!1,d.input=document.createElement("input"),d.input.setAttribute("type","text"),d.input.style.position="absolute",d.input.style.left="-9999px",d.input.addEventListener("input",(function(){return d.text=d.input.value})),document.body.appendChild(d.input),function(t,e,n,i,o){if(!q(t,e,n,i||t)&&o)throw new Error("failed to set property")}(Z(a.prototype),"triggerClick",d.click,H(d),!0),d}return n=a,(r=[{key:"draw",value:function(t){L(Z(a.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),e.fillStyle=this.backgroundColor,e.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),e.strokeStyle=this.borderColor,e.lineWidth=3,e.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),o.drawText(e,this.text,this.fontColor,this.fontSize,this.fontFamily,"default","default",this.x+5,this.y+this.fontSize,!1),e.restore()}},{key:"click",value:function(){this.input.focus()}}])&&D(n.prototype,r),l&&D(n,l),a}(l)}])}));