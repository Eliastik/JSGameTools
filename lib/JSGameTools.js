!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSGameTools=e():t.JSGameTools=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var i=n(11);function r(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},r(e,n,o||e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(12);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(16),r=n(2);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e,n){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}},function(t,e){t.exports=function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}},function(t,e,n){var i=n(11),r=n(7);function o(t,e,n,s){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,o){var s,a=i(t,e);if(a){if((s=Object.getOwnPropertyDescriptor(a,e)).set)return s.set.call(o,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,e)){if(!s.writable)return!1;s.value=n,Object.defineProperty(o,e,s)}else r(o,e,n);return!0})(t,e,n,s)}t.exports=function(t,e,n,i,r){if(!o(t,e,n,i||t)&&r)throw new Error("failed to set property");return n}},function(t,e,n){var i=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}},function(t,e,n){var i=n(12),r=n(17);function o(e,n,s){return r()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},o.apply(null,arguments)}t.exports=o},function(t,e,n){var i=n(18),r=n(19),o=n(20),s=n(21);t.exports=function(t){return i(t)||r(t)||o(t)||s()}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var i=n(13);t.exports=function(t){if(Array.isArray(t))return i(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var i=n(13);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e),n.d(e,"Constants",(function(){return i})),n.d(e,"Button",(function(){return Z})),n.d(e,"ButtonImage",(function(){return $})),n.d(e,"ImageLoader",(function(){return tt})),n.d(e,"NotificationMessage",(function(){return ct})),n.d(e,"Utils",(function(){return X})),n.d(e,"Menu",(function(){return ut})),n.d(e,"Input",(function(){return ft})),n.d(e,"Label",(function(){return pt})),n.d(e,"Link",(function(){return gt})),n.d(e,"Tooltip",(function(){return mt})),n.d(e,"Scene",(function(){return St})),n.d(e,"FPSMeter",(function(){return bt})),n.d(e,"ProgressBar",(function(){return Et})),n.d(e,"Canvas",(function(){return Dt})),n.d(e,"Component",(function(){return _})),n.d(e,"EasingFunctions",(function(){return Ot})),n.d(e,"Col",(function(){return j})),n.d(e,"Container",(function(){return G})),n.d(e,"Row",(function(){return Lt})),n.d(e,"ImageContainer",(function(){return J})),n.d(e,"Arrow",(function(){return Mt})),n.d(e,"Cross",(function(){return st})),n.d(e,"Scrollbar",(function(){return I})),n.d(e,"ScrollbarVertical",(function(){return P})),n.d(e,"ScrollbarHorizontal",(function(){return B})),n.d(e,"Box",(function(){return F}));var i={Setting:{FONT_FAMILY:"sans-serif",FONT_SIZE:28,CANVAS_WIDTH:600,CANVAS_HEIGHT:400,DEFAULT_PADDING:6,DEFAULT_SPACING:6,BUTTON_DEFAULT_BACKGROUND:"rgba(0, 0, 0, 0)",BUTTON_DEFAULT_HOVER_BACKGROUND:"#95a5a6",BUTTON_DEFAULT_CLICK_BACKGROUND:"#727F80",INPUT_DEFAULT_FONT_COLOR:"#000",INPUT_DEFAULT_BACKGROUND_COLOR:"#fff",INPUT_DEFAULT_BORDER_COLOR:"#000",INPUT_DEFAULT_BORDER_COLOR_HOVER:"#a2cdd8",INPUT_DEFAULT_SELECT_COLOR:"#2980b9",LABEL_DEFAULT_FONT_COLOR:"#000",LINK_DEFAULT_COLOR:"#0000EE",LINK_DEFAULT_HOVER_COLOR:"#4D4DFF",LINK_DEFAULT_CLICK_COLOR:"#EE7700",MENU_DEFAULT_BACKGROUND:"rgba(44, 62, 80, 0.75)",MENU_DEFAULT_BLUR_BACKGROUND:!1,NOTIFICATION_DEFAULT_BACKGROUND:"rgba(46, 204, 113, 0.5)",PROGRESS_DEFAULT_BACKGROUND:"#bdc3c7",PROGRESS_DEFAULT_FOREGROUND:"#27ae60",TOOLTIP_DEFAULT_BACKGROUND:"rgba(255, 255, 255, 0.25)",ARROW_DEFAULT_COLOR:"#FF0000",ARROW_DEFAULT_LINE_SIZE:8,ARROW_DEFAULT_HEAD_SIZE:20,CROSS_DEFAULT_COLOR:"#fff",CROSS_DEFAULT_LINE_SIZE:3,SCROLLBAR_DEFAULT_BACKGROUND:"rgb(149, 165, 166, 0.75)",SCROLLBAR_DEFAULT_HOVER_BACKGROUND:"rgb(149, 165, 166, 0.9)",SCROLLBAR_DEFAULT_CLICK_BACKGROUND:"rgb(149, 165, 166, 0.5)",SCROLLBAR_DEFAULT_SIZE:10,BOX_DEFAULT_SELECT_BORDER:"#a2cdd8"},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13,ECHAP:27,TAB:9},Alignement:{RIGHT:"right",LEFT:"left",CENTER:"center"},VerticalAlignement:{TOP:"top",CENTER:"center",BOTTOM:"bottom"}},r=n(3),o=n.n(r),s=n(4),a=n.n(s),c=n(2),l=n.n(c),u=n(10),h=n.n(u),f=n(1),d=n.n(f),p=n(5),v=n.n(p),g=n(6),y=n.n(g),m=n(0),w=n.n(m),S=n(7),R=n.n(S),b=n(9),C=n.n(b),k=n(8),E=n.n(k),T=new WeakMap,A=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,_=function(){function t(e,n,i,r,s,a,c,l,u){o()(this,t),R()(this,"selectable",!0),T.set(this,{writable:!0,value:0}),A.set(this,{writable:!0,value:0}),x.set(this,{writable:!0,value:0}),D.set(this,{writable:!0,value:0}),O.set(this,{writable:!0,value:!1}),E()(this,x,e||0),E()(this,D,n||0),E()(this,T,i),E()(this,A,r),this.alignement=s||"default",this.verticalAlignement=a||"default",this.canvas,this.parent,this.triggersClick=[],this.triggersHover=[],this.triggersDown=[],this.triggersScroll=[],this.triggersMove=[],this.init=!1,this.initEvents=!1,this.selected=!1,this.clicked=!1,this.hovered=!1,E()(this,O,!1),this.disableAnimation=c||!1,this.offsetScrollX=0,this.offsetScrollY=0,this.scrollXDisabled=l||!1,this.scrollYDisabled=u||!1,this.offsetMoveX=0,this.offsetMoveY=0,this.moveEventStartX=0,this.moveEventStartY=0,this.touchEventStartX=0,this.touchEventStartY=0,this.touchEventStartTimestamp=0,this.tooltip}return a()(t,[{key:"draw",value:function(t){var e=this,n=this.canvas&&this.canvas.canvas?this.canvas.canvas:t.canvas;if(!this.initEvents&&null!=n){n.addEventListener("mousemove",(function(t){if(e.disabled)e.hovered=!1,e.clicked=!1,e.tooltip&&(e.tooltip.disabled=!0);else{var i=e.getMousePos(n,t);if(e.clicked){var r=e.moveEventStartX-i.x,o=e.moveEventStartY-i.y;e.offsetMoveX+=r,e.offsetMoveY+=o,null!=e.triggersMove&&e.triggersMove.forEach((function(t){return t(r,o)})),e.moveEventStartX=i.x,e.moveEventStartY=i.y}e.isInside(i)?(null==e.triggersHover||e.disabled||e.triggersHover.forEach((function(t){return t()})),e.tooltip&&(e.tooltip.x=i.x+10,e.tooltip.y=i.y+10,e.tooltip.disabled=!1),e.hovered=!0):(e.hovered=!1,e.tooltip&&(e.tooltip.disabled=!0))}}),!1),n.addEventListener("click",(function(t){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(n,t);e.isInside(i)?(null!=e.triggersClick&&e.triggersClick.forEach((function(t){return t()})),e.selected=!0):(e.clicked=!1,e.selected=!1)}}),!1),n.addEventListener("mousedown",(function(t){if(e.disabled)e.hovered=!1,e.clicked=!1;else{var i=e.getMousePos(n,t);e.isInside(i)&&(null!=e.triggersDown&&e.triggersDown.forEach((function(t){return t()})),e.clicked=!0,e.moveEventStartX=i.x,e.moveEventStartY=i.y)}}),!1),n.addEventListener("mouseup",(function(){e.clicked=!1}),!1),n.addEventListener("wheel",(function(t){!e.hovered||e.disabled||e.scrollDisabled||(e.offsetScrollX+=t.deltaX,e.offsetScrollY+=t.deltaY,null!=e.triggersScroll&&e.triggersScroll.forEach((function(e){return e(t.deltaX,t.deltaY)})))}));var i=function(t){var i=t.changedTouches[0],r=e.getMousePos(n,i);e.isInside(r)?(e.hovered=!0,e.selected=!0):(e.hovered=!1,e.selected=!1),e.hovered&&!e.disabled&&(e.touchEventStartX=r.x,e.touchEventStartY=r.y,e.touchEventStartTimestamp=t.timestamp)};n.addEventListener("touchstart",i),n.addEventListener("touchend",i),n.addEventListener("touchmove",(function(t){!function(t){var i=t.changedTouches[0],r=e.getMousePos(n,i);if(e.hovered&&!e.disabled&&!e.scrollDisabled){var o=e.touchEventStartX-r.x,s=e.touchEventStartY-r.y;e.offsetScrollX+=o,e.offsetScrollY+=s,null!=e.triggersScroll&&e.triggersScroll.forEach((function(t){return t(o,s)})),e.touchEventStartX=r.x,e.touchEventStartY=r.y}}(t),t.preventDefault()}))}this.disabled&&(this.selected=!1,this.clicked=!1,this.hovered=!1,this.tooltip&&(this.tooltip.disabled=!0)),this.initEvents=!0}},{key:"getMousePos",value:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}},{key:"isInside",value:function(t){return t.x>this.x&&t.x<this.x+this.width&&t.y<this.y+this.height&&t.y>this.y}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"setClickAction",value:function(t){this.triggersClick=[t]}},{key:"addClickAction",value:function(t){this.triggersClick.push(t)}},{key:"removeClickAction",value:function(t){this.triggersClick=this.triggersClick.filter((function(e){return e!=t}))}},{key:"removeAllClickActions",value:function(){this.triggersClick=[]}},{key:"setHoverAction",value:function(t){this.triggersHover=[t]}},{key:"addHoverAction",value:function(t){this.triggersHover.push(t)}},{key:"removeHoverAction",value:function(t){this.triggersHover=this.triggersHover.filter((function(e){return e!=t}))}},{key:"removeAllHoverActions",value:function(){this.triggersHover=[]}},{key:"setDownAction",value:function(t){this.triggersDown=[t]}},{key:"addDownAction",value:function(t){this.triggersDown.push(t)}},{key:"removeDownAction",value:function(t){this.triggersDown=this.triggersDown.filter((function(e){return e!=t}))}},{key:"removeAllDownActions",value:function(){this.triggersDown=[]}},{key:"setScrollAction",value:function(t){this.triggersScroll=[t]}},{key:"addScrollAction",value:function(t){this.triggersScroll.push(t)}},{key:"removeScrollAction",value:function(t){this.triggersScroll=this.triggersScroll.filter((function(e){return e!=t}))}},{key:"removeAllScrollActions",value:function(){this.triggersScroll=[]}},{key:"setMoveAction",value:function(t){this.triggersMove=[t]}},{key:"addMoveAction",value:function(t){this.triggersMove.push(t)}},{key:"removeMoveAction",value:function(t){this.triggersMove=this.triggersMove.filter((function(e){return e!=t}))}},{key:"removeAllMoveActions",value:function(){this.triggersMove=[]}},{key:"disabled",get:function(){return C()(this,O)||this.parent&&this.parent.disabled},set:function(t){E()(this,O,t)}},{key:"height",get:function(){return C()(this,A)},set:function(t){E()(this,A,t)}},{key:"width",get:function(){return C()(this,T)},set:function(t){E()(this,T,t)}},{key:"x",get:function(){if(this.alignement&&this.parent){if(this.alignement==i.Alignement.CENTER)return this.parent.x+this.parent.width/2-this.width/2;if(this.alignement==i.Alignement.RIGHT)return this.parent.x+this.parent.width-this.width-5;if(this.alignement==i.Alignement.LEFT)return this.parent.x+5}return C()(this,x)},set:function(t){E()(this,x,t)}},{key:"y",get:function(){if(this.verticalAlignement&&this.parent){if(this.verticalAlignement==i.VerticalAlignement.BOTTOM)return this.parent.y+this.parent.height-this.height-5;if(this.verticalAlignement==i.VerticalAlignement.CENTER)return this.parent.y+this.parent.height/2-this.height/2;if(this.verticalAlignement==i.VerticalAlignement.TOP)return this.parent.y+5}return C()(this,D)},set:function(t){E()(this,D,t)}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}}]),t}();function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var F=function(t){v()(n,t);var e=L(n);function n(t,i,r,s,a,c,u,h,f,d,p,v){var g;return o()(this,n),g=e.call(this,t,i,r,s,h,f,d,p,v),R()(l()(g),"selectable",!1),g.backgroundColor=a,g.backgroundColorHover=c,g.backgroundColorDown=u,g}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),this.drawBackground(e),this.selected&&this.drawBorder(e),e.restore()}},{key:"drawBackground",value:function(t){t.save();var e=null;(e=this.hovered&&this.clicked&&this.backgroundColorDown?this.backgroundColorDown:this.hovered&&this.backgroundColorHover?this.backgroundColorHover:this.backgroundColor)&&(t.fillStyle=e,t.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))),t.restore()}},{key:"drawBorder",value:function(t){this.selectable&&(t.save(),t.strokeStyle=i.Setting.BOX_DEFAULT_SELECT_BORDER,t.lineWidth=3,t.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),t.restore())}}]),n}(_);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var I=function(t){v()(n,t);var e=M(n);function n(t,r,s,a,c){var u;return o()(this,n),u=e.call(this,null,null,null,null,r||i.Setting.SCROLLBAR_DEFAULT_BACKGROUND,s||i.Setting.SCROLLBAR_DEFAULT_HOVER_BACKGROUND,a||i.Setting.SCROLLBAR_DEFAULT_CLICK_BACKGROUND,null,null,null),R()(l()(u),"selectable",!0),u.parent=c,u.size=t||i.Setting.SCROLLBAR_DEFAULT_SIZE,u}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"maxWidth",get:function(){return this.parent?this.parent.maxWidth-Math.abs(Math.min(0,this.parent.x)):0}},{key:"maxHeight",get:function(){return this.parent?this.parent.maxHeight-Math.abs(Math.min(0,this.parent.y)):0}},{key:"contentRatioX",get:function(){return this.parent?this.maxWidth/this.parent.width:0}},{key:"contentRatioY",get:function(){return this.parent?this.maxHeight/this.parent.height:0}},{key:"width",get:function(){return this.maxWidth*this.contentRatioX}},{key:"height",get:function(){return this.maxHeight*this.contentRatioY}},{key:"windowScrollSizeX",get:function(){return this.parent?this.parent.width-this.maxWidth:0}},{key:"windowScrollSizeY",get:function(){return this.parent?this.parent.height-this.maxHeight:0}},{key:"percentScrollbarX",get:function(){return this.parent?this.parent.offsetScrollX/this.windowScrollSizeX:0}},{key:"percentScrollbarY",get:function(){return this.parent?this.parent.offsetScrollY/this.windowScrollSizeY:0}},{key:"scrollAreaSizeX",get:function(){return this.maxWidth-this.width}},{key:"scrollAreaSizeY",get:function(){return this.maxHeight-this.height}},{key:"x",get:function(){return this.parent?Math.abs(this.parent.x)+this.scrollAreaSizeX*this.percentScrollbarX:0}},{key:"y",get:function(){return this.parent?Math.abs(this.parent.y)+this.scrollAreaSizeY*this.percentScrollbarY:0}}]),n}(F);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var B=function(t){v()(n,t);var e=U(n);function n(t,i,r,s,a){var c;return o()(this,n),c=e.call(this,t,i,r,s,a),R()(l()(c),"selectable",!0),c.addMoveAction((function(t,e){c.parent&&(c.parent.offsetScrollX-=t,null!=c.parent.triggersScroll&&c.parent.triggersScroll.forEach((function(e){return e(-t,0)})))})),c}return a()(n,[{key:"draw",value:function(t){this.scrollAreaSizeX>0&&d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"height",get:function(){return this.size}},{key:"y",get:function(){return this.parent?this.parent.y+Math.min(this.parent.height,this.parent.maxHeight)-this.size:null}}]),n}(I);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var P=function(t){v()(n,t);var e=N(n);function n(t,i,r,s,a){var c;return o()(this,n),c=e.call(this,t,i,r,s,a),R()(l()(c),"selectable",!0),c.addMoveAction((function(t,e){c.parent&&(c.parent.offsetScrollY-=e,null!=c.parent.triggersScroll&&c.parent.triggersScroll.forEach((function(t){return t(0,-e)})))})),c}return a()(n,[{key:"draw",value:function(t){this.scrollAreaSizeY>0&&d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"width",get:function(){return this.size}},{key:"x",get:function(){return this.parent?this.parent.x+Math.min(this.parent.width,this.parent.maxWidth)-this.size:0}}]),n}(I);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var H=new WeakMap,W=new WeakMap,K=new WeakMap,G=function(t){v()(n,t);var e=z(n);function n(t,r,s,a,c,u,h,f,d,p,v,g,y,m){var w,S;o()(this,n),S=e.call(this,t,r,null,null,h,f,d,c,u,g,y,m),R()(l()(S),"selectable",!1),H.set(l()(S),{writable:!0,value:[]}),W.set(l()(S),{writable:!0,value:0}),K.set(l()(S),{writable:!0,value:0});for(var b=arguments.length,C=new Array(b>14?b-14:0),k=14;k<b;k++)C[k-14]=arguments[k];return(w=S).addAll.apply(w,C),S.padding=p||0,S.spaceBetweenComponents=v||i.Setting.DEFAULT_SPACING,S.canvasTmp=document.createElement("canvas"),E()(l()(S),W,s),E()(l()(S),K,a),S.scrollbarHorizontal=new B(null,null,null,null,l()(S)),S.scrollbarVertical=new P(null,null,null,null,l()(S)),S.addScrollAction((function(t,e){var n=S.height-S.maxHeight,i=S.width-S.maxWidth;if(S.scrollYDisabled)S.offsetScrollY-=e;else if(n<=0)S.offsetScrollY=0;else{var r=S.offsetScrollY/n;r<=0&&e<0?S.offsetScrollY=Math.min(0,S.y):r>1&&e>0&&(S.offsetScrollY=n)}if(S.scrollXDisabled)S.offsetScrollX-=t;else if(i<=0)S.offsetScrollX=0;else{var o=S.offsetScrollX/i;o<=0&&t<0?S.offsetScrollX=Math.min(0,S.x):o>1&&t>0&&(S.offsetScrollX=i)}})),S}return a()(n,[{key:"draw",value:function(t){var e=this,i=t.canvas.getContext("2d");i.save(),this.components.forEach((function(t){e.canvas&&(t.canvas=e.canvas)})),d()(w()(n.prototype),"draw",this).call(this,t),i.restore()}},{key:"drawVerticalScrollBar",value:function(t){this.scrollbarVertical&&this.scrollbarVertical.draw(t)}},{key:"drawHorizontalScrollBar",value:function(t){this.scrollbarHorizontal&&this.scrollbarHorizontal.draw(t)}},{key:"drawScrollbars",value:function(t){this.scrollXDisabled||this.drawVerticalScrollBar(t),this.scrollYDisabled||this.drawHorizontalScrollBar(t)}},{key:"set",value:function(){this.clear(),this.addAll.apply(this,arguments),this.enable()}},{key:"add",value:function(t){this.addAll(t)}},{key:"addAll",value:function(){for(var t=this,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];i.forEach((function(e){C()(t,H).push(e),e.parent=t,d()(w()(n.prototype),"canvas",t)&&(e.canvas=d()(w()(n.prototype),"canvas",t))}))}},{key:"remove",value:function(t){E()(this,H,C()(this,H).filter((function(e){return t!=e})))}},{key:"clear",value:function(){E()(this,H,[])}},{key:"disable",value:function(){d()(w()(n.prototype),"disable",this).call(this),C()(this,H).forEach((function(t){return t.disable()}))}},{key:"enable",value:function(){d()(w()(n.prototype),"enable",this).call(this),C()(this,H).forEach((function(t){return t.enable()}))}},{key:"components",get:function(){var t=[];return C()(this,H).forEach((function(e){return t.push(e)})),t}},{key:"width",get:function(){return this.parent.width}},{key:"height",get:function(){return this.parent.height}},{key:"maxWidth",get:function(){return(C()(this,W)||this.canvas&&this.canvas.width)+Math.abs(Math.min(0,this.x))},set:function(t){E()(this,W,t)}},{key:"maxHeight",get:function(){return(C()(this,K)||this.canvas&&this.canvas.height)+Math.abs(Math.min(0,this.y))},set:function(t){E()(this,K,t)}},{key:"canvas",set:function(t){h()(w()(n.prototype),"canvas",t,this,!0),C()(this,H).forEach((function(e){e.canvas=t}))},get:function(){return d()(w()(n.prototype),"canvas",this)}}]),n}(F),X={preRenderedFont:{},lastKey:-1,preRenderFont:function(t,e,n,i){t.push("?"),t.push(" "),t.push("A");for(var r=0;r<t.length;r++){var o=document.createElement("canvas"),s=o.getContext("2d");s.font=e+"px "+i;var a=s.measureText(t[r]).width;o.width=a,o.height=e+e/6,s.font=e+"px "+i,s.fillStyle=n,s.textBaseline="top",s.fillText(t[r],0,0),this.preRenderedFont[t[r]]=o}},drawImage:function(t,e,n,i,r,o,s,a,c,l,u,h){this.drawImageWrapper(t,e,n,i,r,o,s,a,c,l,u,h)},drawImageData:function(t,e,n,i,r,o,s,a,c,l,u,h){this.drawImageWrapper(t,e,n,i,r,o,s,a,c,l,u,h)},drawImageWrapper:function(t,e,n,i,r,o,s,a,c,l,u,h){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),s=null==s||isNaN(s)?null:Math.round(s),a=null==a||isNaN(a)?null:Math.round(a),c=null==c||isNaN(c)?null:Math.round(c),l=null==l||isNaN(l)?null:Math.round(l),u=null!=u&&u,null!=(h=null==h||isNaN(h)?null:h)&&(t.save(),t.translate(n+r/2,i+o/2),t.rotate(h*Math.PI/180),n=-r/2,i=-o/2),u&&t.clearRect(n,i,r,o),null!=t&&null!=e&&(null!=s&&null!=a&&null!=c&&null!=l?t.drawImage(e,s,a,c,l,n,i,r,o):t.drawImage(e,n,i,r,o)),null!=h&&t.restore()},drawText:function(t,e,n,r,o,s,a,c,l,u,h,f,d,p){if(t){t.save(),Array.isArray(n)||(t.fillStyle=n,t.strokeStyle=n),t.font=(h?"bold ":"")+r+"px "+o,t.textBaseline=d||"bottom",t.filter="none",u&&(e=this.wrapTextLines(t,e).text);var v=e.split("\n"),g=0,y=Math.round(c),m=Math.round(l)+r,w=0;l||(a==i.VerticalAlignement.CENTER?m+=Math.round((p&&p.height?p.height:t.canvas.height)/2-r*v.length/2):a==i.VerticalAlignement.BOTTOM&&(m+=Math.round((p&&p.height?p.height:t.canvas.height)-r*v.length/2-r/5)));for(var S=0;S<v.length;S++){var R=v[S],b=t.measureText(R).width;if(Array.isArray(n)){var C=S;C>n.length-1&&(C=n.length-1),t.fillStyle=n[C],t.strokeStyle=n[C]}s==i.Alignement.CENTER?y=Math.round(p&&p.x?p.x:0)+Math.round((p&&p.width?p.width:t.canvas.width)/2-t.measureText(R).width/2):s==i.Alignement.RIGHT&&(y=Math.round(p&&p.x?p.x:0)+Math.round((p&&p.width?p.width:t.canvas.width)-t.measureText(R).width-(p&&p.spaceBetweenComponents?p.spaceBetweenComponents:i.Setting.DEFAULT_SPACING))),t.fillText(R,y,m),f&&(t.lineWidth=1,t.beginPath(),t.moveTo(y,m-2),t.lineTo(Math.round(y+b),m-2),t.stroke()),b>g&&(g=b),0==S&&(w=m),m+=r}return t.restore(),{x:y,y:w,height:r*v.length,width:g}}},wrapText:function(t,e){if(t.length>e){for(var n=e;n>0&&" "!=t[n];n--);if(n>0){var i=t.substring(0,n),r=t.substring(n+1);return i+"\n"+this.wrapText(r,e)}}return t},wrapTextLines:function(t,e,n,i,r,o){if(t&&e){t.save(),t.font=i+"px "+r;for(var s=e.split("\n"),a="",c=n||t.measureText("A").width,l=Math.round(t.canvas.width/c),u=0,h=0,f=0;f<s.length;f++){var d=o?s[f]:this.wrapText(s[f],l);a+=d,f<s.length-1&&(a+="\n");for(var p=0;p<d.split("\n").length;p++){var v=t.measureText(d.split("\n")[p]).width;u+=i,v>h&&(h=v)}}return t.restore(),{text:a,height:u,width:h,carWidth:c}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(t,e,n,r,o,s,a,c){t.save(),t.lineCap="round",t.lineWidth=s||i.Setting.ARROW_DEFAULT_LINE_SIZE,t.strokeStyle=c||i.Setting.ARROW_DEFAULT_COLOR,t.filter="",t.beginPath();var l=a||i.Setting.ARROW_DEFAULT_HEAD_SIZE,u=r-e,h=o-n,f=Math.atan2(h,u);t.moveTo(e,n),t.lineTo(r,o),t.moveTo(r,o),t.lineTo(r-l*Math.cos(f-Math.PI/6),o-l*Math.sin(f-Math.PI/6)),t.moveTo(r,o),t.lineTo(r-l*Math.cos(f+Math.PI/6),o-l*Math.sin(f+Math.PI/6)),t.stroke(),t.restore()},drawCross:function(t,e,n,r,o,s,a){t.save(),t.lineCap="round",t.lineWidth=s||i.Setting.CROSS_DEFAULT_LINE_SIZE,t.strokeStyle=a||i.Setting.CROSS_DEFAULT_COLOR,t.filter="",t.beginPath(),t.moveTo(e,n),t.lineTo(e+r,n+o),t.moveTo(e+r,n),t.lineTo(e,n+o),t.stroke(),t.restore()},clear:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},isFilterHueAvailable:function(){var t=document.createElement("canvas");t.width=5,t.height=5;var e=t.getContext("2d");e.save(),e.fillStyle="#FF0000",e.filter="hue-rotate(90deg)",e.fillRect(0,0,5,5);var n=e.getImageData(0,0,1,1).data;return e.restore(),255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(t,e){t.save(),t.filter="blur("+e+"px)",this.drawImageData(t,t.canvas,0,0,t.canvas.width,t.canvas.height),t.restore()},getFontSize:function(t){return Math.floor(parseInt(t.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(t,e,n){if(document.fullscreenElement)document.fullscreenElement==t?(t.width=window.innerWidth,t.height=window.innerHeight):(t.width=e,t.height=n);else if(e>=.85*document.documentElement.clientWidth){var i=e/n;t.width=.85*document.documentElement.clientWidth,t.height=t.width/i}else t.width=e,t.height=n},enableAutoResizeCanvas:function(t,e,n){var i=this;t&&"true"!=t.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(t,e,n),window.addEventListener("resize",(function(){t.setAttribute("autoresize-canvas-event","true"),i.autoResizeCanvas(t,e,n)})))},autoResizeCanvasFullscreen:function(t,e){document.fullscreenElement==(e||t)&&(t.width=window.innerWidth,t.height=window.innerHeight,e&&(e.width=window.innerWidth,e.height=window.innerHeight))},enableAutoResizeCanvasFullscreen:function(t,e){var n=this;t&&"true"!=t.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(t,e),window.addEventListener("resize",(function(){t.setAttribute("autoresizefullscreen-canvas-event","true"),n.autoResizeCanvasFullscreen(t,e)})))},toggleFullscreen:function(t,e){if(t){var n=t.width,i=t.height;if(e&&(e.width=n,e.height=i),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(e||t).requestFullscreen?(e||t).requestFullscreen():(e||t).mozRequestFullScreen?(e||t).mozRequestFullScreen():(e||t).webkitRequestFullscreen?(e||t).webkitRequestFullscreen():(e||t).msRequestFullscreen?(e||t).msRequestFullscreen():(e||t).oRequestFullscreen&&(e||t).oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(t,e),"true"!=t.getAttribute("fullscreenchange-canvas-event")){t.setAttribute("fullscreenchange-canvas-event","true");var r=function(){document.fullscreenElement!=(e||t)&&(t.width=n,t.height=i,e&&(e.width=n,e.height=i))};void 0!==document.onfullscreenchange?document.onfullscreenchange=r:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=r:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=r:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=r:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=r)}}}};function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var j=function(t){v()(n,t);var e=Y(n);function n(t,i,r,s,a,c,u,h,f,d,p,v,g,y){var m;o()(this,n);for(var w=arguments.length,S=new Array(w>14?w-14:0),b=14;b<w;b++)S[b-14]=arguments[b];return m=e.call.apply(e,[this,t,i,r,s,a,c,u,h,f,d,p,v,g,y].concat(S)),R()(l()(m),"selectable",!1),m}return a()(n,[{key:"draw",value:function(t){var e=this;d()(w()(n.prototype),"draw",this).call(this,t);var i,r=t.canvas,o=r.getContext("2d");if(o.save(),this.maxWidth||this.maxHeight?(this.canvasTmp.width=r.width,this.canvasTmp.height=r.height,i=this.canvasTmp.getContext("2d"),X.clear(i)):i=o,null!=d()(w()(n.prototype),"components",this)){var s=this.y+this.padding||this.padding;d()(w()(n.prototype),"components",this).forEach((function(t){s=e.drawComponent(t,s,i)}))}(this.maxWidth||this.maxHeight)&&X.drawImageData(o,this.canvasTmp,this.x,this.y,this.maxWidth,this.maxHeight,this.x,this.y,this.maxWidth,this.maxHeight),d()(w()(n.prototype),"drawScrollbars",this).call(this,o),o.restore()}},{key:"drawComponent",value:function(t,e,n){return t instanceof _&&(this.x&&(t.x=this.x+this.padding-this.offsetScrollX),t.y=e-this.offsetScrollY,t.enable(),t.draw(n),e+=t.height+this.spaceBetweenComponents),e}},{key:"height",get:function(){var t=0;return d()(w()(n.prototype),"components",this).forEach((function(e){return t+=e.height})),t+this.spaceBetweenComponents*(d()(w()(n.prototype),"components",this).length-1)+this.padding}},{key:"width",get:function(){var t=0;return d()(w()(n.prototype),"components",this).forEach((function(e){e.width>t&&(t=e.width)})),t+this.padding}}]),n}(G);function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var Z=function(t){v()(n,t);var e=V(n);function n(t,r,s,a,c,u,h,f,d,p){var v;o()(this,n);for(var g=arguments.length,y=new Array(g>10?g-10:0),m=10;m<g;m++)y[m-10]=arguments[m];return v=e.call.apply(e,[this,t,r,s,a,f,d,c||i.Setting.BUTTON_DEFAULT_BACKGROUND,u||i.Setting.BUTTON_DEFAULT_HOVER_BACKGROUND,h||i.Setting.BUTTON_DEFAULT_CLICK_BACKGROUND,p||i.Setting.DEFAULT_PADDING,p||i.Setting.DEFAULT_SPACING,!1,!0,!0].concat(y)),R()(l()(v),"selectable",!0),v.autoWidth=null==v.width,v.autoHeight=null==v.height,v}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),this.drawBackground(e),this.selected&&this.drawBorder(e),this.drawComponents(e),e.restore()}},{key:"drawComponents",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"drawBackground",value:function(t){t.save(),this.hovered&&this.clicked?t.fillStyle=this.backgroundColorDown:this.hovered?t.fillStyle=this.backgroundColorHover:t.fillStyle=this.backgroundColor,t.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),t.restore()}},{key:"drawBorder",value:function(t){t.save(),t.strokeStyle="#a2cdd8",t.lineWidth=3,t.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),t.restore()}},{key:"height",get:function(){return d()(w()(n.prototype),"height",this)+this.padding},set:function(t){h()(w()(n.prototype),"height",t,this,!0),this.autoHeight=!1}},{key:"width",get:function(){return d()(w()(n.prototype),"width",this)+this.padding},set:function(t){h()(w()(n.prototype),"width",t,this,!0),this.autoWidth=!1}},{key:"maxWidth",get:function(){return this.width}},{key:"maxHeight",get:function(){return this.height}}]),n}(j);function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var J=function(t){v()(n,t);var e=q(n);function n(t,i,r,s,a,c,u,h){var f;return o()(this,n),f=e.call(this,i,r,s,a,c,u),R()(l()(f),"selectable",!1),f.image,f.imgSrc=t,f.imageLoader=h,f}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image&&this.drawImage(e),e.restore()}},{key:"drawImage",value:function(t){X.drawImage(t,this.image,Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"loadImage",value:function(t){this.image=t.get(this.imgSrc)}},{key:"sizes",get:function(){var t=d()(w()(n.prototype),"width",this),e=d()(w()(n.prototype),"height",this);if(this.image&&(this.image.width>d()(w()(n.prototype),"width",this)||this.image.height>d()(w()(n.prototype),"height",this))){var i=this.image.width/this.image.height;t=Math.floor(d()(w()(n.prototype),"width",this)/1.25),e=Math.floor(t/i)}return{width:t,height:e}}},{key:"height",get:function(){return this.sizes.height},set:function(t){h()(w()(n.prototype),"height",t,this,!0)}},{key:"width",get:function(){return this.sizes.width},set:function(t){h()(w()(n.prototype),"width",t,this,!0)}}]),n}(_);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var $=function(t){v()(n,t);var e=Q(n);function n(t,i,r,s,a,c,l,u,h,f){return o()(this,n),e.call(this,i,r,c,l,u,h,null,s,a,null,new J(t,i,r,c,l,s,a,f))}return a()(n,[{key:"loadImage",value:function(t){this.components[0]instanceof J&&this.components[0].loadImage(t)}}]),n}(Z),tt=function(){function t(){o()(this,t),this.images={},this.imagesResized={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}return a()(t,[{key:"load",value:function(t,e){var n=this;if(this.firstImage&&(this.nbImagesToLoad=t.length,this.firstImage=!1),!(t.length>0))return e();this.loadImage(t[0],(function(i){if(1!=i)return n.hasError=!0,e();t.shift(),n.load(t,e)}))}},{key:"loadImage",value:function(t,e){var n=this;this.triedLoading++;var i=new Image;i.src=t,i.onload=function(){return null==n.images?e(!1):(n.images[t]=i,n.triedLoading=0,e(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[t]=i),n.triedLoading=0,e(!1);setTimeout((function(){n.loadImage(t,e)}),250)}}},{key:"get",value:function(t,e,n){if(null!=this.images&&this.images.hasOwnProperty(t)){var i=this.images[t];if(!e&&!n||i.width==e&&i.height==n)return i;var r=Math.round(e),o=Math.round(n),s=t+"@"+r+"-"+o;if(!this.imagesResized.hasOwnProperty(s)){var a=document.createElement("canvas"),c=a.getContext("2d");a.width=r,a.height=o,X.drawImage(c,i,0,0,r,o,0,0,i.width,i.height),this.imagesResized[s]=a}return this.imagesResized[s]}return null}},{key:"clear",value:function(){this.images=null}}]),t}(),et=n(14),nt=n.n(et),it=n(15),rt=n.n(it);function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var st=function(t){v()(n,t);var e=ot(n);function n(t,r,s,a,c,u,h,f){var d;return o()(this,n),d=e.call(this,t,r,s,a,h,f),R()(l()(d),"selectable",!1),d.lineWidth=c||i.Setting.CROSS_DEFAULT_LINE_SIZE,d.color=u||i.Setting.CROSS_DEFAULT_COLOR,d}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");X.drawCross(e,this.x,this.y,this.width,this.height,this.lineWidth,this.color),this.init=!0}},{key:"width",get:function(){return d()(w()(n.prototype),"width",this)+this.lineWidth},set:function(t){h()(w()(n.prototype),"width",t,this,!0)}},{key:"height",get:function(){return d()(w()(n.prototype),"height",this)+this.lineWidth},set:function(t){h()(w()(n.prototype),"height",t,this,!0)}}]),n}(_);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var ct=function(t){v()(n,t);var e=at(n);function n(t,r,s,a,c,u,h,f,d){var p;o()(this,n);for(var v=arguments.length,g=new Array(v>9?v-9:0),y=9;y<v;y++)g[y-9]=arguments[y];return p=e.call.apply(e,[this,0,0,null,null,i.Alignement.CENTER,null,null==t?i.Setting.NOTIFICATION_DEFAULT_BACKGROUND:t,null,null,f||i.Setting.DEFAULT_PADDING,d||i.Setting.DEFAULT_SPACING,u,!1,!1].concat(g)),R()(l()(p),"selectable",!1),p.delayBeforeClosing=null==a?5:a,p.animationDelay=null==c?500:c,p.foreGround=null!=r&&r,p.timeLastFrame=0,p.animationTime=0,p.closed=!0,p.closing=!1,p.easingFunction=h,p.verticalPosition=s||i.VerticalAlignement.BOTTOM,p.closeButton=new Z(null,null,null,null,null,null,null,"right","top",10,new st(null,null,10,10)),p.add(p.closeButton),p}return a()(n,[{key:"draw",value:function(t){var e=this;this.closeButton.canvas=this.canvas;var n=t.canvas,r=n.getContext("2d");r.save(),this.init||(this.timeLastFrame=performance.now()),null!=this.closeButton&&this.closeButton.setClickAction((function(){e.close()}));var o=performance.now()-this.timeLastFrame;this.timeLastFrame=performance.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close();var s=1;this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=o:this.animationTime+=o,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed?this.disableCloseButton():(this.disableAnimation||(s=this.animationTime/this.animationDelay),this.easingFunction&&(s=this.easingFunction(s)),this.verticalPosition==i.VerticalAlignement.TOP?this.y=this.height*(s<=1?s:1)-this.height:this.y=n.height-this.height*(s<=1?s:1),this.drawComponents(r),null!=this.closeButton&&(this.closeButton.y=this.y+this.padding/2,this.closeButton.draw(r)),this.enableCloseButton()),r.restore(),this.init=!0}},{key:"drawComponents",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof Z&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof Z&&this.closeButton.enable()}},{key:"copy",value:function(){return nt()(n,[this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.foreGround,this.disableAnimation,this.easingFunction,this.padding].concat(rt()(this.components)))}},{key:"width",get:function(){return this.canvas?this.canvas.width:null}},{key:"height",get:function(){return d()(w()(n.prototype),"height",this)-this.closeButton.height}}]),n}(j);function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var ut=function(t){v()(n,t);var e=lt(n);function n(t,r){var s;o()(this,n);for(var a=arguments.length,c=new Array(a>2?a-2:0),u=2;u<a;u++)c[u-2]=arguments[u];return s=e.call.apply(e,[this,0,0,null,null,null,i.VerticalAlignement.CENTER,t||i.Setting.MENU_DEFAULT_BACKGROUND,null,null,null,null,null,!1,!1].concat(c)),R()(l()(s),"selectable",!1),s.blurCanvas=r||i.Setting.MENU_DEFAULT_BLUR_BACKGROUND,s.lastKey=null==s.lastKey?-1:s.lastKey,s.selectedComponent=null==s.selectedComponent?0:s.selectedComponent,s.disable(),s}return a()(n,[{key:"draw",value:function(t){var e=this,n=t.canvas.getContext("2d");if(!this.disabled){this.blurCanvas&&this.drawBlur(n),n.save(),this.drawComponents(n),this.init||(document.addEventListener("keydown",(function(t){e.disabled||(e.lastKey=t.keyCode)})),this.init=!0);var r=!1;null!=this.components&&(this.lastKey==i.Key.UP?(this.select(this.selectedComponent-1),r=!0):this.lastKey==i.Key.BOTTOM?(this.select(this.selectedComponent+1),r=!0):this.lastKey==i.Key.ECHAP?(this.disable(),r=!0):this.components.forEach((function(t,n){t.selected&&e.select(n)})),this.components.forEach((function(t,n){if(t instanceof _&&(r&&(e.selectedComponent==n?t.selectable&&(t.selected=!0):t.selected=!1),e.selectedComponent==n&&e.lastKey==i.Key.ENTER&&null!=t.triggersClick&&t.triggersClick.length>0&&!t.disabled))return e.lastKey=-1,e.selectedComponent=0,void t.triggersClick.forEach((function(t){return t()}))}))),n.restore()}this.lastKey=-1}},{key:"drawComponents",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t)}},{key:"drawBlur",value:function(t){X.blurCanvas(t,5)}},{key:"drawBackground",value:function(t){t.fillStyle=this.backgroundColor,t.fillRect(0,0,t.canvas.width,t.canvas.height)}},{key:"disable",value:function(){d()(w()(n.prototype),"disable",this).call(this),this.components.forEach((function(t){return t&&t.disable&&t.disable()}))}},{key:"enable",value:function(){d()(w()(n.prototype),"enable",this).call(this),this.components.forEach((function(t){return t&&t.enable&&t.enable()}))}},{key:"select",value:function(t){if(this.selectedComponent=t,this.selectedComponent>=this.components.length?this.selectedComponent=0:this.selectedComponent<0&&(this.selectedComponent=this.components.length-1),this.components[this.selectedComponent]&&!this.components[this.selectedComponent].selectable){if(this.lastKey==i.Key.UP)return this.select(this.selectedComponent-1);if(this.lastKey==i.Key.BOTTOM)return this.select(this.selectedComponent+1)}}},{key:"width",get:function(){return this.parent.width}},{key:"maxWidth",get:function(){return this.canvas.width}}]),n}(j);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var ft=function(t){v()(n,t);var e=ht(n);function n(t,r,s,a,c,u,h,f,p,v,g,y,m,S,b){var C,k;return o()(this,n),k=e.call(this,t,r,s,a,c,u),R()(l()(k),"selectable",!0),k.text=b||"",k.fontSizeInitial=h,k.fontSize=k.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),k.fontFamily=f||i.Setting.FONT_FAMILY,k.fontColor=m||i.Setting.INPUT_DEFAULT_FONT_COLOR,k.backgroundColor=p||i.Setting.INPUT_DEFAULT_BACKGROUND_COLOR,k.borderColor=v||i.Setting.INPUT_DEFAULT_BORDER_COLOR,k.borderColorHover=g||i.Setting.INPUT_DEFAULT_BORDER_COLOR_HOVER,k.selectColor=S||i.Setting.INPUT_DEFAULT_SELECT_COLOR,k.borderSize=y||3,k.height=null==k.height?k.fontSize+2*k.borderSize:k.height,k.positionStart=0,k.positionEnd=0,k.offsetX=0,k.lastTime=0,k.totalTime=0,k.input=document.createElement("input"),k.input.setAttribute("type","text"),k.input.style.position="absolute",k.input.style.left="-9999px",k.input.tabIndex=-1,k.input.addEventListener("input",(function(){return k.totalTime=0})),k.input.addEventListener("blur",(function(){return k.selected=!1})),k.input.addEventListener("focus",(function(){return k.selected=!0})),document.body.appendChild(k.input),k.appendToCanvas=!1,k.noticeLogged=!1,k.canvasTmp=document.createElement("canvas"),d()((C=l()(k),w()(n.prototype)),"addClickAction",C).call(C,(function(){return k.click()})),k}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas,i=e.getContext("2d");i.save(),this.input.selectionEnd!=this.positionEnd&&(this.totalTime=0),this.canvas&&this.canvas.container&&!this.appendToCanvas?(document.body.removeChild(this.input),this.canvas.container.appendChild(this.input),this.appendToCanvas=!0):this.canvas||this.noticeLogged||(console&&console.warn&&console.warn("Notice: the use of JSGameTools.Canvas is needed for Input components to properly work in fullscreen mode."),this.noticeLogged=!0),this.selected&&!this.disabled?this.click():this.blur(),this.text=this.input.value,this.positionStart=this.input.selectionStart,this.positionEnd=this.input.selectionEnd;var r=performance.now(),o=0;this.lastTime>0&&(o=r-this.lastTime),this.lastTime=r,this.totalTime+=o,this.drawBackground(i),this.drawBorder(i),this.canvasTmp.width=e.width,this.canvasTmp.height=e.height;var s=this.canvasTmp.getContext("2d");X.clear(s);var a=this.x+5;a=this.drawText(s,a),X.drawImageData(i,this.canvasTmp,this.x+this.borderSize,this.y+this.borderSize,this.width-2*this.borderSize,this.height-2*this.borderSize,this.x+this.borderSize,this.y+this.borderSize,this.width-2*this.borderSize,this.height-2*this.borderSize),(this.hovered||this.clicked)&&(this.canvas&&this.canvas.canvas?this.canvas.canvas.style.cursor="text":e.style.cursor="text"),this.selected||(this.totalTime=0),i.restore()}},{key:"drawText",value:function(t,e){for(var n=-1;n<this.text.length;n++){if(n>-1){var i=X.wrapTextLines(t,this.text[n],this.width,this.fontSize,this.fontFamily,!0),r=e-this.offsetX,o=this.y+this.borderSize;r>=this.x-i.width&&r<=this.x+this.width&&(this.positionStart!=this.positionEnd&&n>=this.positionStart&&n<=this.positionEnd&&this.drawHighlight(t,e,i),X.drawText(t,this.text[n],this.fontColor,this.fontSize,this.fontFamily,"default","default",r,o,!1)),e+=i.width+1}this.positionEnd==n+1&&this.selected&&(this.totalTime<=500?this.drawCursor(t,e):this.totalTime>1e3&&(this.totalTime=0),this.offsetX=Math.max(0,Math.round(e-this.x-this.width+8)))}return e}},{key:"drawCursor",value:function(t,e){t.strokeStyle=this.borderColor,t.lineWidth=1,t.beginPath(),t.moveTo(e-this.offsetX,this.y+3),t.lineTo(e-this.offsetX,this.y+this.fontSize),t.stroke()}},{key:"drawHighlight",value:function(t,e,n){t.fillStyle=this.selectColor,t.fillRect(e-this.offsetX,this.y+this.borderSize,n.width+2,this.height-2*this.borderSize)}},{key:"drawBorder",value:function(t){t.strokeStyle=this.selected?this.borderColorHover:this.borderColor,t.lineWidth=this.borderSize,t.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"drawBackground",value:function(t){t.fillStyle=this.backgroundColor,t.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height))}},{key:"click",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}}]),n}(_);function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var pt=function(t){v()(n,t);var e=dt(n);function n(t,r,s,a,c,u,h,f,d,p,v){var g;return o()(this,n),g=e.call(this,r,s),R()(l()(g),"selectable",!1),g.text=t,g.color=u||i.Setting.LABEL_DEFAULT_FONT_COLOR,g.fontSize=a||i.Setting.FONT_SIZE,g.fontFamily=c||i.Setting.FONT_FAMILY,g.alignement=h||"default",g.verticalAlignement=f||"default",g.wrap=d||!0,g.bold=p||!1,g.underline=v||!1,g}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),X.drawText(e,this.text,this.color,this.fontSize,this.fontFamily,this.alignement,this.verticalAlignement,this.x,this.y,this.wrap,this.bold,this.underline,null,this.parent),e.restore()}},{key:"height",get:function(){return X.wrapTextLines(this.canvas?this.canvas.getContext("2d"):null,this.text,null,this.fontSize,this.fontFamily,!this.wrap).height}},{key:"width",get:function(){return X.wrapTextLines(this.canvas?this.canvas.getContext("2d"):null,this.text,null,this.fontSize,this.fontFamily,!this.wrap).width}}]),n}(_);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var gt=function(t){v()(n,t);var e=vt(n);function n(t,r,s,a,c,u,h,f,d,p,v,g,y){var m;return o()(this,n),m=e.call(this,t,r,s,a,c,u||i.Setting.LINK_DEFAULT_COLOR,d,p,v,g,y||!0),R()(l()(m),"selectable",!0),m.colorHover=h||i.Setting.LINK_DEFAULT_HOVER_COLOR,m.colorDown=f||i.Setting.LINK_DEFAULT_CLICK_COLOR,m.initialColor=m.color,m.initialUnderline=m.underline,m}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas;this.clicked?(this.underline=!1,this.color=this.colorDown,e.style.cursor="pointer"):this.hovered||this.selected?(this.underline=!1,this.color=this.colorHover,this.hovered&&(e.style.cursor="pointer")):(this.underline=this.initialUnderline,this.color=this.initialColor),this.init=!0}}]),n}(pt);function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var mt=function(t){v()(n,t);var e=yt(n);function n(t,r,s){var a;o()(this,n);for(var c=arguments.length,u=new Array(c>3?c-3:0),h=3;h<c;h++)u[h-3]=arguments[h];return a=e.call.apply(e,[this,null,null,null,null,null,null,t||i.Setting.TOOLTIP_DEFAULT_BACKGROUND,null,null,r||i.Setting.DEFAULT_PADDING,s,!1,!0,!0].concat(u)),R()(l()(a),"selectable",!1),a.disabled=!0,a}return a()(n,[{key:"draw",value:function(t){if(!this.disabled){var e=t.canvas,i=e.getContext("2d");i.save(),this.x+this.width+this.padding>e.width&&(this.x-=this.width+this.padding),this.y+this.height+this.padding>e.height&&(this.y-=this.height+this.padding),d()(w()(n.prototype),"draw",this).call(this,i),i.restore()}}},{key:"width",get:function(){return d()(w()(n.prototype),"width",this)+this.padding},set:function(t){h()(w()(n.prototype),"width",t,this,!0)}},{key:"height",get:function(){return d()(w()(n.prototype),"height",this)+this.padding},set:function(t){h()(w()(n.prototype),"height",t,this,!0)}}]),n}(j);function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var St=function(t){v()(n,t);var e=wt(n);function n(){var t,i;return o()(this,n),(t=i=e.call(this)).addAll.apply(t,arguments),i}return a()(n,[{key:"draw",value:function(t){var e=this;d()(w()(n.prototype),"draw",this).call(this,t);var i=t.canvas,r=i.getContext("2d");r.save(),i.style.cursor="default";var o=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof _&&!(t instanceof ut)&&!(t instanceof mt)&&!(t instanceof ct)})),s=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof ut})).filter((function(t){return!t.disabled}))[0],a=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof mt})),c=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof ft})),l=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof ct&&!t.foreGround})),u=d()(w()(n.prototype),"components",this).filter((function(t){return t&&t instanceof ct&&t.foreGround}));c&&c.forEach((function(t){return t.canvas=e.canvas})),this.disableBackgroundComponents(s,o),this.drawBackgroundComponents(o,r,l,a),this.drawForegroundComponents(s,r,u),r.restore()}},{key:"disableBackgroundComponents",value:function(t,e){t?e&&e.forEach((function(t){return t.disable()})):e&&e.forEach((function(t){return t.enable()}))}},{key:"drawForegroundComponents",value:function(t,e,n){t&&t.draw(e),n&&n.forEach((function(t){return t.draw(e)}))}},{key:"drawBackgroundComponents",value:function(t,e,n,i){t&&t.forEach((function(t){return t.draw(e)})),n&&n.forEach((function(t){return t.draw(e)})),i&&i.forEach((function(t){return t.draw(e)}))}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return 0}}]),n}(G);function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var bt=function(t){v()(n,t);var e=Rt(n);function n(t,i,r,s,a,c,u,h,f,d,p){var v;return o()(this,n),v=e.call(this,null,i,r,s,a,c,u,h,f,d,p),R()(l()(v),"selectable",!1),v.displayFrames=t||!1,v.frames=0,v.lastFrame=0,v.currentFPS=0,v.intervalCountFPS=setInterval((function(){return v.countFPS()}),1e3),v}return a()(n,[{key:"draw",value:function(t){this.text="FPS: "+this.currentFPS+(this.displayFrames?" / Frames: "+this.frames:""),d()(w()(n.prototype),"draw",this).call(this,t),this.frames++}},{key:"countFPS",value:function(){this.lastFrame>0&&(this.currentFPS=this.frames-this.lastFrame),this.lastFrame=this.frames}}]),n}(pt);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var kt=new WeakMap,Et=function(t){v()(n,t);var e=Ct(n);function n(t,r,s,a,c,u,h,f,d,p,v,g){var y;return o()(this,n),y=e.call(this,t,r,s,a,p,v,d),kt.set(l()(y),{writable:!0,value:0}),R()(l()(y),"selectable",!1),y.backgroundColor=c||i.Setting.PROGRESS_DEFAULT_BACKGROUND,y.foregroundColor=u||i.Setting.PROGRESS_DEFAULT_FOREGROUND,y.percent=null==h?0:h,E()(l()(y),kt,y.percent),y.easingFunction=g,y.animationDuration=f||2,y.lastTime=0,y.totalTime=0,y}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save();var i=performance.now(),r=0,o=C()(this,kt)==this.percent||this.disableAnimation?1:this.totalTime/(1e3*this.animationDuration);this.easingFunction&&(o=this.easingFunction(o));var s=Math.round(Math.min(this.width,this.width*(C()(this,kt)+(this.percent-C()(this,kt))*o)));C()(this,kt)==this.percent||this.disableAnimation?(this.totalTime=0,this.lastTime=0):(this.lastTime>0&&(r=i-this.lastTime),this.totalTime+=r,this.totalTime>=1e3*this.animationDuration?(E()(this,kt,this.percent),this.totalTime=0,this.lastTime=0):this.lastTime=i),this.drawBackground(e),this.drawForeground(e,s),e.restore()}},{key:"drawBackground",value:function(t){t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this.x,this.y,this.width,this.height),t.restore()}},{key:"drawForeground",value:function(t,e){t.save(),t.fillStyle=this.foregroundColor,t.fillRect(this.x,this.y,e,this.height),t.restore()}}]),n}(_),Tt=new WeakMap,At=new WeakMap,xt=new WeakMap,Dt=function(){function t(e,n,r,s,a,c){o()(this,t),Tt.set(this,{writable:!0,value:void 0}),At.set(this,{writable:!0,value:void 0}),xt.set(this,{writable:!0,value:void 0}),this.canvas=n||document.createElement("canvas"),this.container=document.createElement("div"),this.width=r||i.Setting.CANVAS_WIDTH,this.height=s||i.Setting.CANVAS_HEIGHT,this.scene=e,this.container.appendChild(this.canvas),this.started=!1,this.maxFPS=c||-1,E()(this,Tt,0),a&&this.autoResize(),this.scene&&(this.scene.parent=this,this.scene.canvas=this)}return a()(t,[{key:"draw",value:function(){var t=this.canvas.getContext("2d");this.drawClear(t),this.drawScene(t)}},{key:"drawScene",value:function(t){this.scene&&(this.scene.parent=this,this.scene.canvas=this),scene.draw(t)}},{key:"drawClear",value:function(t){X.clear(t)}},{key:"startDraw",value:function(){var t=this;this.started=!0,requestAnimationFrame((function(e){if(t.started){var n=e-C()(t,Tt);(t.maxFPS<1||n>1e3/t.maxFPS)&&(E()(t,Tt,e),t.draw()),t.startDraw()}}))}},{key:"stopDraw",value:function(){this.started=!1}},{key:"appendTo",value:function(t){t.appendChild(this.container)}},{key:"toggleFullscreen",value:function(){X.toggleFullscreen(this.canvas,this.container)}},{key:"autoResize",value:function(){X.enableAutoResizeCanvas(this.canvas,this.width,this.height)}},{key:"getContext",value:function(t){return this.canvas?this.canvas.getContext(t||"2d"):null}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return 0}},{key:"width",get:function(){return this.canvas?this.canvas.width:C()(this,At)},set:function(t){E()(this,At,t),this.canvas.width=t}},{key:"height",get:function(){return this.canvas?this.canvas.height:C()(this,xt)},set:function(t){E()(this,xt,t),this.canvas.height=t}}]),t}(),Ot={easeInCubic:function(t){return t*t*t},easeOutBounce:function(t){var e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutCubic:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2},easeInOutSine:function(t){return-(Math.cos(Math.PI*t)-1)/2},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2},easeInOutCirc:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2},easeInOutQuad:function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2},easeInOutExpo:function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2},easeInOutBack:function(t){var e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}};function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var Lt=function(t){v()(n,t);var e=_t(n);function n(t,i,r,s,a,c,u,h,f,d,p,v,g,y){var m;o()(this,n);for(var w=arguments.length,S=new Array(w>14?w-14:0),b=14;b<w;b++)S[b-14]=arguments[b];return m=e.call.apply(e,[this,t,i,r,s,a,c,u,h,f,d,p,v,g,y].concat(S)),R()(l()(m),"selectable",!1),m}return a()(n,[{key:"draw",value:function(t){var e=this;d()(w()(n.prototype),"draw",this).call(this,t);var i,r=t.canvas,o=r.getContext("2d");if(o.save(),this.maxWidth||this.maxHeight?(this.canvasTmp.width=r.width,this.canvasTmp.height=r.height,i=this.canvasTmp.getContext("2d"),X.clear(i)):i=o,null!=d()(w()(n.prototype),"components",this)){var s=this.x+this.padding||this.padding;d()(w()(n.prototype),"components",this).forEach((function(t){s=e.drawComponent(t,s,i)}))}(this.maxWidth||this.maxHeight)&&X.drawImageData(o,this.canvasTmp,this.x,this.y,this.maxWidth,this.maxHeight,this.x,this.y,this.maxWidth,this.maxHeight),d()(w()(n.prototype),"drawScrollbars",this).call(this,o),o.restore()}},{key:"drawComponent",value:function(t,e,n){return t instanceof _&&(t.x=e-this.offsetScrollX,this.y&&(t.y=this.y+this.padding-this.offsetScrollY),t.enable(),t.draw(n),e+=t.width+this.spaceBetweenComponents),e}},{key:"height",get:function(){var t=0;return d()(w()(n.prototype),"components",this).forEach((function(e){e.height>t&&(t=e.height)})),t+this.padding}},{key:"width",get:function(){var t=0;return d()(w()(n.prototype),"components",this).forEach((function(e){return t+=e.width})),t+this.spaceBetweenComponents*(d()(w()(n.prototype),"components",this).length-1)+this.padding}}]),n}(G);function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}var Mt=function(t){v()(n,t);var e=Ft(n);function n(t,r,s,a,c,u,h,f,d){var p;return o()(this,n),p=e.call(this,t,r,null,null,f,d),R()(l()(p),"selectable",!1),p.toX=s,p.toY=a,p.lineWidth=c||i.Setting.ARROW_DEFAULT_LINE_SIZE,p.headSize=u||i.Setting.ARROW_DEFAULT_HEAD_SIZE,p.color=h||i.Setting.ARROW_DEFAULT_COLOR,p}return a()(n,[{key:"draw",value:function(t){d()(w()(n.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");X.drawArrow(e,this.x,this.y,this.toX,this.toY,this.lineWidth,this.headSize,this.color),this.init=!0}},{key:"width",get:function(){return Math.abs(this.x-this.toX)}},{key:"height",get:function(){return Math.abs(this.y-this.toY)}}]),n}(_)}])}));