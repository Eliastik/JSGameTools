!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSGameTools=e():t.JSGameTools=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(9);function r(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},r(e,n,o||e)}t.exports=r},function(t,e,n){var i=n(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(11),r=n(7);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e){t.exports=function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e,n){var i=e.get(t);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(t,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}},function(t,e,n){var i=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"Constants",(function(){return i})),n.d(e,"Button",(function(){return b})),n.d(e,"ButtonImage",(function(){return x})),n.d(e,"ImageLoader",(function(){return S})),n.d(e,"NotificationMessage",(function(){return F})),n.d(e,"Utils",(function(){return y})),n.d(e,"Menu",(function(){return M})),n.d(e,"Input",(function(){return I})),n.d(e,"Label",(function(){return A})),n.d(e,"Link",(function(){return B})),n.d(e,"Tooltip",(function(){return L})),n.d(e,"Scene",(function(){return j}));var i={Setting:{FONT_FAMILY:"sans-serif",FONT_SIZE:32},Key:{UP:38,RIGHT:39,BOTTOM:40,LEFT:37,ENTER:13}},r=n(1),o=n.n(r),s=n(2),l=n.n(s),a=n(3),u=n.n(a),h=n(4),c=n.n(h),f=n(5),d=n.n(f),g=n(0),v=n.n(g),y={preRenderedFont:{},lastKey:-1,preRenderFont:function(t,e,n,i){t.push("?"),t.push(" "),t.push("A");for(var r=0;r<t.length;r++){var o=document.createElement("canvas"),s=o.getContext("2d");s.font=e+"px "+i;var l=s.measureText(t[r]).width;o.width=l,o.height=e+e/6,s.font=e+"px "+i,s.fillStyle=n,s.textBaseline="top",s.fillText(t[r],0,0),this.preRenderedFont[t[r]]=o}},drawImage:function(t,e,n,i,r,o,s,l,a,u,h,c){this.drawImageWrapper(t,e,n,i,r,o,s,l,a,u,h,c)},drawImageData:function(t,e,n,i,r,o,s,l,a,u,h,c){this.drawImageWrapper(t,e,n,i,r,o,s,l,a,u,h,c)},drawImageWrapper:function(t,e,n,i,r,o,s,l,a,u,h,c){n=null==n||isNaN(n)?null:Math.round(n),i=null==i||isNaN(i)?null:Math.round(i),r=null==r||isNaN(r)?null:Math.round(r),o=null==o||isNaN(o)?null:Math.round(o),s=null==s||isNaN(s)?null:Math.round(s),l=null==l||isNaN(l)?null:Math.round(l),a=null==a||isNaN(a)?null:Math.round(a),u=null==u||isNaN(u)?null:Math.round(u),h=null!=h&&h,null!=(c=null==c||isNaN(c)?null:c)&&(t.save(),t.translate(n+r/2,i+o/2),t.rotate(c*Math.PI/180),n=-r/2,i=-o/2),h&&t.clearRect(n,i,r,o),null!=t&&null!=e&&(null!=s&&null!=l&&null!=a&&null!=u?t.drawImage(e,s,l,a,u,n,i,r,o):t.drawImage(e,n,i,r,o)),null!=c&&t.restore()},drawText:function(t,e,n,i,r,o,s,l,a,u,h,c){t.save(),Array.isArray(n)||(t.fillStyle=n,t.strokeStyle=n),t.font=(h?"bold ":"")+i+"px "+r,t.filter="none",u&&(e=this.wrapTextLines(t,e).text);var f=e.split("\n"),d=0,g=0,v=0;"center"==s?a=t.canvas.height/2-i*f.length/2:"top"==s?a=5:"bottom"==s&&(a=t.canvas.height-i*f.length/2-i/5);for(var y=0;y<f.length;y++){var p=f[y],m=t.measureText(p).width,w=0;if(Array.isArray(n)){var b=y;b>n.length-1&&(b=n.length-1),t.fillStyle=n[b],t.strokeStyle=n[b]}"center"==o?(g=Math.round(t.canvas.width/2-t.measureText(p).width/2),w=Math.round(a+i*y)):"right"==o?(g=Math.round(t.canvas.width-t.measureText(p).width-15),w=Math.round(a+i*y)):"left"==o?(g=5,w=Math.round(a+i*y)):(g=Math.round(l),w=Math.round(a+i*y)),t.fillText(p,g,w),c&&(t.lineWidth=1,t.beginPath(),t.moveTo(g,w+3),t.lineTo(Math.round(g+m),w+3),t.stroke()),m>d&&(d=m),0==y&&(v=w)}return t.restore(),{x:g,y:v,height:i*f.length,width:d}},wrapText:function(t,e){if(t.length>e){for(var n=e;n>0&&" "!=t[n];n--);if(n>0){var i=t.substring(0,n),r=t.substring(n+1);return i+"\n"+this.wrapText(r,e)}}return t},wrapTextLines:function(t,e,n,i,r){if(t&&e){t.save(),t.font=i+"px "+r;for(var o=e.split("\n"),s="",l=n||t.measureText("A").width,a=Math.round(t.canvas.width/l),u=0,h=0,c=0;c<o.length;c++){var f=this.wrapText(o[c],a);s+=f,c<o.length-1&&(s+="\n");for(var d=0;d<f.split("\n").length;d++){var g=t.measureText(f.split("\n")[d]).width;u+=parseFloat(i),g>h&&(h=g)}}return t.restore(),{text:s,height:u,width:h,carWidth:l}}return{text:"",height:0,width:0,carWidth:0}},drawArrow:function(t,e,n,i,r){t.save(),t.lineCap="round",t.lineWidth=8,t.strokeStyle="#FF0000",t.filter="",t.beginPath();var o=i-e,s=r-n,l=Math.atan2(s,o);t.moveTo(e,n),t.lineTo(i,r),t.moveTo(i,r),t.lineTo(i-20*Math.cos(l-Math.PI/6),r-20*Math.sin(l-Math.PI/6)),t.moveTo(i,r),t.lineTo(i-20*Math.cos(l+Math.PI/6),r-20*Math.sin(l+Math.PI/6)),t.stroke(),t.restore()},clear:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},isFilterHueAvailable:function(){var t=document.createElement("canvas");t.width=5,t.height=5;var e=t.getContext("2d");e.fillStyle="#FF0000",e.filter="hue-rotate(90deg)",e.fillRect(0,0,5,5);var n=e.getImageData(0,0,1,1).data;return 255!=n[0]||0!=n[1]||0!=n[2]},blurCanvas:function(t,e){t.save(),t.filter="blur("+e+"px)",this.drawImageData(t,t.canvas,0,0,t.canvas.width,t.canvas.height),t.restore()},getFontSize:function(t){return Math.floor(parseInt(t.font.match(/\d+/),10)/1.25)},autoResizeCanvas:function(t,e,n){if(document.fullscreenElement)document.fullscreenElement==t?(t.width=window.innerWidth,t.height=window.innerHeight):(t.width=e,t.height=n);else if(e>=.85*document.documentElement.clientWidth){var i=e/n;t.width=.85*document.documentElement.clientWidth,t.height=t.width/i}else t.width=e,t.height=n},enableAutoResizeCanvas:function(t,e,n){var i=this;t&&"true"!=t.getAttribute("autoresize-canvas-event")&&(this.autoResizeCanvas(t,e,n),window.addEventListener("resize",(function(){t.setAttribute("autoresize-canvas-event","true"),i.autoResizeCanvas(t,e,n)})))},autoResizeCanvasFullscreen:function(t){document.fullscreenElement==t&&(t.width=window.innerWidth,t.height=window.innerHeight)},enableAutoResizeCanvasFullscreen:function(t){var e=this;t&&"true"!=t.getAttribute("autoresizefullscreen-canvas-event")&&(this.autoResizeCanvasFullscreen(t),window.addEventListener("resize",(function(){t.setAttribute("autoresizefullscreen-canvas-event","true"),e.autoResizeCanvasFullscreen(t)})))},toggleFullscreen:function(t){if(t){var e=t.width,n=t.height;if(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.oRequestFullscreen&&t.oRequestFullscreen(),this.enableAutoResizeCanvasFullscreen(t),"true"!=t.getAttribute("fullscreenchange-canvas-event")){t.setAttribute("fullscreenchange-canvas-event","true");var i=function(){document.fullscreenElement!=t&&(t.width=e,t.height=n)};void 0!==document.onfullscreenchange?document.onfullscreenchange=i:void 0!==document.onmsfullscreenchange?document.onmsfullscreenchange=i:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=i:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=i:void 0!==document.onokitfullscreenchange&&(document.onofullscreenchange=i)}}}},p=function(){function t(e,n,i,r){o()(this,t),this.x=e||0,this.y=n||0,this.initialX=e,this.initialY=n,this.width=i,this.height=r,this.triggersClick=[],this.triggersHover=[],this.triggersDown=[],this.init=!1,this.initEvents=!1,this.selected=!1,this.clicked=!1,this.hovered=!1,this.disabled=!1,this.tooltip}return l()(t,[{key:"draw",value:function(t){var e=this,n=t.canvas,i=n.getContext("2d");this.initEvent||null==i||(n.addEventListener("mousemove",(function(t){if(e.disabled)e.hovered=!1,e.clicked=!1,e.tooltip&&(e.tooltip.disabled=!0);else if(e.isInside(e.getMousePos(n,t))){if(null==e.triggersHover||e.disabled||e.triggersHover.forEach((function(t){return t()})),e.tooltip){var i=e.getMousePos(n,t);e.tooltip.x=i.x+10,e.tooltip.y=i.y+10,e.tooltip.disabled=!1}e.hovered=!0}else e.hovered=!1,e.tooltip&&(e.tooltip.disabled=!0)}),!1),n.addEventListener("click",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(n,t))?(null!=e.triggersClick&&e.triggersClick.forEach((function(t){return t()})),e.selected=!0):(e.clicked=!1,e.selected=!1)}),!1),n.addEventListener("mousedown",(function(t){e.disabled?(e.hovered=!1,e.clicked=!1):e.isInside(e.getMousePos(n,t))?(null!=e.triggersDown&&e.triggersDown.forEach((function(t){return t()})),e.clicked=!0):e.clicked=!1}),!1),n.addEventListener("mouseup",(function(){e.clicked=!1}),!1)),this.initEvent=!0}},{key:"getMousePos",value:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}},{key:"isInside",value:function(t){return t.x>this.x&&t.x<this.x+this.width&&t.y<this.y+this.height&&t.y>this.y}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"setClickAction",value:function(t){this.triggersClick=[t]}},{key:"addClickAction",value:function(t){this.triggersClick.push(t)}},{key:"removeClickAction",value:function(t){this.triggersClick=this.triggersClick.filter((function(e){return e!=t}))}},{key:"removeAllClickActions",value:function(){this.triggersClick=[]}},{key:"setHoverAction",value:function(t){this.triggersHover=[t]}},{key:"addHoverAction",value:function(t){this.triggersHover.push(t)}},{key:"removeHoverAction",value:function(t){this.triggersHover=this.triggersHover.filter((function(e){return e!=t}))}},{key:"removeAllHoverActions",value:function(){this.triggersHover=[]}},{key:"setDownAction",value:function(t){this.triggersDown=[t]}},{key:"addDownAction",value:function(t){this.triggersDown.push(t)}},{key:"removeDownAction",value:function(t){this.triggersDown=this.triggersDown.filter((function(e){return e!=t}))}},{key:"removeAllDownActions",value:function(){this.triggersDown=[]}}]),t}();function m(t){return function(){var e,n=v()(t);if(w()){var i=v()(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return d()(this,e)}}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var b=function(t){c()(n,t);var e=m(n);function n(t,r,s,l,a,u,h,c,f,d,g,v,y,p,m){var w;return o()(this,n),(w=e.call(this,r,s,c,f)).autoWidth=null==w.width,w.autoHeight=null==w.height,w.text=t,w.fontSizeInitial=d,w.fontSize=w.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),w.fontFamily=g||i.Setting.FONT_FAMILY,w.fontColor=v||"white",w.color=a||"rgba(0, 0, 0, 0)",w.colorHover=u||"#95a5a6",w.colorDown=h||"#727F80",w.alignement=l||"default",w.image,w.imgSrc=y,w.verticalAlignement=m||"default",w.imageLoader=p,w}return l()(n,[{key:"draw",value:function(t){u()(v()(n.prototype),"draw",this).call(this,t);var e=t.canvas,r=e.getContext("2d");r.save(),this.fontSize=this.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),r.font=this.fontSize+"px "+this.fontFamily;var o=y.wrapTextLines(r,this.text,null,this.fontSize,this.fontFamily),s=o.height,l=o.width;if(null!=this.imgSrc&&null!=this.imageLoader&&this.loadImage(this.imageLoader),null!=this.image){var a=this.image.width,h=this.image.height;this.autoWidth&&(this.width=1.25*a),this.autoHeight&&(this.height=1.5*h)}else null!=this.text&&(this.autoWidth&&(this.width=l+2*o.carWidth),this.autoHeight&&(this.height=s+this.fontSize/1.5));if("center"==this.alignement?this.x=e.width/2-this.width/2-this.initialX:"right"==this.alignement?this.x=e.width-this.width-5-this.initialX:"left"==this.alignement&&(this.x=5),"bottom"==this.verticalAlignement?this.y=e.height-this.height-5-this.initialY:"center"==this.verticalAlignement?this.y=e.height/2-this.height/2-this.initialY:"top"==this.verticalAlignement&&(this.y=15),this.hovered&&this.clicked?r.fillStyle=this.colorDown:this.hovered?r.fillStyle=this.colorHover:r.fillStyle=this.color,r.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),this.selected){var c=r.strokeStyle,f=r.lineWidth;r.strokeStyle="#a2cdd8",r.lineWidth=3,r.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),r.strokeStyle=c,r.lineWidth=f}if(null!=this.image){var d,g;if(this.image.width>this.width||this.image.height>this.height){var p=this.image.width/this.image.height;d=Math.floor(this.width/1.25),g=Math.floor(d/p)}var m=this.x+this.width/2-d/2,w=this.y+this.height/2-g/2;r.drawImage(this.image,Math.round(m),Math.round(w),Math.round(d),Math.round(g))}else if(null!=this.text){r.fillStyle=this.fontColor;var b=this.x+this.width/2-l/2,x=this.y+this.fontSize+this.fontSize/5;y.drawText(r,this.text,this.fontColor,this.fontSize,this.fontFamily,"center"==this.alignement?"center":"default","default",Math.round(b),Math.round(x),!0)}r.restore()}},{key:"loadImage",value:function(t){this.image=t.get(this.imgSrc)}}]),n}(p),x=function(t){c()(n,t);var e=m(n);function n(t,i,r,s,l,a,u,h,c,f){return o()(this,n),e.call(this,null,i,r,s,h,c,null,a,u,null,null,null,t,f,l)}return n}(b),S=function(){function t(){o()(this,t),this.images={},this.triedLoading=0,this.hasError=!1,this.nbImagesToLoad=1,this.firstImage=!0}return l()(t,[{key:"load",value:function(t,e){var n=this;if(this.firstImage&&(this.nbImagesToLoad=t.length,this.firstImage=!1),!(t.length>0))return e();this.loadImage(t[0],(function(i){if(1!=i)return n.hasError=!0,e();t.shift(),n.load(t,e)}))}},{key:"loadImage",value:function(t,e){var n=this;this.triedLoading++;var i=new Image;i.src=t,i.onload=function(){return null==n.images?e(!1):(n.images[t]=i,n.triedLoading=0,e(!0))},i.onerror=function(){if(n.triedLoading>=5)return null!=n.images&&(n.images[t]=i),n.triedLoading=0,e(!1);setTimeout((function(){n.loadImage(t,e)}),250)}}},{key:"get",value:function(t){return null!=this.images?this.images[t]:null}},{key:"clear",value:function(){this.images=null}}]),t}();function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var F=function(t){c()(r,t);var e,n=(e=r,function(){var t,n=v()(e);if(k()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function r(t,e,s,l,a,u,h,c,f,d){var g;return o()(this,r),(g=n.call(this,0,0,0,0)).text=t,g.textColor=null==e?"rgba(255, 255, 255, 0.75)":e,g.backgroundColor=null==s?"rgba(46, 204, 113, 0.5)":s,g.delayBeforeClosing=null==l?5:l,g.fontSizeInitial=u,g.fontSize=g.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),g.fontFamily=null==h?i.Setting.FONT_FAMILY:h,g.animationDelay=null==a?500:a,g.foreGround=null!=c&&c,g.timeLastFrame=0,g.animationTime=0,g.closed=!0,g.closing=!1,g.disableAnimation=null!=f&&f,g.closeButton=d,g}return l()(r,[{key:"draw",value:function(t,e){var n=this;if(null!=this.text){u()(v()(r.prototype),"draw",this).call(this,t);var o=t.canvas,s=o.getContext("2d");s.save(),this.init||(this.timeLastFrame=Date.now()),this.closeButton=null!=e?e:this.closeButton,null!=this.closeButton&&this.closeButton.addClickAction((function(){n.close()}));var l=Date.now()-this.timeLastFrame;this.timeLastFrame=Date.now(),this.animationTime>=1e3*this.delayBeforeClosing&&!this.closing&&!this.closed&&this.close(),this.fontSize=this.fontSizeInitial||i.Setting.FONT_SIZE;var a=y.wrapTextLines(s,this.text,null,this.fontSize,this.fontFamily).height+this.fontSize/2,h=o.width,c=1;if(this.closing?this.disableAnimation?this.animationTime=-1:this.animationTime-=l:this.animationTime+=l,this.animationTime<0&&(this.closed=!0,this.closing=!1),this.closed)this.disableCloseButton();else{this.disableAnimation||(c=this.animationTime/this.animationDelay);var f=o.height-a*(c<=1?c:1);s.fillStyle=this.backgroundColor,s.fillRect(0,f,h,a),y.drawText(s,this.text,this.textColor,this.fontSize,this.fontFamily,"center","default",null,f+this.fontSize,!0),null!=this.close&&null!=this.closeButton&&(this.closeButton.y=f+5),null!=this.closeButton&&this.closeButton.draw(s),this.disableCloseButton()}s.restore(),this.init=!0}}},{key:"close",value:function(){this.disableCloseButton(),this.closing||(this.closing=!0,this.animationTime=this.animationDelay)}},{key:"open",value:function(){this.timeLastFrame=0,this.animationTime=0,this.init=!1,this.closed=!1,this.closing=!1}},{key:"disableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof b&&this.closeButton.disable()}},{key:"enableCloseButton",value:function(){null!=this.closeButton&&null!=this.closeButton&&this.closeButton instanceof b&&this.closeButton.enable()}},{key:"copy",value:function(){return new r(this.text,this.textColor,this.backgroundColor,this.delayBeforeClosing,this.animationDelay,this.fontSize,this.fontFamily,this.foreGround)}}]),r}(p);function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var M=function(t){c()(r,t);var e,n=(e=r,function(){var t,n=v()(e);if(C()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function r(t,e,s,l,a,u,h,c,f){var d;return o()(this,r),(d=n.call(this,0,0,0,0)).buttons=t,d.text=e,d.colors=s||"#FFFFFF",d.fontSizeInitial=l,d.fontSize=d.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),d.fontFamily=a||i.Setting.FONT_FAMILY,d.alignement=u||"center",d.x=h||0,d.backgroundColor=null==c?"rgba(44, 62, 80, 0.75)":c,d.blurCanvas=null!=f&&f,d.disabled=!0,d.lastKey=null==d.lastKey?-1:d.lastKey,d.selectedButton=null==d.selectedButton?0:d.selectedButton,d}return l()(r,[{key:"draw",value:function(t){var e=this;u()(v()(r.prototype),"draw",this).call(this,t);var n=t.canvas.getContext("2d");if(!this.disabled){this.init||(document.addEventListener("keydown",(function(t){e.disabled||(e.lastKey=t.keyCode)})),this.init=!0),this.blurCanvas&&y.blurCanvas(n,5),n.save(),n.font=this.fontSize+"px "+this.fontFamily,n.fillStyle=this.backgroundColor,n.fillRect(0,0,n.canvas.width,n.canvas.height);var o=y.wrapTextLines(n,this.text,null,this.fontSize,this.fontFamily).height,s=0;if(null!=this.buttons){this.lastKey==i.Key.UP?this.selectedButton--:this.lastKey==i.Key.BOTTOM&&this.selectedButton++,this.selectedButton>=this.buttons.length?this.selectedButton=0:this.selectedButton<0&&(this.selectedButton=this.buttons.length-1);for(var l=0;l<this.buttons.length;l++)this.buttons[l].autoHeight?s+=y.wrapTextLines(n,this.buttons[l].text,null,this.fontSize,this.fontFamily).height+16:s+=this.buttons[l].height+5}var a=o+s,h=(n.canvas.height-a)/2+8,c=h+o;if(y.drawText(n,this.text,this.colors,this.fontSize,this.fontFamily,this.alignement,"default",this.x,h,!0),null!=this.buttons)for(var f=0;f<this.buttons.length;f++){if(this.buttons[f].y=c,this.selectedButton==f?this.buttons[f].selected=!0:this.buttons[f].selected=!1,this.buttons[f].enable(),this.buttons[f].draw(n),this.selectedButton==f&&this.lastKey==i.Key.ENTER&&null!=this.buttons[f].triggersClick&&this.buttons[f].triggersClick.length>0&&!this.buttons[f].disabled){this.lastKey=-1,this.selectedButton=0,this.buttons[f].triggersClick.forEach((function(t){return t()}));break}c+=this.buttons[f].height+8}n.restore()}this.lastKey=-1}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"set",value:function(t,e,n,i,r){this.buttons=t,this.text=e,this.colors=n,this.alignement=i||"center",this.x=r||0,this.enable()}}]),r}(p),R=n(7),T=n.n(R);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var I=function(t){c()(r,t);var e,n=(e=r,function(){var t,n=v()(e);if(z()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function r(t,e,s,l,a,h,c,f,d,g,y,p){var m;return o()(this,r),(m=n.call(this,t,e,s,l)).text=p||"",m.fontSizeInitial=a,m.fontSize=m.fontSizeInitial||Math.floor(i.Setting.FONT_SIZE/1.25),m.height=null==m.height?m.fontSize+m.fontSize/2:m.height,m.fontFamily=h||i.Setting.FONT_FAMILY,m.fontColor=y||"#000000",m.backgroundColor=c||"#ffffff",m.borderColor=f||"#000000",m.borderColorHover=d||"#a2cdd8",m.borderSize=g||3,m.disabled=!1,m.input=document.createElement("input"),m.input.setAttribute("type","text"),m.input.style.position="absolute",m.input.style.left="-9999px",m.input.addEventListener("input",(function(){return m.text=m.input.value})),document.body.appendChild(m.input),u()(v()(r.prototype),"addClickAction",T()(m)).call(T()(m),(function(){return m.click()})),m}return l()(r,[{key:"draw",value:function(t){u()(v()(r.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save(),e.fillStyle=this.backgroundColor,e.fillRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),e.strokeStyle=this.selected?this.borderColorHover:this.borderColor,e.lineWidth=this.borderSize,e.strokeRect(Math.round(this.x),Math.round(this.y),Math.round(this.width),Math.round(this.height)),y.drawText(e,this.text,this.fontColor,this.fontSize,this.fontFamily,"default","default",this.x+5,this.y+this.fontSize,!1),e.restore()}},{key:"click",value:function(){this.input.focus()}}]),r}(p);function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var A=function(t){c()(r,t);var e,n=(e=r,function(){var t,n=v()(e);if(E()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function r(t,e,s,l,a,u,h,c,f,d,g){var v;return o()(this,r),(v=n.call(this,e,s,0,0)).text=t,v.color=u||"#000000",v.size=l||i.Setting.FONT_SIZE,v.fontFamily=a||i.Setting.FONT_FAMILY,v.alignement=h||"default",v.verticalAlignement=c||"default",v.wrap=f||!0,v.bold=d||!1,v.underline=g||!1,v}return l()(r,[{key:"draw",value:function(t){u()(v()(r.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save();var n=y.drawText(e,this.text,this.color,this.size,this.fontFamily,this.alignement,this.verticalAlignement,this.initialX,this.initialY,this.wrap,this.bold,this.underline);this.x=n.x,this.y=n.y-this.size,this.height=n.height,this.width=n.width,e.restore()}}]),r}(p);function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=v()(e);if(D()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function i(t,e,r,s,l,a,u,h,c,f,d,g,v){var y;return o()(this,i),(y=n.call(this,t,e,r,s,l,a||"#0000EE",c,f,d,g,v||!0)).colorHover=u||"#4D4DFF",y.colorDown=h||"#EE7700",y.initialColor=y.color,y.initialUnderline=y.underline,y}return l()(i,[{key:"draw",value:function(t){u()(v()(i.prototype),"draw",this).call(this,t);var e=t.canvas;this.clicked?(this.underline=!1,this.color=this.colorDown,e.style.cursor="pointer"):this.hovered?(this.underline=!1,this.color=this.colorHover,e.style.cursor="pointer"):(this.underline=this.initialUnderline,this.color=this.initialColor,e.style.cursor="default"),this.init=!0}}]),i}(A);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var L=function(t){c()(r,t);var e,n=(e=r,function(){var t,n=v()(e);if(O()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function r(t,e,s,l,a,u,h,c){var f;return o()(this,r),(f=n.call(this,0,0,0,0)).text=t,f.backgroundColor=l||"rgba(255, 255, 255, 0.25)",f.fontColor=a||"#FFFFFF",f.fontSize=e||i.Setting.FONT_SIZE,f.fontFamily=s||i.Setting.FONT_FAMILY,f.wrap=u||!0,f.bold=h||!1,f.underline=c||!1,f.disabled=!0,f}return l()(r,[{key:"draw",value:function(t){if(u()(v()(r.prototype),"draw",this).call(this,t),!this.disabled){var e=t.canvas,n=e.getContext("2d");n.save(),this.x+this.width+10>e.width&&(this.x-=this.width+10),this.y+this.height+10>e.height&&(this.y-=this.height+10),n.fillStyle=this.backgroundColor,n.fillRect(this.x,this.y,this.width+10,this.height+10);var i=y.drawText(n,this.text,this.fontColor,this.fontSize,this.fontFamily,null,null,this.x+5,this.y+this.fontSize,this.wrap,this.bold,this.underline);this.width=i.width,this.height=i.height,n.restore()}}}]),r}(p),N=n(8),P=n.n(N),_=n(6),H=n.n(_);function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){c()(i,t);var e,n=(e=i,function(){var t,n=v()(e);if(W()){var i=v()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return d()(this,t)});function i(){var t,e;return o()(this,i),e=n.call(this,0,0,0,0),K.set(T()(e),{writable:!0,value:[]}),(t=e).addAll.apply(t,arguments),e}return l()(i,[{key:"draw",value:function(t){u()(v()(i.prototype),"draw",this).call(this,t);var e=t.canvas.getContext("2d");e.save();var n=H()(this,K).filter((function(t){return t&&t instanceof p&&!(t instanceof M)&&!(t instanceof L)&&!(t instanceof F)})),r=H()(this,K).filter((function(t){return t&&t instanceof M&&!t.disabled}))[0],o=H()(this,K).filter((function(t){return t&&t instanceof L})),s=H()(this,K).filter((function(t){return t&&t instanceof F&&!t.foreGround})),l=H()(this,K).filter((function(t){return t&&t instanceof F&&t.foreGround}));r?n&&n.forEach((function(t){return t.disable()})):n&&n.forEach((function(t){return t.enable()})),n&&n.forEach((function(t){return t.draw(e)})),s&&s.forEach((function(t){return t.draw(e)})),o&&o.forEach((function(t){return t.draw(e)})),r&&r.draw(e),l&&l.forEach((function(t){return t.draw(e)})),e.restore()}},{key:"add",value:function(t){this.addAll(t)}},{key:"addAll",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach((function(e){return H()(t,K).push(e)}))}},{key:"remove",value:function(t){P()(this,K,H()(this,K).filter((function(e){return t!=e})))}},{key:"removeAll",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach((function(e){return t.remove(e)}))}}]),i}(p),K=new WeakMap}])}));